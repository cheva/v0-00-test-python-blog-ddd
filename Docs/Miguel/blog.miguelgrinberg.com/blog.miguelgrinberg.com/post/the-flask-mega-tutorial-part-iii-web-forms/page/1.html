<!doctype html>
<html lang="en">
  
<!-- Mirrored from blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms/page/1 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 09:37:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
  <script type="text/javascript">
    function getPreferredTheme() {
      const storedTheme = localStorage.getItem('theme')
      if (storedTheme) {
        return storedTheme
      }
      return 'auto';
    }

    function setTheme(theme) {
      if (theme === 'auto') {
        theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
      }
      document.documentElement.setAttribute('data-bs-theme', theme);
    };

    setTheme(getPreferredTheme());
  </script>
  
    <title>
  
    The Flask Mega-Tutorial, Part III: Web Forms - miguelgrinberg.com
  
</title>
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="description" content="miguelgrinberg.com">
  <meta name="copyright" content="Copyright (c) 2012-2024 Miguel Grinberg">
  <meta name="author" content="Miguel Grinberg">
  
  <meta name="keywords" content="flask, programming, python, forms, wtforms, input, html">
  
  
  <link rel="canonical" href="../../the-flask-mega-tutorial-part-iii-web-forms.html">
  

  
    <link href="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&amp;display=swap" rel="stylesheet">

  <link href="../../../static/tomorrow.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/tomorrow-night.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/social.css" rel="stylesheet" type="text/css" />
  <link href="../../../static/style_20231230.css" rel="stylesheet" type="text/css" />

  <link rel="shortcut icon" href="https://blog.miguelgrinberg.com/static/favicon.ico">
  <link rel="alternate" type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed" title="miguelgrinberg.com RSS feed">

    <meta property="og:title" content="The Flask Mega-Tutorial, Part III: Web Forms">
    <meta property="og:description" content="This is the third installment of the Flask Mega-Tutorial series, in which I&#39;m going to tell you how to work with web forms.You are reading the 2024 edition of the Flask Mega-Tutorial. The complete…">
    <meta property="og:image" content="https://blog.miguelgrinberg.com/static/cards/the-flask-mega-tutorial-part-iii-web-forms.jpg">
    <meta property="og:url" content="https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms">
    <meta name="twitter:title" content="The Flask Mega-Tutorial, Part III: Web Forms">
    <meta name="twitter:description" content="This is the third installment of the Flask Mega-Tutorial series, in which I&#39;m going to tell you how to work with web forms.You are reading the 2024 edition of the Flask Mega-Tutorial. The complete…">
    <meta name="twitter:image" content="https://blog.miguelgrinberg.com/static/cards/the-flask-mega-tutorial-part-iii-web-forms.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@miguelgrinberg">

  </head>
  <body>
    <svg style="display: none" version="2.0">
      <defs>
        <symbol id="icon-theme-auto" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-circle-half" viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 0 8 1zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16"/>
        </symbol>
        <symbol id="icon-theme-light" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-brightness-high-fill" viewBox="0 0 16 16">
          <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </symbol>
        <symbol id="icon-theme-dark" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-moon-stars-fill" viewBox="0 0 16 16">
          <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278"/>
          <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
        </symbol>
      </defs>
    </svg>
<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="https://blog.miguelgrinberg.com/index">miguelgrinberg.com</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" aria-current="page" href="https://blog.miguelgrinberg.com/index">Home</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../my-courses-and-books.html">My Courses and Books</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../hire-me.html">Consulting</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../about-me.html">About Me</a></li>
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <svg width="20" height="20" version="2.0"><use id="current-theme" href="#icon-theme-light"></svg>
          </a>
          <ul class="dropdown-menu">
            <li>
              <a id="select-theme-light" class="dropdown-item" href="javascript:updateTheme('light')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-light"></svg>&nbsp; Light Mode
              </a>
            </li>
            <li>
              <a id="select-theme-dark" class="dropdown-item" href="javascript:updateTheme('dark')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-dark"></svg>&nbsp; Dark Mode
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a id="select-theme-auto" class="dropdown-item" href="javascript:updateTheme('auto')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-auto"></svg>&nbsp; System Default
              </a>
            </li>
          </ul>
        </li>
        
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item social-icons">
          <a type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed"><img src="../../../static/social/rss.png" alt="RSS Feed" title="RSS Feed" /></a>
          <a href="https://twitter.com/miguelgrinberg"><img src="../../../static/social/twitter.png" alt="Twitter" title="Twitter" /></a>
          <a rel="me" href="https://mstdn.social/@miguelgrinberg"><img src="../../../static/social/mastodon.png" alt="Mastodon" title="Mastodon" /></a>
          <a href="http://github.com/miguelgrinberg"><img src="../../../static/social/github.png" alt="GitHub" title="GitHub" /></a>
          <a href="https://youtube.com/miguelgrinberg"><img src="../../../static/social/youtube.png" alt="YouTube" title="YouTube" /></a>
          <a href="http://www.linkedin.com/in/miguelgrinberg"><img src="../../../static/social/linkedin.png" alt="LinkedIn" title="LinkedIn" /></a>
          <a href="https://patreon.com/miguelgrinberg"><img src="../../../static/social/patreon.png" alt="Patreon" title="Patreon" /></a>
          <!--<a href="https://www.facebook.com/miguelgrinbergblog"><img src="/static/social/facebook.png" alt="Facebook" title="Facebook" /></a>-->
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
  <div class="row">
    <div class="col-md-8">
      <div id="main">
        
        
        
        
        

<div class="post">

<div class="post-header">
  <h1><a href="../../the-flask-mega-tutorial-part-iii-web-forms.html">The Flask Mega-Tutorial, Part III: Web Forms</a></h1>
  <h2>
    Posted by
    <form action="https://blog.miguelgrinberg.com/author/Miguel Grinberg" method="POST">
      <input type="submit" class="btn btn-danger btn-sm" value="Miguel Grinberg" />
    </form>
    on
    <button class="btn btn-secondary btn-sm" disabled><span class="flask-moment" data-timestamp="2023-12-03T10:40:19Z" data-function="format" data-format="LL" data-refresh="0" style="display: none">2023-12-03T10:40:19Z</span></button>
    under
    
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" />
      </form>
    
    
  </h2>
</div>
<div class="post-body"><p>This is the third installment of the Flask Mega-Tutorial series, in which I'm going to tell you how to work with <em>web forms</em>.</p>
<p>You are reading the 2024 edition of the Flask Mega-Tutorial. The complete course is also available to order in e-book and paperback formats from <a href="https://amzn.to/3ahVnPN">Amazon</a>. Thank you for your support!</p>
<p>If you are looking for the 2018 edition of this course, you can find it <a href="../../the-flask-mega-tutorial-part-i-hello-world-2018.html">here</a>.</p>
<p>For your reference, here is the complete list of articles in this series:</p>
<ul>
<li><a href="../../the-flask-mega-tutorial-part-i-hello-world.html">Chapter 1:  Hello, World!</a></li>
<li><a href="../../the-flask-mega-tutorial-part-ii-templates.html">Chapter 2:  Templates</a></li>
<li><a href="../../the-flask-mega-tutorial-part-iii-web-forms.html">Chapter 3:  Web Forms</a> (this article)</li>
<li><a href="../../the-flask-mega-tutorial-part-iv-database.html">Chapter 4:  Database</a></li>
<li><a href="../../the-flask-mega-tutorial-part-v-user-logins.html">Chapter 5:  User Logins</a></li>
<li><a href="../../the-flask-mega-tutorial-part-vi-profile-page-and-avatars.html">Chapter 6:  Profile Page and Avatars</a></li>
<li><a href="../../the-flask-mega-tutorial-part-vii-error-handling.html">Chapter 7:  Error Handling</a></li>
<li><a href="../../the-flask-mega-tutorial-part-viii-followers.html">Chapter 8:  Followers</a></li>
<li><a href="../../the-flask-mega-tutorial-part-ix-pagination.html">Chapter 9:  Pagination</a></li>
<li><a href="../../the-flask-mega-tutorial-part-x-email-support.html">Chapter 10:  Email Support</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xi-facelift.html">Chapter 11:  Facelift</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xii-dates-and-times.html">Chapter 12:  Dates and Times</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xiii-i18n-and-l10n.html">Chapter 13:  I18n and L10n</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xiv-ajax.html">Chapter 14:  Ajax</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xv-a-better-application-structure.html">Chapter 15:  A Better Application Structure</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xvi-full-text-search.html">Chapter 16:  Full-Text Search</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xvii-deployment-on-linux.html">Chapter 17:  Deployment on Linux</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xviii-deployment-on-heroku.html">Chapter 18:  Deployment on Heroku</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xix-deployment-on-docker-containers.html">Chapter 19:  Deployment on Docker Containers</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xx-some-javascript-magic.html">Chapter 20:  Some JavaScript Magic</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xxi-user-notifications.html">Chapter 21:  User Notifications</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xxii-background-jobs.html">Chapter 22:  Background Jobs</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xxiii-application-programming-interfaces-apis.html">Chapter 23:  Application Programming Interfaces (APIs)</a></li>
</ul>
<p>In <a href="../../the-flask-mega-tutorial-part-ii-templates.html">Chapter 2</a> I created a simple template for the home page of the application, and used fake objects as placeholders for things I don't have yet, like users and blog posts. In this chapter I'm going to address one of the many holes I still have in this application, specifically how to accept input from users through web forms.</p>
<p>Web forms are one of the most basic building blocks in any web application. I will be using forms to allow users to submit blog posts, and also for logging in to the application.</p>
<p>Before you proceed with this chapter, make sure you have the <em>microblog</em> application as I left it in the previous chapter installed, and that you can run it without any errors.</p>
<p><em>The GitHub links for this chapter are: <a href="https://github.com/miguelgrinberg/microblog/tree/v0.3">Browse</a>, <a href="../../../../codeload.github.com/miguelgrinberg/microblog/zip/refs/tags/microblog-0.3.zip">Zip</a>, <a href="../../../../github.com/miguelgrinberg/microblog/compare/v0.2...v0.html">Diff</a>.</em></p>
<h2>Introduction to Flask-WTF</h2>
<p>To handle the web forms in this application I'm going to use the <a href="http://packages.python.org/Flask-WTF">Flask-WTF</a> extension, which is a thin wrapper around the <a href="https://wtforms.readthedocs.io/">WTForms</a> package that nicely integrates it with Flask. This is the first Flask extension that I'm presenting to you, but it is not going to be the last. Extensions are a very important part of the Flask ecosystem, as they provide solutions to problems that Flask is intentionally not opinionated about.</p>
<p>Flask extensions are regular Python packages that are installed with <code>pip</code>. You can go ahead and install Flask-WTF in your virtual environment:</p>
<pre><code>(venv) $ pip install flask-wtf
</code></pre>
<p>So far the application is very simple, and for that reason I did not need to worry about its <em>configuration</em>. But for any applications except the simplest ones, you are going to find that Flask (and possibly also the Flask extensions that you use) offer some amount of freedom in how to do things, and you need to make some decisions, which you pass to the framework as a list of configuration variables.</p>
<p>There are several formats for the application to specify configuration options. The most basic solution is to define your variables as keys in <code>app.config</code>, which uses a dictionary style to work with variables. For example, you could do something like this:</p>
<pre><code class="language-python">app = Flask(__name__)
app.config['SECRET_KEY'] = 'you-will-never-guess'
# ... add more variables here as needed
</code></pre>
<p>While the above syntax is sufficient to create configuration options for Flask, I like to enforce the principle of <em>separation of concerns</em>, so instead of putting my configuration in the same place where I create my application I will use a slightly more elaborate structure that allows me to keep my configuration in a separate file.</p>
<p>A solution that I really like because it is very extensible, is to use a Python class to store configuration variables. To keep things nicely organized, I'm going to create the configuration class in a separate Python module. Below you can see the new configuration class for this application, stored in a <em>config.py</em> module in the top-level directory.</p>
<p class="code_title"><em>config.py</em>: Secret key configuration</p>

<pre><code class="language-python">import os

class Config:
    SECRET_KEY = os.environ.get('SECRET_KEY') or 'you-will-never-guess'
</code></pre>
<p>Pretty simple, right? The configuration settings are defined as class variables inside the <code>Config</code> class. As the application needs more configuration items, they can be added to this class, and later if I find that I need to have more than one configuration set, I can create subclasses of it. But don't worry about this just yet.</p>
<p>The <code>SECRET_KEY</code> configuration variable that I added as the only configuration item is an important part in most Flask applications. Flask and some of its extensions use the value of the secret key as a cryptographic key, useful to generate signatures or tokens. The Flask-WTF extension uses it to protect web forms against a nasty attack called <a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery">Cross-Site Request Forgery</a> or CSRF (pronounced "seasurf"). As its name implies, the secret key is supposed to be secret, as the strength of the tokens and signatures generated with it depends on no person outside the trusted maintainers of the application knowing it.</p>
<p>The value of the secret key is set as an expression with two terms, joined by the <code>or</code> operator. The first term looks for the value of an environment variable, also called <code>SECRET_KEY</code>. The second term, is just a hardcoded string. This is a pattern that you will see me repeat often for configuration variables. The idea is that a value sourced from an environment variable is preferred, but if the environment does not define the variable, then the hardcoded string is used instead as a default. When you are developing this application, the security requirements are low, so you can just ignore this setting and let the hardcoded string be used. But when this application is deployed on a production server, I will be setting a unique and difficult to guess value in the environment, so that the server has a secure key that nobody else knows.</p>
<p>Now that I have a config file, I need to tell Flask to read it and apply it. That can be done right after the Flask application instance is created using the <code>app.config.from_object()</code> method:</p>
<p class="code_title"><em>app/__init__.py</em>: Flask configuration</p>

<pre><code class="language-python">from flask import Flask
from config import Config

app = Flask(__name__)
app.config.from_object(Config)

from app import routes
</code></pre>
<p>The way I'm importing the <code>Config</code> class may seem confusing at first, but if you look at how the <code>Flask</code> class (uppercase "F") is imported from the <code>flask</code> package (lowercase "f") you'll notice that I'm doing the same with the configuration. The lowercase "config" is the name of the Python module <em>config.py</em>, and obviously the one with the uppercase "C" is the actual class.</p>
<p>As I mentioned above, the configuration items can be accessed with a dictionary syntax from <code>app.config</code>. Here you can see a quick session with the Python interpreter where I check what is the value of the secret key:</p>
<pre><code class="language-python">&gt;&gt;&gt; from microblog import app
&gt;&gt;&gt; app.config['SECRET_KEY']
'you-will-never-guess'
</code></pre>
<h2>User Login Form</h2>
<p>The Flask-WTF extension uses Python classes to represent web forms. A form class simply defines the fields of the form as class variables.</p>
<p>Once again having separation of concerns in mind, I'm going to use a new <em>app/forms.py</em> module to store my web form classes. To begin, let's define a user login form, which asks the user to enter a username and a password. The form will also include a "remember me" check box, and a submit button:</p>
<p class="code_title"><em>app/forms.py</em>: Login form</p>

<pre><code class="language-python">from flask_wtf import FlaskForm
from wtforms import StringField, PasswordField, BooleanField, SubmitField
from wtforms.validators import DataRequired

class LoginForm(FlaskForm):
    username = StringField('Username', validators=[DataRequired()])
    password = PasswordField('Password', validators=[DataRequired()])
    remember_me = BooleanField('Remember Me')
    submit = SubmitField('Sign In')
</code></pre>
<p>Most Flask extensions use a <code>flask_&lt;name&gt;</code> naming convention for their top-level import symbol. In this case, Flask-WTF has all its symbols under <code>flask_wtf</code>. This is where the <code>FlaskForm</code> base class is imported from at the top of <em>app/forms.py</em>.</p>
<p>The four classes that represent the field types that I'm using for this form are imported directly from the WTForms package, since the Flask-WTF extension does not provide customized versions. For each field, an object is created as a class variable in the <code>LoginForm</code> class. Each field is given a description or label as a first argument.</p>
<p>The optional <code>validators</code> argument that you see in some of the fields is used to attach validation behaviors to fields. The <code>DataRequired</code> validator simply checks that the field is not submitted empty. There are many more validators available, some of which will be used in other forms.</p>
<h2>Form Templates</h2>
<p>The next step is to add the form to an HTML template so that it can be rendered on a web page. The good news is that the fields that are defined in the <code>LoginForm</code> class know how to render themselves as HTML, so this task is fairly simple. Below you can see the login template, which I'm going to store in file <em>app/templates/login.html</em>:</p>
<p class="code_title"><em>app/templates/login.html</em>: Login form template</p>

<pre><code class="language-html">{% extends &quot;base.html&quot; %}

{% block content %}
    &lt;h1&gt;Sign In&lt;/h1&gt;
    &lt;form action=&quot;&quot; method=&quot;post&quot; novalidate&gt;
        {{ form.hidden_tag() }}
        &lt;p&gt;
            {{ form.username.label }}&lt;br&gt;
            {{ form.username(size=32) }}
        &lt;/p&gt;
        &lt;p&gt;
            {{ form.password.label }}&lt;br&gt;
            {{ form.password(size=32) }}
        &lt;/p&gt;
        &lt;p&gt;{{ form.remember_me() }} {{ form.remember_me.label }}&lt;/p&gt;
        &lt;p&gt;{{ form.submit() }}&lt;/p&gt;
    &lt;/form&gt;
{% endblock %}
</code></pre>
<p>For this template I'm reusing the <code>base.html</code> template as shown in <a href="../../the-flask-mega-tutorial-part-ii-templates.html">Chapter 2</a>, through the <code>extends</code> template inheritance statement. I will actually do this with all the templates, to ensure a consistent layout that includes a top navigation bar across all the pages of the application.</p>
<p>This template expects a form object instantiated from the <code>LoginForm</code> class to be given as an argument, which you can see referenced as <code>form</code>. This argument will be sent by the login view function, which I still haven't written.</p>
<p>The HTML <code>&lt;form&gt;</code> element is used as a container for the web form. The <code>action</code> attribute of the form is used to tell the browser the URL that should be used when submitting the information the user entered in the form. When the action is set to an empty string the form is submitted to the URL that is currently in the address bar, which is the URL that rendered the form on the page. The <code>method</code> attribute specifies the HTTP request method that should be used when submitting the form to the server. The default is to send it with a <code>GET</code> request, but in almost all cases, using a <code>POST</code> request makes for a better user experience because requests of this type can submit the form data in the body of the request, while <code>GET</code> requests add the form fields to the URL, cluttering the browser address bar. The <code>novalidate</code> attribute is used to tell the web browser to not apply validation to the fields in this form, which effectively leaves this task to the Flask application running in the server. Using <code>novalidate</code> is entirely optional, but for this first form it is important that you set it because this will allow you to test server-side validation later in this chapter.</p>
<p>The <code>form.hidden_tag()</code> template argument generates a hidden field that includes a token that is used to protect the form against CSRF attacks. All you need to do to have the form protected is include this hidden field and have the <code>SECRET_KEY</code> variable defined in the Flask configuration. If you take care of these two things, Flask-WTF does the rest for you.</p>
<p>If you've written HTML web forms in the past, you may have found it odd that there are no HTML fields in this template. This is because the fields from the form object know how to render themselves as HTML. All I needed to do was to include <code>{{ form.&lt;field_name&gt;.label }}</code> where I wanted the field label, and <code>{{ form.&lt;field_name&gt;() }}</code> where I wanted the field. For fields that require additional HTML attributes, those can be passed as arguments. The username and password fields in this template take the <code>size</code> as an argument that will be added to the <code>&lt;input&gt;</code> HTML element as an attribute. This is how you can also attach CSS classes or IDs to form fields.</p>
<h2>Form Views</h2>
<p>The final step before you can see this form in the browser is to code a new view function in the application that renders the template from the previous section.</p>
<p>So let's write a new view function mapped to the <em>/login</em> URL that creates a form, and passes it to the template for rendering. This view function can also go in the <em>app/routes.py</em> module with the previous one:</p>
<p class="code_title"><em>app/routes.py</em>: Login view function</p>

<pre><code class="language-python">from flask import render_template
from app import app
from app.forms import LoginForm

# ...

@app.route('/login')
def login():
    form = LoginForm()
    return render_template('login.html', title='Sign In', form=form)
</code></pre>
<p>What I did here is import the <code>LoginForm</code> class from <em>forms.py</em>, instantiate an object from it, and send it down to the template. The <code>form=form</code> syntax may look odd, but is simply passing the <code>form</code> object created in the line above (and shown on the right side) to the template with the name <code>form</code> (shown on the left). This is all that is required to get form fields rendered.</p>
<p>To make it easy to access the login form, the base template can expand the <code>&lt;div&gt;</code> element in <em>base.html</em> to include a link to it in the navigation bar:</p>
<p class="code_title"><em>app/templates/base.html</em>: Login link in navigation bar</p>

<pre><code class="language-html">&lt;div&gt;
    Microblog:
    &lt;a href=&quot;/index&quot;&gt;Home&lt;/a&gt;
    &lt;a href=&quot;/login&quot;&gt;Login&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>At this point you can run the application and see the form in your web browser. With the application running, type <code>http://localhost:5000/</code> in the browser's address bar, and then click on the "Login" link in the top navigation bar to see the new login form. Pretty cool, right?</p>
<p><img alt="Login Form" src="../../../static/images/mega-tutorial/ch03-login-form.png" /></p>
<h2>Receiving Form Data</h2>
<p>If you try to press the submit button the browser is going to display a "Method Not Allowed" error. This is because the login view function from the previous section does one half of the job so far. It can display the form on a web page, but it has no logic to process data submitted by the user yet. This is another area where Flask-WTF makes the job really easy. Here is an updated version of the view function that accepts and validates the data submitted by the user:</p>
<p class="code_title"><em>app/routes.py</em>: Receiving login credentials</p>

<pre><code class="language-python">from flask import render_template, flash, redirect

@app.route('/login', methods=['GET', 'POST'])
def login():
    form = LoginForm()
    if form.validate_on_submit():
        flash('Login requested for user {}, remember_me={}'.format(
            form.username.data, form.remember_me.data))
        return redirect('/index')
    return render_template('login.html', title='Sign In', form=form)
</code></pre>
<p>The first new thing in this version is the <code>methods</code> argument in the route decorator. This tells Flask that this view function accepts <code>GET</code> and <code>POST</code> requests, overriding the default, which is to accept only <code>GET</code> requests. The HTTP protocol states that <code>GET</code> requests are those that return information to the client (the web browser in this case). All the requests in the application so far are of this type. <code>POST</code> requests are typically used when the browser submits form data to the server (in reality <code>GET</code> requests can also be used for this purpose, but it is not a recommended practice). The "Method Not Allowed" error that the browser showed you before, appears because the browser tried to send a <code>POST</code> request and the application was not configured to accept it. By providing the <code>methods</code> argument, you are telling Flask which request methods should be accepted.</p>
<p>The <code>form.validate_on_submit()</code> method does all the form processing work. When the browser sends the <code>GET</code> request to receive the web page with the form, this method is going to return <code>False</code>, so in that case the function skips the if statement and goes directly to render the template in the last line of the function.</p>
<p>When the browser sends the <code>POST</code> request as a result of the user pressing the submit button, <code>form.validate_on_submit()</code> is going to gather all the data, run all the validators attached to fields, and if everything is all right it will return <code>True</code>, indicating that the data is valid and can be processed by the application. But if at least one field fails validation, then the function will return <code>False</code>, and that will cause the form to be rendered back to the user, like in the <code>GET</code> request case. Later I'm going to add an error message when validation fails.</p>
<p>When <code>form.validate_on_submit()</code> returns <code>True</code>, the login view function calls two new functions, imported from Flask. The <code>flash()</code> function is a useful way to show a message to the user. A lot of applications use this technique to let the user know if some action has been successful or not. In this case, I'm going to use this mechanism as a temporary solution, because I don't have all the infrastructure necessary to log users in for real yet. The best I can do for now is show a message that confirms that the application received the credentials.</p>
<p>The second new function used in the login view function is <code>redirect()</code>. This function instructs the client web browser to automatically navigate to a different page, given as an argument. This view function uses it to redirect the user to the index page of the application.</p>
<p>When you call the <code>flash()</code> function, Flask stores the message, but flashed messages will not magically appear in web pages. The templates of the application need to render these flashed messages in a way that works for the site layout. I'm going to add these messages to the base template, so that all the templates inherit this functionality. This is the updated base template:</p>
<p class="code_title"><em>app/templates/base.html</em>: Flashed messages in base template</p>

<pre><code class="language-html">&lt;html&gt;
    &lt;head&gt;
        {% if title %}
        &lt;title&gt;{{ title }} - microblog&lt;/title&gt;
        {% else %}
        &lt;title&gt;microblog&lt;/title&gt;
        {% endif %}
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div&gt;
            Microblog:
            &lt;a href=&quot;/index&quot;&gt;Home&lt;/a&gt;
            &lt;a href=&quot;/login&quot;&gt;Login&lt;/a&gt;
        &lt;/div&gt;
        &lt;hr&gt;
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        &lt;ul&gt;
            {% for message in messages %}
            &lt;li&gt;{{ message }}&lt;/li&gt;
            {% endfor %}
        &lt;/ul&gt;
        {% endif %}
        {% endwith %}
        {% block content %}{% endblock %}
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Here I'm using a <code>with</code> construct to assign the result of calling <code>get_flashed_messages()</code> to a <code>messages</code> variable, all in the context of the template. The <code>get_flashed_messages()</code> function comes from Flask, and returns a list of all the messages that have been registered with <code>flash()</code> previously. The conditional that follows checks if <code>messages</code> has some content, and in that case, a <code>&lt;ul&gt;</code> element is rendered with each message as a <code>&lt;li&gt;</code> list item. This style of rendering does not look great for status messages, but the topic of styling the web application will come later.</p>
<p>An interesting property of these flashed messages is that once they are requested once through the <code>get_flashed_messages</code> function they are removed from the message list, so they appear only once after the <code>flash()</code> function is called.</p>
<p>This is a great time to try the application one more time and test how the form works. Make sure you try submitting the form with the username or password fields empty, to see how the <code>DataRequired</code> validator halts the submission process.</p>
<h2>Improving Field Validation</h2>
<p>The validators that are attached to form fields prevent invalid data from being accepted into the application. The way the application deals with invalid form input is by re-displaying the form, to let the user make the necessary corrections.</p>
<p>If you tried to submit invalid data, I'm sure you noticed that while the validation mechanisms work well, there is no indication given to the user that something is wrong with the form, the user simply gets the form back. The next task is to improve the user experience by adding a meaningful error message next to each field that failed validation.</p>
<p>In fact, the form validators generate these descriptive error messages already, so all that is missing is some additional logic in the template to render them.</p>
<p>Here is the login template with added field validation messages in the username and password fields:</p>
<p class="code_title"><em>app/templates/login.html</em>: Validation errors in login form template</p>

<pre><code class="language-html">{% extends &quot;base.html&quot; %}

{% block content %}
    &lt;h1&gt;Sign In&lt;/h1&gt;
    &lt;form action=&quot;&quot; method=&quot;post&quot; novalidate&gt;
        {{ form.hidden_tag() }}
        &lt;p&gt;
            {{ form.username.label }}&lt;br&gt;
            {{ form.username(size=32) }}&lt;br&gt;
            {% for error in form.username.errors %}
            &lt;span style=&quot;color: red;&quot;&gt;[{{ error }}]&lt;/span&gt;
            {% endfor %}
        &lt;/p&gt;
        &lt;p&gt;
            {{ form.password.label }}&lt;br&gt;
            {{ form.password(size=32) }}&lt;br&gt;
            {% for error in form.password.errors %}
            &lt;span style=&quot;color: red;&quot;&gt;[{{ error }}]&lt;/span&gt;
            {% endfor %}
        &lt;/p&gt;
        &lt;p&gt;{{ form.remember_me() }} {{ form.remember_me.label }}&lt;/p&gt;
        &lt;p&gt;{{ form.submit() }}&lt;/p&gt;
    &lt;/form&gt;
{% endblock %}
</code></pre>
<p>The only change I've made is to add for loops right after the username and password fields that render the error messages added by the validators in red color. As a general rule, any fields that have validators attached will have any error messages that result from validation added under <code>form.&lt;field_name&gt;.errors</code>. This is going to be a list, because fields can have multiple validators attached and more than one may be providing error messages to display to the user.</p>
<p>If you try to submit the form with an empty username or password, you will now get a nice error message in red.</p>
<p><img alt="Form validation" src="../../../static/images/mega-tutorial/ch03-validation.png" /></p>
<h2>Generating Links</h2>
<p>The login form is fairly complete now, but before closing this chapter I want to discuss the proper way to include links in templates and redirects. So far you have seen a few instances in which links are defined. For example, this is the current navigation bar in the base template:</p>
<pre><code class="language-html">    &lt;div&gt;
        Microblog:
        &lt;a href=&quot;/index&quot;&gt;Home&lt;/a&gt;
        &lt;a href=&quot;/login&quot;&gt;Login&lt;/a&gt;
    &lt;/div&gt;
</code></pre>
<p>The login view function also defines a link that is passed to the <code>redirect()</code> function:</p>
<pre><code class="language-python">@app.route('/login', methods=['GET', 'POST'])
def login():
    form = LoginForm()
    if form.validate_on_submit():
        # ...
        return redirect('/index')
    # ...
</code></pre>
<p>One problem with writing links directly in templates and source files is that if one day you decide to reorganize your links, then you are going to have to search and replace these links in your entire application.</p>
<p>To have better control over these links, Flask provides a function called <code>url_for()</code>, which generates URLs using its internal mapping of URLs to view functions. For example, the expression <code>url_for('login')</code> returns <code>/login</code>, and <code>url_for('index')</code> return <code>'/index</code>. The argument to <code>url_for()</code> is the <em>endpoint</em> name, which is the name of the view function.</p>
<p>You may ask why is it better to use the function names instead of URLs. The fact is that URLs are much more likely to change than view function names, which are completely internal. A secondary reason is that as you will learn later, some URLs have dynamic components in them, so generating those URLs by hand would require concatenating multiple elements, which is tedious and error-prone. The <code>url_for()</code> function is also able to generate these complex URLs with a much more elegant syntax.</p>
<p>So from now on, I'm going to use <code>url_for()</code> every time I need to generate an application URL. The navigation bar in the base template then becomes:</p>
<p class="code_title"><em>app/templates/base.html</em>: Use url_for() function for links</p>

<pre><code class="language-html">        &lt;div&gt;
            Microblog:
            &lt;a href=&quot;{{ url_for('index') }}&quot;&gt;Home&lt;/a&gt;
            &lt;a href=&quot;{{ url_for('login') }}&quot;&gt;Login&lt;/a&gt;
        &lt;/div&gt;
</code></pre>
<p>And here is the updated <code>login()</code> view function:</p>
<p class="code_title"><em>app/routes.py</em>: Use url_for() function for links</p>

<pre><code class="language-python">from flask import render_template, flash, redirect, url_for

# ...

@app.route('/login', methods=['GET', 'POST'])
def login():
    form = LoginForm()
    if form.validate_on_submit():
        # ...
        return redirect(url_for('index'))
    # ...
</code></pre>
<p>Continue on to the <a href="../../the-flask-mega-tutorial-part-iv-database.html">next chapter</a>.</p></div>

<div class="card patreon-bar">
  <div class="card-body">
    <h5>Become a Patron!</h5>
    <p class="card-text">Hello, and thank you for visiting my blog! If you enjoyed this article, please consider supporting my work on this blog on <a href="https://patreon.com/miguelgrinberg">Patreon</a>!</p>
    <a href="https://patreon.com/miguelgrinberg" alt="Become a Patron!" title="Become a Patron!"><img src="../../../static/patreon-button.png"></a>
  </div>
</div>


<div class="card social-bar">
  <div class="card-body">
    <h5>Share this post:</h5>
      <!-- Sharingbutton Hacker News -->
      <a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms&amp;t=The%20Flask%20Mega-Tutorial%2C%20Part%20III%3A%20Web%20Forms" target="_blank" rel="noopener" aria-label="Hacker News">
        <div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 140"><path fill-rule="evenodd" d="M60.94 82.314L17 0h20.08l25.85 52.093c.397.927.86 1.888 1.39 2.883.53.994.995 2.02 1.393 3.08.265.4.463.764.596 1.095.13.334.262.63.395.898.662 1.325 1.26 2.618 1.79 3.877.53 1.26.993 2.42 1.39 3.48 1.06-2.254 2.22-4.673 3.48-7.258 1.26-2.585 2.552-5.27 3.877-8.052L103.49 0h18.69L77.84 83.308v53.087h-16.9v-54.08z"></path></svg></div>Hacker News</div>
      </a>

      <!-- Sharingbutton Reddit -->
      <a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms&amp;resubmit=true&amp;title=The%20Flask%20Mega-Tutorial,%20Part%20III:%20Web%20Forms" target="_blank" rel="noopener" aria-label="Reddit">
        <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96 0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65 0 3-1.35 3-3s-1.35-3-3-3c-1.38 0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65 0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66 0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64 0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4 0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6 0 .23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1 0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></div>Reddit</div>
      </a>

      <!-- Sharingbutton Twitter -->
      <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=The%20Flask%20Mega-Tutorial%2C%20Part%20III%3A%20Web%20Forms&amp;url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms" target="_blank" rel="noopener" aria-label="Twitter">
        <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div>Twitter</div>
      </a>

      <!-- Sharingbutton LinkedIn -->
      <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms&amp;title=The%20Flask%20Mega-Tutorial%2C%20Part%20III%3A%20Web%20Forms&amp;summary=The%20Flask%20Mega-Tutorial%2C%20Part%20III%3A%20Web%20Forms&amp;source=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms" target="_blank" rel="noopener" aria-label="LinkedIn">
        <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg></div>LinkedIn</div>
      </a>

      <!-- Sharingbutton Facebook -->
      <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms" target="_blank" rel="noopener" aria-label="Facebook">
        <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div>Facebook</div>
      </a>

      <!-- Sharingbutton E-Mail -->
      <a class="resp-sharing-button__link" href="mailto:?subject=The%20Flask%20Mega-Tutorial%2C%20Part%20III%3A%20Web%20Forms&amp;body=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms" target="_self" rel="noopener" aria-label="E-Mail">
        <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></div>E-Mail</div>
      </a>

  </div>
</div>

<div id="comments" class="post-comment-count">
  
  <a class="btn btn-outline-secondary" href="../../the-flask-mega-tutorial-part-iii-web-forms.html#comments">38 comments</a>
  
</div>


<div class="comments">
  <ul>
    
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/0286c6a87475f8dae95c0bc9bc493893?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#1</span> <span class="badge text-bg-warning">Vladimir Kuzmenkov</span> said
    
    <span class="flask-moment" data-timestamp="2023-12-07T05:07:33Z" data-function="fromNow" data-refresh="0" style="display: none">2023-12-07T05:07:33Z</span>
  </p>
  <div>
    <p>Thank you for another valuable chapter.</p>
<p>Flask official documentation gives slightly different way of generating secret key and defining it <a href="https://flask.palletsprojects.com/en/3.0.x/quickstart/#sessions" rel="nofollow">https://flask.palletsprojects.com/en/3.0.x/quickstart/#sessions</a><br>
import secrets<br>
key = secrets.token_hex()<br>
Flask.secret_key=key<br>
For example os.environ.get('SECRET_KEY') as in the article returns None for me. Which is the best way to stick to?</p>
<p>Another question: when we use url_for('index') in our login() view function, would it use name 'index' to refer to the view function named index() then?<br>
Otherwise what's the difference to put /index or url_for('index') - looks like none? Because if it changes - we need to change this url manually everywhere anyway...</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#2</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2023-12-07T18:16:39Z" data-function="fromNow" data-refresh="0" style="display: none">2023-12-07T18:16:39Z</span>
  </p>
  <div>
    <p>@Vladimir: they are suggesting that you generate the key and then paste it in the code, which is a really bad idea, since then your code will be committed to a git repository and the key will go with it. You can generate the key using any method that you like, but I strongly recommend that you put it in an environment variable, not in the code.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/0286c6a87475f8dae95c0bc9bc493893?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#3</span> <span class="badge text-bg-warning">Vladimir Kuzmenkov</span> said
    
    <span class="flask-moment" data-timestamp="2023-12-08T00:52:25Z" data-function="fromNow" data-refresh="0" style="display: none">2023-12-08T00:52:25Z</span>
  </p>
  <div>
    <p>Thanks! That bit was totally unclear before and not explained in the chapter.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/7dee44c3dd747133ab51cc0a9218b48a?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#4</span> <span class="badge text-bg-warning">Simon</span> said
    
    <span class="flask-moment" data-timestamp="2023-12-15T18:08:21Z" data-function="fromNow" data-refresh="0" style="display: none">2023-12-15T18:08:21Z</span>
  </p>
  <div>
    <p>I have a question regarding how the login view handles post requests:<br>
when the client sends a post request sending along form data, the validate_on_submit() methods checks whether the data entered is valid. That makes sense to me, but what about the line right above where a clean new instance of a form is instantiated? When the view function is invoked: why does the newly created form instance (which is blank and shouldn't successfully validate) not overwrite the form received from the client? Or does the view function, when invoked first create the new blank instance, and then overwrite it with the received form data from the client?</p>
<p>I am really happy to have found your Flask tutorial! Any hints are really appreciated!</p>
<p>Thanks.<br>
Simon</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/32934ff2b357d6a470030798054801e3?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#5</span> <span class="badge text-bg-warning">David Aldrich</span> said
    
    <span class="flask-moment" data-timestamp="2023-12-15T18:15:49Z" data-function="fromNow" data-refresh="0" style="display: none">2023-12-15T18:15:49Z</span>
  </p>
  <div>
    <p>Hi again, I am not seeing the flash message "Login requested for user" but cannot see any obvious difference between my code and yours. In VS Code, I do see an Intellisense error "Undefined name <code>flash</code>" in the login method. I also see a pylance message 'Import "flask" could not be resolved" for "from flask import ...".</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#6</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2023-12-15T19:50:14Z" data-function="fromNow" data-refresh="0" style="display: none">2023-12-15T19:50:14Z</span>
  </p>
  <div>
    <p>@David: the working code is available to download at the top of this article. Use that if you can't figure out what is the mistake. The errors that VSCode is giving you are probably caused by a misconfiguration of VSCode. Your IDE must use the same virtual environment as your application to be able to know what packages are installed.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#7</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2023-12-15T19:52:15Z" data-function="fromNow" data-refresh="0" style="display: none">2023-12-15T19:52:15Z</span>
  </p>
  <div>
    <p>@Simon: the form object is not a clean and blank object. If there is form data included in the request, the form object automatically incorporates that data.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/4fe712d62133304543454eace2b31321?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#8</span> <span class="badge text-bg-warning">BFD</span> said
    
    <span class="flask-moment" data-timestamp="2023-12-18T15:05:55Z" data-function="fromNow" data-refresh="0" style="display: none">2023-12-18T15:05:55Z</span>
  </p>
  <div>
    <p>Miguel, my compliments on the tutorial. Really helpful.</p>
<p>Two issues:<br>
1. naming conventions: If this is your 10th web app, I'm sure <code>from app import app</code> and <code>form=form</code>, <code>user=user</code> is intuitive. But I'm trying to figure out what's pulling from where &amp; assigning to what, and this is confusing. If it were <code>from appDir import myApp</code> or <code>from appModule import myApp</code> or something, that would make the flows much clearer without me having to tinker w/ renaming. Perhaps I'm just slow, but I think this would really help the novice.</p>
<ol>
<li>When I execute <code>flask run</code>, I'm not able to see changes reflected without quitting the server, then re-executing <code>flask run</code>. However, if I run in debug mode via:<br>
<code>flask run --debug</code><br>
My changes are reflected upon browser re-fresh.</li>
</ol>
<p>This took me a bit to figure out. Maybe it'll be helpful for others.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#9</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2023-12-18T16:41:53Z" data-function="fromNow" data-refresh="0" style="display: none">2023-12-18T16:41:53Z</span>
  </p>
  <div>
    <p>@BFD: I think it is important that you understand how "from app import app" and "form=form" type constructs in Python work, as these are fairly common not only with Flask but with other applications. I agree that it is tricky and if you prefer to use different names you are more than welcome to, but I prefer to use patterns that you are likely to see while you do work in the Python space.</p>
<p>Debug mode is covered in this tutorial, but later.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/eb54557474c04ac7ef33fc3798aa41d8?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#10</span> <span class="badge text-bg-warning">AdlerNetz</span> said
    
    <span class="flask-moment" data-timestamp="2024-01-23T18:50:32Z" data-function="fromNow" data-refresh="0" style="display: none">2024-01-23T18:50:32Z</span>
  </p>
  <div>
    <p>Hi Miguel, first I would like to thank you for all your extensive and detailed work.</p>
<p>I'm using flask_WTF to catch exceptions (missing, expired, not matching) and make some validations on specific form fields. The issue is triggered when 2 or more users are logged in. Each user browser has it's own token in session, but randomly on any screen, when user sends a post request the "tokens do not match" exception will be raised. I've noticed that the session token is always correct for each user, but for any reason the flask g element is assigned (after POST request) with an incorrect user signed token  so obviously will raise the not matching error. It seems like I have a crossed signed token between the users.</p>
<p><strong>init</strong>.py:</p>
<pre><code>from flask_wtf.csrf import CSRFProtect
csrf = CSRFProtect()
csrf.init_app(app)
</code></pre>
<p><a href="http://errors.py/" rel="nofollow">errors.py</a></p>
<pre><code>@bp.app_errorhandler(CSRFError)
def handle_csrf_error(e):

    logger.error(f&quot;CSRF Error: {e}. Route: {request.url}&quot;)
    if request.method == 'GET':
        return redirect(request.url)
    else:
        return make_response({
            'type':'danger',
            'title':'Session Error',
            'message':'Invalid session. Reloading...',
            'url':request.url
        }, 400)
</code></pre>
<p>html:</p>
<pre><code>&lt;input id=&quot;csrf_token&quot; name=&quot;csrf_token&quot; value=&quot;{{csrf_token()}}&quot; type=&quot;hidden&quot; hidden&gt;
</code></pre>
<p>I've tried refreshing the csrf_token hidden field value on each POST request and the result was the same. Forms are sent with javascript fetch method (including X-CSRFtoken header). Sometimes there is more than one form in the same page.</p>
<p>I do not know what I'm missing here...if you need any additional information let me know. I would really appreciate any help on this.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#11</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2024-01-23T20:02:21Z" data-function="fromNow" data-refresh="0" style="display: none">2024-01-23T20:02:21Z</span>
  </p>
  <div>
    <p>@AdlerNetz: Are you 100% sure the tokens from two users are crossing? What is more likely is that the token is expiring for a user, so the server rejects it and creates a new one.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/eb54557474c04ac7ef33fc3798aa41d8?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#12</span> <span class="badge text-bg-warning">AdlerNetz</span> said
    
    <span class="flask-moment" data-timestamp="2024-01-24T17:35:55Z" data-function="fromNow" data-refresh="0" style="display: none">2024-01-24T17:35:55Z</span>
  </p>
  <div>
    <p>Miguel thanks for the fast reply! The token expiration is set in <a href="http://config.py/" rel="nofollow">config.py</a> like this: <code>WTF_CSRF_TIME_LIMIT = None</code> (only for testing purpose).</p>
<p>I could reproduce the issue with the following steps:<br>
- Open web browser and write down CSRF token in session<br>
- Send POST request a couple of times.<br>
- Close web browser.<br>
- Open web browser and write down a NEW CSRF token in session<br>
- Send POST request a couple of times until I get "CSRF tokens do not match".</p>
<p>At this point I could see that:<br>
1. When browser was closed and opened again, the session token was refreshed.<br>
2. When the error is raised the session token is always correct.<br>
3. When the error is raised the session token loaded (<a href="http://csrf.py/" rel="nofollow">csrf.py</a> line 124) from the signed received token is the one that was used before closing and opening the browser again.</p>
<p>It seems that, for any reason, the signed token this time (when the error was raised) was generated using a session token that should not exist anymore. I know this because I wrote down the session csrf token generated each time the browser was closed and opened.</p>
<p>I have been stuck for several days on this issue.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/a08d1c769e8673f4537f8e1e598aeebb?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#13</span> <span class="badge text-bg-warning">Carnival Wilson</span> said
    
    <span class="flask-moment" data-timestamp="2024-01-25T06:37:07Z" data-function="fromNow" data-refresh="0" style="display: none">2024-01-25T06:37:07Z</span>
  </p>
  <div>
    <p>Hello,</p>
<p>I think I may have a small erratum to report.</p>
<p>At the end of section "Introduction to Flask-WTF," there is a code example:</p>
<p>"""<br>
As I mentioned above, the configuration items can be accessed with a dictionary syntax from app.config. Here you can see a quick session with the Python interpreter where I check what is the value of the secret key:</p>
<pre><code>&gt;&gt;&gt; from microblog import app
&gt;&gt;&gt; app.config['SECRET_KEY']
'you-will-never-guess'
</code></pre>
<p>"""</p>
<p>Based on the current structure of the project as outlined in Chapters 1 and 2 and shown in the companion Github repository, the first line must be <code>from app import app</code> in order to execute properly.</p>
<p>P.S. Thank you for writing this tutorial for us.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#14</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2024-01-25T14:18:28Z" data-function="fromNow" data-refresh="0" style="display: none">2024-01-25T14:18:28Z</span>
  </p>
  <div>
    <p>@Carnival: You may need to go back to Chapter 1 to review how to set up your Flask application properly. The code in this article is correct. You may be missing the <code><a href="http://microblog.py/" rel="nofollow">microblog.py</a></code> file (or maybe the <code>FLASK_APP</code> environment variable) if the code does not work for you. Chapter 1 is where you'll find the answers.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#15</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2024-01-25T18:59:15Z" data-function="fromNow" data-refresh="0" style="display: none">2024-01-25T18:59:15Z</span>
  </p>
  <div>
    <p>@AdlerNetz: you should take this up with the Flask-WTF project. If you think there is a bug on their side, create a small demo project and share it with them.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/1842f65c79bb809a79d9fec74c18b838?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#16</span> <span class="badge text-bg-warning">Amine</span> said
    
    <span class="flask-moment" data-timestamp="2024-02-04T18:06:28Z" data-function="fromNow" data-refresh="0" style="display: none">2024-02-04T18:06:28Z</span>
  </p>
  <div>
    <p>Thank you for this great tutorial.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/455a7f2e3e771d2cd0985af2a2e31040?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#17</span> <span class="badge text-bg-warning">carter</span> said
    
    <span class="flask-moment" data-timestamp="2024-02-10T07:38:27Z" data-function="fromNow" data-refresh="0" style="display: none">2024-02-10T07:38:27Z</span>
  </p>
  <div>
    <p>hello <br>
i would like some help on the form error.<br>
when i add the for loop in the register  template to check for errors if i omit any input i don't get the errors on only get the data required pop up.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#18</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2024-02-10T10:48:08Z" data-function="fromNow" data-refresh="0" style="display: none">2024-02-10T10:48:08Z</span>
  </p>
  <div>
    <p>@carter: did you add <code>novalidate</code> to your form as shown in this article?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/af15dc598e1f4261aec96d1735375bc9?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#19</span> <span class="badge text-bg-warning">Sig Wawdo</span> said
    
    <span class="flask-moment" data-timestamp="2024-02-27T05:51:11Z" data-function="fromNow" data-refresh="0" style="display: none">2024-02-27T05:51:11Z</span>
  </p>
  <div>
    <p>Hey Miguel. Thank you for the great tutorial. I am new to Python and web development and I am receiving the error below when I try to run the application after the "Form Templates" section. I've rechecked my code multiple times. Any idea how I can fix this? Thanks!</p>
<p>.......Flask/microblog/app/<strong>init</strong>.py", line 2, in &lt;module&gt;<br>
    from config import Config<br>
ImportError: cannot import name 'Config' from 'config' ...........Flask/microblog/<a href="http://config.py/" rel="nofollow">config.py</a>)</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#20</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2024-02-27T22:04:06Z" data-function="fromNow" data-refresh="0" style="display: none">2024-02-27T22:04:06Z</span>
  </p>
  <div>
    <p>@Sig: you put the <a href="http://config.py/" rel="nofollow">config.py</a> in the wrong directory likely. Check my code on GitHub and compare against yours.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/e7420acf1940a8cf1179e49d0b2a0d9e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#21</span> <span class="badge text-bg-warning">Jorge</span> said
    
    <span class="flask-moment" data-timestamp="2024-06-06T23:44:48Z" data-function="fromNow" data-refresh="0" style="display: none">2024-06-06T23:44:48Z</span>
  </p>
  <div>
    <p>Usted es un bestia explicando gracias por tan buen material</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/62732dd147630dcad40fd10e6e434495?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#22</span> <span class="badge text-bg-warning">Harry</span> said
    
    <span class="flask-moment" data-timestamp="2024-07-25T21:28:45Z" data-function="fromNow" data-refresh="0" style="display: none">2024-07-25T21:28:45Z</span>
  </p>
  <div>
    <p>When I click on submit I get a 404 error, file not found and the link is to index, there is an index.html file located in the app/templates folder.</p>
<p>Any thoughts on how I could screw something up this simple?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#23</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2024-07-25T22:43:23Z" data-function="fromNow" data-refresh="0" style="display: none">2024-07-25T22:43:23Z</span>
  </p>
  <div>
    <p>@Harry: download the working code and compare your files against those in the download to find the error. The download link is in the introduction section of the chapter.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/3ccc422f74615c0b83b958784ca5a839?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#24</span> <span class="badge text-bg-warning">Aniket Gawade</span> said
    
    <span class="flask-moment" data-timestamp="2024-08-05T12:18:34Z" data-function="fromNow" data-refresh="0" style="display: none">2024-08-05T12:18:34Z</span>
  </p>
  <div>
    <p>Hey Miguel. Thank you for the great tutorial. I am new to Python, but have done web development in php for more than 10yrs. i found your tutorials very useful. in this chapter im getting below error.</p>
<p>Traceback (most recent call last):<br>
  File "C:\wamp64\www\microblog\venv\Lib\site-packages\flask\<a href="http://cli.py/" rel="nofollow">cli.py</a>", line 245, in locate_app<br>
<strong>import</strong>(module_name)<br>
  File "C:\wamp64\www\microblog\<a href="http://microblog.py/" rel="nofollow">microblog.py</a>", line 1, in &lt;module&gt;<br>
    from app import app<br>
  File "C:\wamp64\www\microblog\<a href="http://app__init__.py/" rel="nofollow">app__init__.py</a>", line 2, in &lt;module&gt;<br>
    from config import Config<br>
ModuleNotFoundError: No module named 'config'</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#25</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2024-08-05T13:47:04Z" data-function="fromNow" data-refresh="0" style="display: none">2024-08-05T13:47:04Z</span>
  </p>
  <div>
    <p>@Aniket: you probably put the <a href="http://config.py/" rel="nofollow">config.py</a> module in the wrong directory. See the code on GitHub to learn what the correct file structure for this project is.</p>
  </div>
</div>
    </li>
    
  </ul>
</div>

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item disabled"><a class="page-link" href="1.html#comments">&laquo;&laquo;</a></li>
    <li class="page-item disabled"><a class="page-link" href="0.html#comments">&laquo;</a></li>
    <li class="page-item"><a class="page-link" href="2.html#comments">&raquo;</a></li>
    <li class="page-item"><a class="page-link" href="0.html#comments">&raquo;&raquo;</a></li>
  </ul>
</nav>



<div id="comment-form">
  <h3>Leave a Comment</h3>

  
  
  

  
<form action="#comment-form" method="post">
  <input id="url" name="url" type="hidden" value="">
<input id="csrf_token" name="csrf_token" type="hidden" value="IjQyYjY5YzZlNTcyYjFkMTVlZGRkOWJjYjA3ZmFlYWFiNTg3YmU5ODki.ZxdyCg.8ul_OQHfmZzQvxCIo0AN50iFzeE">
    
  <div class="mb-3">
    <label class="form-label" for="name">Name</label>
    <div class="input-group has-validation">
      <input class="form-control" id="name" name="name" required type="text" value="">
    </div>
  </div>

    
    
  <div class="mb-3">
    <label class="form-label" for="email">Email</label>
    <div class="input-group has-validation">
      <input class="form-control" id="email" name="email" required type="text" value="">
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="comment">Comment</label>
    <div class="input-group has-validation">
      <textarea class="form-control" id="comment" name="comment" required>
</textarea>
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="captcha">Captcha</label>
    <div class="input-group has-validation">
      
<script src='https://www.google.com/recaptcha/api.js' async defer></script>
<div class="g-recaptcha" data-sitekey="6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S"></div>

    </div>
  </div>

    
  <input class="btn btn-primary mb-3" id="submit" name="submit" type="submit" value="Submit">

      
</form>

</div>


</div>

      </div>
    </div>
    
    <div class="col-md-4">
      <div id="sidebar">
        
          
  



<div class="card">
  
  
  
  
  <div class="card-header">
    <div class="row">
      <div class="col">The Flask Mega-Tutorial</div>
      <div class="col text-end">
        <a href="../../announcing-the-flask-mega-tutorial-2024-edition.html">
          <h5 style="margin-bottom: 0px"><span class="badge text-bg-warning">New 2024 Edition!</span></h5>
        </a>
      </div>
    </div>
  </div>
  <a class="card-book-cover" href="https://amzn.to/3MQffrm">
    <img src="../../../static/mega-tutorial-2024-small.png" alt="The New Flask Mega-Tutorial">
  </a>
  <div class="card-body">
    <p class="card-text">If you would you like to support my work on my <a href="../../the-flask-mega-tutorial-part-i-hello-world.html">Flask Mega-Tutorial series</a> on this blog and as a reward have access to the complete tutorial nicely structured as a book and/or a set of videos, you can now order it from my <a href="https://courses.miguelgrinberg.com/p/flask-mega-tutorial">Courses</a> site or from <a href="https://amzn.to/3MQffrm">Amazon</a>.</p>
  </div>
  <div class="card-body">
    <a class="card-link" href="https://amzn.to/3MQffrm">Click here to get the Book!</a><br />
    <a class="card-link" href="https://courses.miguelgrinberg.com/p/flask-mega-tutorial">Click here to get the Video Course!</a>
  </div>

  
</div>
        
        <div class="card">
  <div class="card-header">About Miguel</div>
  <div class="card-body">
    <img style="float: right; margin: 0px 8px 8px 0px; padding: 4px; border: 1px solid #ccc;" src="../../../static/miguel.jpg" />
    <p class="card-text">Welcome to my blog!</p>
    <p class="card-text">I'm a software engineer and technical writer, currently living in Drogheda, Ireland.</p>
    <p class="card-text">You can also find me on <a href="https://twitter.com/miguelgrinberg">Twitter</a>, <a href="https://mstdn.social/@miguelgrinberg">Mastodon</a>, <a href="https://github.com/miguelgrinberg">Github</a>, <a href="http://www.linkedin.com/in/miguelgrinberg">LinkedIn</a>, <a href="https://youtube.com/miguelgrinberg">YouTube</a>, <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a> and <a href="https://patreon.com/miguelgrinberg">Patreon</a>.</p>
    <p class="card-text">Thank you for visiting!</p>
  </div>
</div>
        
        <div class="card" id="categories">
  <div class="card-header">Categories</div>
  <div class="card-body">
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AI/feed"><img src="../../../static/rss-small.png" title="AI RSS Feed" label="AI RSS Feed" alt="AI RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AI" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AI" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AWS/feed"><img src="../../../static/rss-small.png" title="AWS RSS Feed" label="AWS RSS Feed" alt="AWS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AWS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AWS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Arduino/feed"><img src="../../../static/rss-small.png" title="Arduino RSS Feed" label="Arduino RSS Feed" alt="Arduino RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Arduino" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Arduino" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Authentication/feed"><img src="../../../static/rss-small.png" title="Authentication RSS Feed" label="Authentication RSS Feed" alt="Authentication RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Authentication" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Authentication" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Blog/feed"><img src="../../../static/rss-small.png" title="Blog RSS Feed" label="Blog RSS Feed" alt="Blog RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Blog" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Blog" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/C++/feed"><img src="../../../static/rss-small.png" title="C++ RSS Feed" label="C++ RSS Feed" alt="C++ RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/C++" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="C++" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/CSS/feed"><img src="../../../static/rss-small.png" title="CSS RSS Feed" label="CSS RSS Feed" alt="CSS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/CSS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="CSS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Cloud/feed"><img src="../../../static/rss-small.png" title="Cloud RSS Feed" label="Cloud RSS Feed" alt="Cloud RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Cloud" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Cloud" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Database/feed"><img src="../../../static/rss-small.png" title="Database RSS Feed" label="Database RSS Feed" alt="Database RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Database" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Database" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Docker/feed"><img src="../../../static/rss-small.png" title="Docker RSS Feed" label="Docker RSS Feed" alt="Docker RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Docker" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Docker" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Filmmaking/feed"><img src="../../../static/rss-small.png" title="Filmmaking RSS Feed" label="Filmmaking RSS Feed" alt="Filmmaking RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Filmmaking" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Filmmaking" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Flask/feed"><img src="../../../static/rss-small.png" title="Flask RSS Feed" label="Flask RSS Feed" alt="Flask RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" /> <small><em>126</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Games/feed"><img src="../../../static/rss-small.png" title="Games RSS Feed" label="Games RSS Feed" alt="Games RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Games" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Games" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Heroku/feed"><img src="../../../static/rss-small.png" title="Heroku RSS Feed" label="Heroku RSS Feed" alt="Heroku RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Heroku" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Heroku" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/IoT/feed"><img src="../../../static/rss-small.png" title="IoT RSS Feed" label="IoT RSS Feed" alt="IoT RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/IoT" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="IoT" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/JavaScript/feed"><img src="../../../static/rss-small.png" title="JavaScript RSS Feed" label="JavaScript RSS Feed" alt="JavaScript RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/JavaScript" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="JavaScript" /> <small><em>35</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/MicroPython/feed"><img src="../../../static/rss-small.png" title="MicroPython RSS Feed" label="MicroPython RSS Feed" alt="MicroPython RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/MicroPython" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="MicroPython" /> <small><em>9</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microdot/feed"><img src="../../../static/rss-small.png" title="Microdot RSS Feed" label="Microdot RSS Feed" alt="Microdot RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microdot" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microdot" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microservices/feed"><img src="../../../static/rss-small.png" title="Microservices RSS Feed" label="Microservices RSS Feed" alt="Microservices RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microservices" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microservices" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Movie Reviews/feed"><img src="../../../static/rss-small.png" title="Movie Reviews RSS Feed" label="Movie Reviews RSS Feed" alt="Movie Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Movie Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Movie Reviews" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/OpenStack/feed"><img src="../../../static/rss-small.png" title="OpenStack RSS Feed" label="OpenStack RSS Feed" alt="OpenStack RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/OpenStack" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="OpenStack" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Personal/feed"><img src="../../../static/rss-small.png" title="Personal RSS Feed" label="Personal RSS Feed" alt="Personal RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Personal" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Personal" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Photography/feed"><img src="../../../static/rss-small.png" title="Photography RSS Feed" label="Photography RSS Feed" alt="Photography RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Photography" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Photography" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Product Reviews/feed"><img src="../../../static/rss-small.png" title="Product Reviews RSS Feed" label="Product Reviews RSS Feed" alt="Product Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Product Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Product Reviews" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Programming/feed"><img src="../../../static/rss-small.png" title="Programming RSS Feed" label="Programming RSS Feed" alt="Programming RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" /> <small><em>187</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Project Management/feed"><img src="../../../static/rss-small.png" title="Project Management RSS Feed" label="Project Management RSS Feed" alt="Project Management RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Project Management" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Project Management" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Python/feed"><img src="../../../static/rss-small.png" title="Python RSS Feed" label="Python RSS Feed" alt="Python RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" /> <small><em>169</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/REST/feed"><img src="../../../static/rss-small.png" title="REST RSS Feed" label="REST RSS Feed" alt="REST RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/REST" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="REST" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Rackspace/feed"><img src="../../../static/rss-small.png" title="Rackspace RSS Feed" label="Rackspace RSS Feed" alt="Rackspace RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Rackspace" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Rackspace" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Raspberry Pi/feed"><img src="../../../static/rss-small.png" title="Raspberry Pi RSS Feed" label="Raspberry Pi RSS Feed" alt="Raspberry Pi RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Raspberry Pi" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Raspberry Pi" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/React/feed"><img src="../../../static/rss-small.png" title="React RSS Feed" label="React RSS Feed" alt="React RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/React" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="React" /> <small><em>18</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Robotics/feed"><img src="../../../static/rss-small.png" title="Robotics RSS Feed" label="Robotics RSS Feed" alt="Robotics RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Robotics" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Robotics" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Security/feed"><img src="../../../static/rss-small.png" title="Security RSS Feed" label="Security RSS Feed" alt="Security RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Security" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Security" /> <small><em>12</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Video/feed"><img src="../../../static/rss-small.png" title="Video RSS Feed" label="Video RSS Feed" alt="Video RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Video" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Video" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/WebSocket/feed"><img src="../../../static/rss-small.png" title="WebSocket RSS Feed" label="WebSocket RSS Feed" alt="WebSocket RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/WebSocket" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="WebSocket" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Webcast/feed"><img src="../../../static/rss-small.png" title="Webcast RSS Feed" label="Webcast RSS Feed" alt="Webcast RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Webcast" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Webcast" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Windows/feed"><img src="../../../static/rss-small.png" title="Windows RSS Feed" label="Windows RSS Feed" alt="Windows RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Windows" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Windows" /> <small><em>1</em></small>
      </form>
    </div>
    
  </div>
</div>
        
      </div>
    </div>
    
  </div>
  <div id="footer">
    
    <p>&copy; 2012-<script type="text/javascript">document.write(new Date().getFullYear());</script> by Miguel Grinberg. All rights reserved. <a href="mailto:webmaster _at_ miguelgrinberg _dot_ com">Questions?</a></p>
  </div>
</div>

  
    <script src="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../../static/prettify.js"></script>
  <script src="../../../../cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment-with-locales.min.js" integrity="sha512-42PE0rd+wZ2hNXftlM78BSehIGzezNeQuzihiBCvUEB3CVxHvsShF86wBWwQORNxNINlBPuq7rG4WWhNiTVHFg==" crossorigin="anonymous"></script>

<script>
moment.locale("en");
function flask_moment_render(elem) {{
    const timestamp = moment(elem.dataset.timestamp);
    const func = elem.dataset.function;
    const format = elem.dataset.format;
    const timestamp2 = elem.dataset.timestamp2;
    const no_suffix = elem.dataset.nosuffix;
    const units = elem.dataset.units;
    let args = [];
    if (format)
        args.push(format);
    if (timestamp2)
        args.push(moment(timestamp2));
    if (no_suffix)
        args.push(no_suffix);
    if (units)
        args.push(units);
    elem.textContent = timestamp[func].apply(timestamp, args);
    elem.classList.remove('flask-moment');
    elem.style.display = "";
}}
function flask_moment_render_all() {{
    const moments = document.querySelectorAll('.flask-moment');
    moments.forEach(function(moment) {{
        flask_moment_render(moment);
        const refresh = moment.dataset.refresh;
        if (refresh && refresh > 0) {{
            (function(elem, interval) {{
                setInterval(function() {{
                    flask_moment_render(elem);
                }}, interval);
            }})(moment, refresh);
        }}
    }})
}}
document.addEventListener("DOMContentLoaded", flask_moment_render_all);
</script>

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-20EHZP9GRZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-20EHZP9GRZ');
  </script>
  
  <script type="text/javascript">
    function setThemeUI() {
      document.getElementById('select-theme-auto').classList.remove('active');
      document.getElementById('select-theme-light').classList.remove('active');
      document.getElementById('select-theme-dark').classList.remove('active');
      const theme = getPreferredTheme();
      const actualTheme = document.documentElement.getAttribute('data-bs-theme', 'light');
      document.getElementById('select-theme-' + theme).classList.add('active');
      document.getElementById('current-theme').href.baseVal = `#icon-theme-${actualTheme}`;
    };

    function updateTheme(theme) {
      if (theme === 'auto') {
        localStorage.removeItem('theme')
      }
      else {
        localStorage.setItem('theme', theme)
      }
      setTheme(getPreferredTheme());
    }

    setThemeUI();

    const darkModePreference = window.matchMedia("(prefers-color-scheme: dark)");
    darkModePreference.addEventListener("change", e => {
      if (getPreferredTheme() === 'auto') {
        setTheme('auto');
      }
    });

    document.addEventListener("DOMContentLoaded", () => {
      // add prettyprint class to all <pre><code></code></pre> blocks
      let prettify = false;
      document.querySelectorAll('div.post-body pre code').forEach((code) => {
        code.parentNode.classList.add('prettyprint');
        prettify = true;
      });
      prettyPrint();
    });
  </script>

  </body>

<!-- Mirrored from blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms/page/1 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 09:37:16 GMT -->
</html>