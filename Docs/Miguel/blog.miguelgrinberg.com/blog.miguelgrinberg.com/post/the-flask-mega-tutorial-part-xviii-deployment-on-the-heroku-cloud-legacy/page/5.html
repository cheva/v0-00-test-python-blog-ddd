<!doctype html>
<html lang="en">
  
<!-- Mirrored from blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy/page/5 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 08:50:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
  <script type="text/javascript">
    function getPreferredTheme() {
      const storedTheme = localStorage.getItem('theme')
      if (storedTheme) {
        return storedTheme
      }
      return 'auto';
    }

    function setTheme(theme) {
      if (theme === 'auto') {
        theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
      }
      document.documentElement.setAttribute('data-bs-theme', theme);
    };

    setTheme(getPreferredTheme());
  </script>
  
    <title>
  
    The Flask Mega-Tutorial, Part XVIII: Deployment on the Heroku Cloud (2012) - miguelgrinberg.com
  
</title>
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="description" content="miguelgrinberg.com">
  <meta name="copyright" content="Copyright (c) 2012-2024 Miguel Grinberg">
  <meta name="author" content="Miguel Grinberg">
  
  <meta name="keywords" content="python, programming, flask, web, tutorial, deployment, hosting, cloud, heroku">
  
  
  <link rel="canonical" href="../../the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy.html">
  

  
    <link href="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&amp;display=swap" rel="stylesheet">

  <link href="../../../static/tomorrow.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/tomorrow-night.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/social.css" rel="stylesheet" type="text/css" />
  <link href="../../../static/style_20231230.css" rel="stylesheet" type="text/css" />

  <link rel="shortcut icon" href="https://blog.miguelgrinberg.com/static/favicon.ico">
  <link rel="alternate" type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed" title="miguelgrinberg.com RSS feed">

    <meta property="og:title" content="The Flask Mega-Tutorial, Part XVIII: Deployment on the Heroku Cloud (2012)">
    <meta property="og:description" content="(Great news! There is a new version of this tutorial!)This is the eighteenth article in the series in which I document my experience writing web applications in Python using the Flask…">
    <meta property="og:image" content="https://blog.miguelgrinberg.com/static/cards/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy.jpg">
    <meta property="og:url" content="https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy">
    <meta name="twitter:title" content="The Flask Mega-Tutorial, Part XVIII: Deployment on the Heroku Cloud (2012)">
    <meta name="twitter:description" content="(Great news! There is a new version of this tutorial!)This is the eighteenth article in the series in which I document my experience writing web applications in Python using the Flask…">
    <meta name="twitter:image" content="https://blog.miguelgrinberg.com/static/cards/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@miguelgrinberg">

  </head>
  <body>
    <svg style="display: none" version="2.0">
      <defs>
        <symbol id="icon-theme-auto" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-circle-half" viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 0 8 1zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16"/>
        </symbol>
        <symbol id="icon-theme-light" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-brightness-high-fill" viewBox="0 0 16 16">
          <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </symbol>
        <symbol id="icon-theme-dark" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-moon-stars-fill" viewBox="0 0 16 16">
          <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278"/>
          <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
        </symbol>
      </defs>
    </svg>
<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="https://blog.miguelgrinberg.com/index">miguelgrinberg.com</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" aria-current="page" href="https://blog.miguelgrinberg.com/index">Home</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../my-courses-and-books.html">My Courses and Books</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../hire-me.html">Consulting</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../about-me.html">About Me</a></li>
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <svg width="20" height="20" version="2.0"><use id="current-theme" href="#icon-theme-light"></svg>
          </a>
          <ul class="dropdown-menu">
            <li>
              <a id="select-theme-light" class="dropdown-item" href="javascript:updateTheme('light')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-light"></svg>&nbsp; Light Mode
              </a>
            </li>
            <li>
              <a id="select-theme-dark" class="dropdown-item" href="javascript:updateTheme('dark')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-dark"></svg>&nbsp; Dark Mode
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a id="select-theme-auto" class="dropdown-item" href="javascript:updateTheme('auto')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-auto"></svg>&nbsp; System Default
              </a>
            </li>
          </ul>
        </li>
        
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item social-icons">
          <a type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed"><img src="../../../static/social/rss.png" alt="RSS Feed" title="RSS Feed" /></a>
          <a href="https://twitter.com/miguelgrinberg"><img src="../../../static/social/twitter.png" alt="Twitter" title="Twitter" /></a>
          <a rel="me" href="https://mstdn.social/@miguelgrinberg"><img src="../../../static/social/mastodon.png" alt="Mastodon" title="Mastodon" /></a>
          <a href="http://github.com/miguelgrinberg"><img src="../../../static/social/github.png" alt="GitHub" title="GitHub" /></a>
          <a href="https://youtube.com/miguelgrinberg"><img src="../../../static/social/youtube.png" alt="YouTube" title="YouTube" /></a>
          <a href="http://www.linkedin.com/in/miguelgrinberg"><img src="../../../static/social/linkedin.png" alt="LinkedIn" title="LinkedIn" /></a>
          <a href="https://patreon.com/miguelgrinberg"><img src="../../../static/social/patreon.png" alt="Patreon" title="Patreon" /></a>
          <!--<a href="https://www.facebook.com/miguelgrinbergblog"><img src="/static/social/facebook.png" alt="Facebook" title="Facebook" /></a>-->
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
  <div class="row">
    <div class="col-md-8">
      <div id="main">
        
        
        
        
        

<div class="post">

<div class="post-header">
  <h1><a href="../../the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy.html">The Flask Mega-Tutorial, Part XVIII: Deployment on the Heroku Cloud (2012)</a></h1>
  <h2>
    Posted by
    <form action="https://blog.miguelgrinberg.com/author/Miguel Grinberg" method="POST">
      <input type="submit" class="btn btn-danger btn-sm" value="Miguel Grinberg" />
    </form>
    on
    <button class="btn btn-secondary btn-sm" disabled><span class="flask-moment" data-timestamp="2013-04-24T06:24:58Z" data-function="format" data-format="LL" data-refresh="0" style="display: none">2013-04-24T06:24:58Z</span></button>
    under
    
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Heroku" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Heroku" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Cloud" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Cloud" />
      </form>
    
    
  </h2>
</div>
<div class="post-body"><p><em>(Great news! There is a <a href="../../the-flask-mega-tutorial-part-i-hello-world.html">new version of this tutorial</a>!)</em></p>
<p>This is the eighteenth article in the series in which I document my experience writing web applications in <a href="http://python.org/">Python</a> using the <a href="http://flask.pocoo.org/">Flask</a> microframework.</p>
<p>The goal of the tutorial series is to develop a decently featured microblogging application that demonstrating total lack of originality I have decided to call <code>microblog</code>.</p>
<p><strong>NOTE</strong>: This article was revised in September 2014 to be in sync with current versions of Python and Flask.</p>
<p>Here is an index of all the articles in the series that have been published to date:</p>
<ul>
<li><a href="../../the-flask-mega-tutorial-part-i-hello-world-legacy.html">Part I: Hello, World!</a></li>
<li><a href="../../the-flask-mega-tutorial-part-ii-templates-legacy.html">Part II: Templates</a></li>
<li><a href="../../the-flask-mega-tutorial-part-iii-web-forms-legacy.html">Part III: Web Forms</a></li>
<li><a href="../../the-flask-mega-tutorial-part-iv-database-legacy.html">Part IV: Database</a></li>
<li><a href="../../the-flask-mega-tutorial-part-v-user-logins-legacy.html">Part V: User Logins</a></li>
<li><a href="../../the-flask-mega-tutorial-part-vi-profile-page-and-avatars-legacy.html">Part VI: Profile Page And Avatars</a></li>
<li><a href="../../the-flask-mega-tutorial-part-vii-unit-testing-legacy.html">Part VII: Unit Testing</a></li>
<li><a href="../../the-flask-mega-tutorial-part-viii-followers-contacts-and-friends-legacy.html">Part VIII: Followers, Contacts And Friends</a></li>
<li><a href="../../the-flask-mega-tutorial-part-ix-pagination-legacy.html">Part IX: Pagination</a></li>
<li><a href="../../the-flask-mega-tutorial-part-x-full-text-search-legacy.html">Part X: Full Text Search</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xi-email-support-legacy.html">Part XI: Email Support</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xii-facelift-legacy.html">Part XII: Facelift</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xiii-dates-and-times-legacy.html">Part XIII: Dates and Times</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xiv-i18n-and-l10n-legacy.html">Part XIV: I18n, L10n</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xv-ajax-legacy.html">Part XV: Ajax</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xvi-debugging-testing-and-profiling-legacy.html">Part XVI: Debugging, Testing and Profiling</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy.html">Part XVII: Deployment on Linux (even on the Raspberry Pi!)</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy.html">Part XVIII: Deployment on the Heroku Cloud</a> (this article)</li>
</ul>
<p>In the previous article we explored traditional hosting options. We've looked at two actual examples of deployment to Linux servers, first to a CentOS system and later to the Raspberry Pi credit card sized computer. Those that are not used to administer a Linux system probably thought the amount of effort we had to put into the task was huge, and that surely there must be an easier way.</p>
<p>Today we will try to see if deploying to the <em>cloud</em> is the answer to the complexity problem.</p>
<p>But what does it mean to "deploy to the cloud"?</p>
<p>A cloud hosting provider offers a platform on which an application can run. All the developer needs to provide is the application, because the rest, which includes the hardware, operating system, scripting language interpreters and database, is managed by the service.</p>
<p>Sounds too good to be true, right?</p>
<p>We'll look at deploying to <a href="http://heroku.com/">Heroku</a>, one of the most popular cloud hosting services. I picked Heroku not only because it is popular, but also because it has a free service level, so we get to host our application without having to spend any money. If you want to find information about this type of services and what other providers are out there you can consult the Wikipedia page on <a href="http://en.wikipedia.org/wiki/Platform_as_a_service">platform as a service</a>.</p>
<h2>Hosting on Heroku</h2>
<p>Heroku was one of the first platform as a service providers. It started as a hosting option for Ruby based applications, but then grew to support many other languages like Java, Node.js and our favorite, Python.</p>
<p>In essence, deploying a web application to Heroku requires just uploading the application using <code>git</code> (you'll see how that works in a moment). Heroku looks for a file called <code>Procfile</code> in the application's root directory for instructions on how to execute the application. For Python projects Heroku also expects a <code>requirements.txt</code> file that lists all the module dependencies that need to be installed.</p>
<p>After the application is uploaded you are essentially done. Heroku will do its magic and the application will be online within seconds. The amount of money you pay directly determines how much computing power you get for your application, so as your application gets more users you will need to buy more units of computing, which Heroku calls "dynos", and that is how you keep up with the load.</p>
<p>Ready to try Heroku? Let's get started!</p>
<h3>Creating Heroku account</h3>
<p>Before we can deploy to Heroku we need to have an account with them. So head over to <a href="https://id.heroku.com/signup">heroku.com</a> and create an account.</p>
<p>Once you are logged in you have access to a dashboard, where all your apps can be managed. We will not be using the dashboard much though, but it provides a nice view of your account.</p>
<h3>Installing the Heroku client</h3>
<p>Even though it is possible to manage applications from the Heroku web site to some extent, there are some things that can only be done from the command line, so we'll just do everything there.</p>
<p>Heroku offers a tool called the "Heroku client" that we'll use to create and manage our application. This tool is available for Windows, Mac OS X and Linux. If there is a <a href="https://toolbelt.heroku.com/">Heroku toolbelt</a> download for your platform then that's the easiest way to get the Heroku client tool installed.</p>
<p>The first thing we should do with the client tool is to login to our account:</p>
<pre><code>$ heroku login
</code></pre>
<p>Heroku will prompt for your email address and your account password. The first time you login it will send your public SSH key to the Heroku servers.</p>
<p>Your authenticated status will be remembered in subsequent commands.</p>
<h3>Git setup</h3>
<p>The <code>git</code> tool is core to the deployment of apps to Heroku, so it must also be available. If you installed the Heroku toolbelt then you already have it as part of that installation.</p>
<p>To deploy to Heroku the application must be in a local <code>git</code> repository, first so let's get one set up:</p>
<pre><code>$ git clone -b version-0.18 git://github.com/miguelgrinberg/microblog.git
$ cd microblog
</code></pre>
<p>Note that we are choosing a specific branch to be checked out, this is the branch that has the Heroku integration.</p>
<h3>Creating a Heroku app</h3>
<p>To create a new Heroku app you just use the <code>create</code> command from the root directory of the application:</p>
<pre><code>$ heroku apps:create flask-microblog
Creating flask-microblog... done, stack is cedar
http://flask-microblog.herokuapp.com/ | git@heroku.com:flask-microblog.git
</code></pre>
<p>In addition to setting up a URL this command adds a <a href="http://gitref.org/remotes/">git remote</a> to our <code>git</code> repository that we will soon use to upload the application.</p>
<p>Of course the name <code>flask-microblog</code> is now taken by me, so make sure you use a different app name if you are doing this along.</p>
<h3>Eliminating local file storage</h3>
<p>Several of the functions of our application rely on writing data to disk files.</p>
<p>Unfortunately we have a tricky problem with this. Applications that run on Heroku are not supposed to write permanent files to disk, because Heroku uses a virtualized platform that does not remember data files, the file system is reset to a clean state that just contains the application script files each time a virtual worker is started. Essentially this means that the application can write temporary files to disk, but should be able to regenerate those files should they disappear. Also when two or more workers (dynos) are in use each gets its own virtual file system, so it is not possible to share files among them.</p>
<p>This is really bad news for us. For starters, it means we cannot use sqlite as a database, and our Whoosh full text search database will also fail to work, since it writes all its data to files. We also have the compiled translation files for Flask-Babel, which are generated when running the <code>tr_compile.py</code> script. And yet another area where there is problem is logging, we used to write our logfile.to the <code>tmp</code> folder and that is also not going to work when running on Heroku.</p>
<p>We have identified four major problems for which we need to try to find solutions.</p>
<p>For our first problem, the database, we'll migrate to Heroku's own database offering, which is based on <a href="http://www.postgresql.org/">PostgreSQL</a>.</p>
<p>For the full text search functionality we don't have a readily available alternative. We could re-implement full text searches using PostgreSQL functionality, but that would require several changes to our application. It is a pity, but solving this problem now would be a huge distraction, so for now we'll disable full text searches when running under Heroku. </p>
<p>To support translations we are going to include the compiled translation files in the git repository, that way these files will be persistant in the file system.</p>
<p>Finally, since we can't write our own log file, we'll add our logs to the logger that Heroku uses, which is actually simple, since Heroku will add to its log anything that goes to <code>stdout</code>.</p>
<h3>Creating a Heroku database</h3>
<p>To create a database we use the Heroku client:</p>
<pre><code>$ heroku addons:add heroku-postgresql:dev
Adding heroku-postgresql:dev on flask-microblog... done, v3 (free)
Attached as HEROKU_POSTGRESQL_ORANGE_URL
Database has been created and is available
 ! This database is empty. If upgrading, you can transfer
 ! data from another database with pgbackups:restore.
Use `heroku addons:docs heroku-postgresql:dev` to view documentation.
$ heroku pg:promote HEROKU_POSTGRESQL_ORANGE_URL
Promoting HEROKU_POSTGRESQL_ORANGE_URL to DATABASE_URL... done
</code></pre>
<p>Note that we are adding a development database, because that is the only database offering that is free. A production web server would need one of the production database options.</p>
<p>And how does our application know the details to connect to this database? Heroku publishes the URI to the database in the <code>$DATABASE_URL</code> environment variable. If you recall, we have modified our configuration to look for this variable in the previous hosting article, so the changes are already in place to connect with this database.</p>
<h3>Disabling full text searches</h3>
<p>To disable full text searches we need our application to be able to know if it is running under Heroku or not. For this we will add a custom environment variable, again using the Heroku client tool:</p>
<pre><code>heroku config:set HEROKU=1
</code></pre>
<p>The <code>HEROKU</code> environment variable will now be set to <code>1</code> when our application runs inside the Heroku virtual platform.</p>
<p>Now it is easy to disable the full text search index. First we add a configuration variable (file <code>config.py</code>):</p>
<pre><code># Whoosh does not work on Heroku
WHOOSH_ENABLED = os.environ.get('HEROKU') is None
</code></pre>
<p>Then we suppress the creation of the full text database instance (file <code>app/models.py</code>):</p>
<pre><code>from config import WHOOSH_ENABLED

enable_search = WHOOSH_ENABLED
if enable_search:
    import flask_whooshalchemy as whooshalchemy

# ...
if enable_search:
    whooshalchemy.whoosh_index(app, Post)
</code></pre>
<h3>Precompiled Tranlations</h3>
<p>This one is pretty easy. After running <code>tr_compile.py</code> we end up with a <code>&lt;language&gt;.mo</code> file for each <code>&lt;language&gt;.po</code> source file. All we need to do is add the <code>mo</code> files to the git repository, and then in the future we'll have to remember to update them. The <code>mo</code> file for Spanish is included in the branch of the git repository dedicated to this article.</p>
<h3>Fixing the logging</h3>
<p>Under Heroku, anything that is written to <code>stdout</code> is added to the Heroku application log. But logs written to a disk file will not be accessible. So on this platform we will suppress the file log and instead use a log that writes to <code>stdout</code> (file <code>app/__init__.py</code>):</p>
<pre><code>if not app.debug and os.environ.get('HEROKU') is None:
    import logging
    from logging.handlers import RotatingFileHandler
    file_handler = RotatingFileHandler('tmp/microblog.log', 'a', 1 * 1024 * 1024, 10)
    file_handler.setLevel(logging.INFO)
    file_handler.setFormatter(logging.Formatter('%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]'))
    app.logger.addHandler(file_handler)
    app.logger.setLevel(logging.INFO)
    app.logger.info('microblog startup')

if os.environ.get('HEROKU') is not None:
    import logging
    stream_handler = logging.StreamHandler()
    app.logger.addHandler(stream_handler)
    app.logger.setLevel(logging.INFO)
    app.logger.info('microblog startup')
</code></pre>
<h3>The web server</h3>
<p>Heroku does not provide a web server. Instead, it expects the application to start its own server on the port number given in environment variable <code>$PORT</code>.</p>
<p>We know the Flask web server is not good for production use because it is single process and single threaded, so we need a better server. The Heroku tutorial for Python suggests <a href="http://gunicorn.org/">gunicorn</a>, a pre-fork style web server written in Python, so that's the one we'll use.</p>
<p>For our local environment <code>gunicorn</code> installs as a regular python module into our virtual environment:</p>
<pre><code>$ flask/bin/pip install gunicorn
</code></pre>
<p>To start this browser we need to provide a single argument that names the Python module that defines the application and the application object, both separated by a colon. Now for example, if we wanted to start a local <code>gunicorn</code> server with this module we would issue the following command:</p>
<pre><code>$ flask/bin/gunicorn --log-file - app:app
2013-04-24 08:42:34 [31296] [INFO] Starting gunicorn 19.1.1
2013-04-24 08:42:34 [31296] [INFO] Listening at: http://127.0.0.1:8000 (31296)
2013-04-24 08:42:34 [31296] [INFO] Using worker: sync
2013-04-24 08:42:34 [31301] [INFO] Booting worker with pid: 31301
</code></pre>
<h3>The requirements file</h3>
<p>Soon we will be uploading our application to Heroku, but before we can do that we have to inform the server what dependencies the application needs to run. We created a <code>requirements.txt</code> file in the previous chapter, to simplify the installation of dependencies in a dedicated server, and the good news is that Heroku also imports dependencies from a requirements file.</p>
<p>The <code>gunicorn</code> web server needs to be added to the list, and so is the <code>psycopg2</code> driver, which is required by SQLAlchemy to connect to PostgreSQL databases. The final <code>requirements.txt</code> file looks like this:</p>
<pre><code>Babel==1.3
Flask==0.10.1
Flask-Babel==0.9
Flask-Login==0.2.11
Flask-Mail==0.9.0
Flask-OpenID==1.2.1
Flask-SQLAlchemy==2.0
Flask-WTF==0.10.2
Flask-WhooshAlchemy==0.56
Jinja2==2.7.3
MarkupSafe==0.23
SQLAlchemy==0.9.7
Tempita==0.5.2
WTForms==2.0.1
Werkzeug==0.9.6
Whoosh==2.6.0
blinker==1.3
coverage==3.7.1
decorator==3.4.0
flipflop==1.0
guess-language==0.2
gunicorn==19.1.1
itsdangerous==0.24
pbr==0.10.0
psycopg2==2.5.4
python-openid==2.2.5
pytz==2014.7
six==1.8.0
speaklater==1.3
sqlalchemy-migrate==0.9.2
sqlparse==0.1.11
</code></pre>
<p>Some of these modules will not be needed in the Heroku version of our application, but it really doesn't hurt to have extra stuff, to me it seems better to have a complete requirements list.</p>
<h3>The Procfile</h3>
<p>The last requirement is to tell Heroku how to run the application. For this Heroku requires a file called <code>Procfile</code> in the root folder of the application.</p>
<p>This file is extremely simple, it just defines process names and the commands associated with them (file <code>Procfile</code>):</p>
<pre><code>web: gunicorn app:app
init: python db_create.py
upgrade: python db_upgrade.py
</code></pre>
<p>The <code>web</code> label is associated with the web server. Heroku expects this task and will use it to start our application.</p>
<p>The other two tasks, named <code>init</code> and <code>upgrade</code> are custom tasks that we will use to work with our application. The init task initializes our application by creating the database. The upgrade task is similar, but instead of creating the database from scratch it upgrades it to the latest migration.</p>
<h3>Deploying the application</h3>
<p>And now we have reached the most interesting part, where we push the application to our Heroku hosting account. This is actually pretty simple, we just use <code>git</code> to push the application:</p>
<pre><code>$ git push heroku version-0.18
Counting objects: 307, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (168/168), done.
Writing objects: 100% (307/307), 165.57 KiB, done.
Total 307 (delta 142), reused 272 (delta 122)

-----&gt; Python app detected
-----&gt; No runtime.txt provided; assuming python-2.7.4.
-----&gt; Preparing Python runtime (python-2.7.4)
-----&gt; Installing Distribute (0.6.36)
-----&gt; Installing Pip (1.3.1)
-----&gt; Installing dependencies using Pip (1.3.1)
...
-----&gt; Discovering process types
       Procfile declares types -&gt; init, upgrade, web

-----&gt; Compiled slug size: 29.6MB
-----&gt; Launching... done, v6
       http://flask-microblog.herokuapp.com deployed to Heroku

To git@heroku.com:flask-microblog.git
 * [new branch]      master -&gt; master
</code></pre>
<p>The label <code>heroku</code> that we used in the <code>git push</code> command was automatically registered with our <code>git</code> repository when we created our application with <code>heroku create</code>. To see how this remote repository is configured you can run <code>git remote -v</code> in the application folder.</p>
<p>The last argument, <code>version-0.18</code> is the name of the branch we are deploying to Heroku. For your own applications, you will likely use <code>master</code> here.</p>
<p>The first time we push the application to Heroku we need to initialize the database and the translation files, and for that we can execute the <code>init</code> task that we included in our <code>Procfile</code>:</p>
<pre><code>$ heroku run init
Running `init` attached to terminal... up, run.7671
/app/.heroku/python/lib/python2.7/site-packages/sqlalchemy/engine/url.py:105: SADeprecationWarning: The SQLAlchemy PostgreSQL dialect has been renamed from 'postgres' to 'postgresql'. The new URL format is postgresql[+driver]://&lt;user&gt;:&lt;pass&gt;@&lt;host&gt;/&lt;dbname&gt;
  module = __import__('sqlalchemy.dialects.%s' % (dialect, )).dialects
</code></pre>
<p>The deprecation warning comes from SQLAlchemy, because it does not like that the URI starts with <code>postgres://</code> instead of <code>postgresql://</code>. This URI comes from Heroku via the <code>$DATABASE_URL</code> environment variable, so we really don't have any control over this. Let's hope this continues to work for a long time.</p>
<p>Believe it or not, now the application is online. In my case, the application can be accessed at <a href="http://flask-microblog.herokuapp.com/">http://flask-microblog.herokuapp.com</a>. For example, you can become my follower from my <a href="http://flask-microblog.herokuapp.com/user/miguel.grinberg">profile page</a>. I'm not sure how long I'll leave it there, but feel free to give it a try if you can connect to it!</p>
<h3>Updating the application</h3>
<p>The time will come when an update needs to be deployed. This works in a similar way to the initial deployment. First the application is pushed from <code>git</code>. If your application is on the <code>master</code> branch, an update can be pushed with:</p>
<pre><code>$ git push heroku master
</code></pre>
<p>Then the upgrade script is executed:</p>
<pre><code>$ heroku run upgrade
</code></pre>
<h3>Logging</h3>
<p>If a problem occurs then it may be useful to see the logs. Recall that for the Heroku hosted version we are writing our logs to <code>stdout</code> which Heroku collects into its own logs.</p>
<p>To see the logs we use the Heroku client:</p>
<pre><code>$ heroku logs
</code></pre>
<p>The above command will show all the logs, including Heroku ones. To only see application logs we can use this command:</p>
<pre><code>$ heroku logs --source app
</code></pre>
<p>Things like stack traces and other application errors will appear in these app logs.</p>
<h2>Is it worth it?</h2>
<p>We've now seen what it takes to deploy to a cloud hosting service so we can now compare against the traditional hosting.</p>
<p>The simplicity aspect is easily won by cloud. At least for Heroku the deployment process was extremely simple. When deploying to a dedicated server or VPS there are a lot of administrative tasks that need to be done to prepare the system. Heroku takes care of all that and allows us to concentrate on our application.</p>
<p>The price is where it is harder to come to a conclusion. Cloud offerings are more expensive than dedicated servers, since you are not only paying for the server but also for the admin work. A pretty basic production service with Heroku that includes two dynos and the least expensive production database costs $85 per month at the time I'm writing this. On the other side, if you look hard you can find well provisioned VPS servers for abour $40 per year.</p>
<p>In the end, I think it all comes down to what is most important to you, time or money.</p>
<h2>The End?</h2>
<p>The updated application is available, as always, on my <a href="https://github.com/miguelgrinberg/microblog/tree/version-0.18">github page</a>. Alternatively you can download it as a zip file below:</p>
<p>Download <a href="https://github.com/miguelgrinberg/microblog-2012/archive/version-0.18.zip">microblog 0.18</a>.</p>
<p>With our application deployed in every possible way it feels like we are reaching the end of this journey.</p>
<p>I hope these articles were a useful introduction to the development of a real world web application project, and that the knowledge dump I've made over these eighteen articles motivates you to start your own project.</p>
<p>I'm not closing the door to more <code>microblog</code> articles. If and when an interesting topic comes to mind I will write more, but I expect the rate of updates from now on will slow down a bit. From time to time I may make small updates to the application that don't deserve a blog post, so you may want to <a href="https://github.com/miguelgrinberg/microblog">watch the project on github</a> to catch these.</p>
<p>I will continue blogging about topics related to web development and software in general, so I invite you to connect via <a href="https://twitter.com/#!/miguelgrinberg">Twitter</a> or <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a> if you haven't done it yet, so that you find my future articles.</p>
<p>Thank you, again, for being a loyal reader.</p>
<p>Miguel</p></div>

<div class="card patreon-bar">
  <div class="card-body">
    <h5>Become a Patron!</h5>
    <p class="card-text">Hello, and thank you for visiting my blog! If you enjoyed this article, please consider supporting my work on this blog on <a href="https://patreon.com/miguelgrinberg">Patreon</a>!</p>
    <a href="https://patreon.com/miguelgrinberg" alt="Become a Patron!" title="Become a Patron!"><img src="../../../static/patreon-button.png"></a>
  </div>
</div>


<div class="card social-bar">
  <div class="card-body">
    <h5>Share this post:</h5>
      <!-- Sharingbutton Hacker News -->
      <a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy&amp;t=The%20Flask%20Mega-Tutorial%2C%20Part%20XVIII%3A%20Deployment%20on%20the%20Heroku%20Cloud%20%282012%29" target="_blank" rel="noopener" aria-label="Hacker News">
        <div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 140"><path fill-rule="evenodd" d="M60.94 82.314L17 0h20.08l25.85 52.093c.397.927.86 1.888 1.39 2.883.53.994.995 2.02 1.393 3.08.265.4.463.764.596 1.095.13.334.262.63.395.898.662 1.325 1.26 2.618 1.79 3.877.53 1.26.993 2.42 1.39 3.48 1.06-2.254 2.22-4.673 3.48-7.258 1.26-2.585 2.552-5.27 3.877-8.052L103.49 0h18.69L77.84 83.308v53.087h-16.9v-54.08z"></path></svg></div>Hacker News</div>
      </a>

      <!-- Sharingbutton Reddit -->
      <a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy&amp;resubmit=true&amp;title=The%20Flask%20Mega-Tutorial,%20Part%20XVIII:%20Deployment%20on%20the%20Heroku%20Cloud%20(2012)" target="_blank" rel="noopener" aria-label="Reddit">
        <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96 0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65 0 3-1.35 3-3s-1.35-3-3-3c-1.38 0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65 0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66 0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64 0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4 0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6 0 .23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1 0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></div>Reddit</div>
      </a>

      <!-- Sharingbutton Twitter -->
      <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=The%20Flask%20Mega-Tutorial%2C%20Part%20XVIII%3A%20Deployment%20on%20the%20Heroku%20Cloud%20%282012%29&amp;url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy" target="_blank" rel="noopener" aria-label="Twitter">
        <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div>Twitter</div>
      </a>

      <!-- Sharingbutton LinkedIn -->
      <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy&amp;title=The%20Flask%20Mega-Tutorial%2C%20Part%20XVIII%3A%20Deployment%20on%20the%20Heroku%20Cloud%20%282012%29&amp;summary=The%20Flask%20Mega-Tutorial%2C%20Part%20XVIII%3A%20Deployment%20on%20the%20Heroku%20Cloud%20%282012%29&amp;source=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy" target="_blank" rel="noopener" aria-label="LinkedIn">
        <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg></div>LinkedIn</div>
      </a>

      <!-- Sharingbutton Facebook -->
      <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy" target="_blank" rel="noopener" aria-label="Facebook">
        <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div>Facebook</div>
      </a>

      <!-- Sharingbutton E-Mail -->
      <a class="resp-sharing-button__link" href="mailto:?subject=The%20Flask%20Mega-Tutorial%2C%20Part%20XVIII%3A%20Deployment%20on%20the%20Heroku%20Cloud%20%282012%29&amp;body=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy" target="_self" rel="noopener" aria-label="E-Mail">
        <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></div>E-Mail</div>
      </a>

  </div>
</div>

<div id="comments" class="post-comment-count">
  
  <a class="btn btn-outline-secondary" href="../../the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy.html#comments">136 comments</a>
  
</div>


<div class="comments">
  <ul>
    
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/8b2ec14c28a299a1e2560adb0208306c?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#101</span> <span class="badge text-bg-warning">Jeff C</span> said
    
    <span class="flask-moment" data-timestamp="2016-08-21T05:06:09Z" data-function="fromNow" data-refresh="0" style="display: none">2016-08-21T05:06:09Z</span>
  </p>
  <div>
    <p>in Python 3.5 I always get this error:</p>
<p>File "/Users/jeffreyjones/Sites/microblog/flask/lib/python3.5/site-packages/openid/<strong>init</strong>.py", line 52, in &lt;module&gt;<br>
    if len(version_info) != 3:<br>
TypeError: object of type 'map' has no len()</p>
<p>still working at it...</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/8b2ec14c28a299a1e2560adb0208306c?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#102</span> <span class="badge text-bg-warning">Jeff Corliss</span> said
    
    <span class="flask-moment" data-timestamp="2016-08-21T07:40:01Z" data-function="fromNow" data-refresh="0" style="display: none">2016-08-21T07:40:01Z</span>
  </p>
  <div>
    <p>First of all I want to say, amazing tutorial thank you so much.</p>
<p>Would it be possible to do an updated version for python &gt;3.0 ?? </p>
<p>I am working through some of the kinks but have no deployed successfully.</p>
<p>thank you!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/22373704921c688ab5d30c8d8792e8bb?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#103</span> <span class="badge text-bg-warning">marq</span> said
    
    <span class="flask-moment" data-timestamp="2016-08-22T18:02:14Z" data-function="fromNow" data-refresh="0" style="display: none">2016-08-22T18:02:14Z</span>
  </p>
  <div>
    <p>Hi Miguel!</p>
<p>When I run app with gunicorn, then register -&gt; confirm account I got flash message that account confirmed, but still isn't.<br>
For app run as python <a href="http://manage.py/" rel="nofollow">manage.py</a> runserver it works as desired.<br>
Do you have any idea why gunicorn can't interpret link with token?</p>
<p>Thank in advance!<br>
MarQ:)</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/b54e0d7f3482fd14f72ca525b53ebb36?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#104</span> <span class="badge text-bg-warning">onwuzulike emeka</span> said
    
    <span class="flask-moment" data-timestamp="2016-08-24T09:31:33Z" data-function="fromNow" data-refresh="0" style="display: none">2016-08-24T09:31:33Z</span>
  </p>
  <div>
    <p>great tutorial Mr.Grinberg<br>
I am having some trouble testing gunicorn on my local machine. it gives me this error. <br>
I am using windows.<br>
thanks in advance.</p>
<p>gunicorn app:app<br>
Traceback (most recent call last):<br>
  File "C:\Python34\lib\<a href="http://runpy.py/" rel="nofollow">runpy.py</a>", line 170, in _run_module_as_main<br>
    "<strong>main</strong>", mod_spec)<br>
  File "C:\Python34\lib\<a href="http://runpy.py/" rel="nofollow">runpy.py</a>", line 85, in _run_code<br>
    exec(code, run_globals)<br>
  File "C:\Python34\Scripts\<a href="http://gunicorn.exe__main__.py/" rel="nofollow">gunicorn.exe__main__.py</a>", line 5, in &lt;module&gt;<br>
  File "C:\Python34\lib\site-packages\gunicorn\app\<a href="http://wsgiapp.py/" rel="nofollow">wsgiapp.py</a>", line 10, in &lt;module&gt;<br>
    from gunicorn.app.base import Application<br>
  File "C:\Python34\lib\site-packages\gunicorn\app\<a href="http://base.py/" rel="nofollow">base.py</a>", line 12, in &lt;module&gt;<br>
    from gunicorn import util<br>
  File "C:\Python34\lib\site-packages\gunicorn\<a href="http://util.py/" rel="nofollow">util.py</a>", line 9, in &lt;module&gt;<br>
    import fcntl<br>
ImportError: No module named 'fcntl'</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#105</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2016-08-25T05:14:25Z" data-function="fromNow" data-refresh="0" style="display: none">2016-08-25T05:14:25Z</span>
  </p>
  <div>
    <p>@Jeff: could be an openid incompatibility with Python 3.5.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#106</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2016-08-25T05:15:11Z" data-function="fromNow" data-refresh="0" style="display: none">2016-08-25T05:15:11Z</span>
  </p>
  <div>
    <p>@Jeff: this tutorial was revised and edited to support Python 3.4 a while ago.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#107</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2016-08-25T05:18:04Z" data-function="fromNow" data-refresh="0" style="display: none">2016-08-25T05:18:04Z</span>
  </p>
  <div>
    <p>@onwuzulike: gunicorn does not run on windows.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#108</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2016-08-25T05:22:44Z" data-function="fromNow" data-refresh="0" style="display: none">2016-08-25T05:22:44Z</span>
  </p>
  <div>
    <p>@marq: I could be related to this issue: <a href="https://github.com/miguelgrinberg/flasky/issues/58" rel="nofollow">https://github.com/miguelgrinberg/flasky/issues/58</a>, which turned out to be in Flask itself. See if upgrading Flask to the latest 0.11.x release addresses your problem.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/bfd72f4692471b7df0532fac4e551758?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#109</span> <span class="badge text-bg-warning">kirill</span> said
    
    <span class="flask-moment" data-timestamp="2016-11-11T15:19:43Z" data-function="fromNow" data-refresh="0" style="display: none">2016-11-11T15:19:43Z</span>
  </p>
  <div>
    <p>Hello, Miguel! Great tutorial, thank you! I think Flask is very cool stuff, trying to implement some of your advices and encountering strange problem, google couldn't give me helpful answer, maybe you can help.</p>
<ol>
<li>
<p>on localhost everything works fine, on openshift it says:<br>
[error] [client xxx] mod_wsgi (pid=230305): Exception occurred processing WSGI script '/var/lib/openshift/../app-root/runtime/repo/<a href="http://run.py/" rel="nofollow">run.py</a>'.<br>
[error] [client xxx] TypeError: create_app() takes 1 positional argument but 2 were given</p>
</li>
<li>
<p>project structure:<br>
app<br>
  main<br>
  static<br>
  templates<br>
<strong>init</strong>.py<br>
  <a href="http://models.py/" rel="nofollow">models.py</a><br>
config<br>
  <a href="http://development.py/" rel="nofollow">development.py</a><br>
requirements.txt<br>
<a href="http://run.py/" rel="nofollow">run.py</a><br>
<a href="http://setup.py/" rel="nofollow">setup.py</a></p>
</li>
<li>
<p><a href="http://run.py/" rel="nofollow">run.py</a> here, <strong>init</strong>.py are here:<br>
<a href="http://pastebin.com/ce9nAxEd" rel="nofollow">http://pastebin.com/ce9nAxEd</a></p>
</li>
</ol>
<p>what is the problem? what it wants from me?<br>
thank you!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#110</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2016-11-12T17:08:01Z" data-function="fromNow" data-refresh="0" style="display: none">2016-11-12T17:08:01Z</span>
  </p>
  <div>
    <p>@kirill: you may need to look at the complete stack trace of the error to find where is the offending call to create_app being made.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/bfd72f4692471b7df0532fac4e551758?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#111</span> <span class="badge text-bg-warning">kirill</span> said
    
    <span class="flask-moment" data-timestamp="2016-11-27T08:11:40Z" data-function="fromNow" data-refresh="0" style="display: none">2016-11-27T08:11:40Z</span>
  </p>
  <div>
    <p>@Miguel i found out some new things about my problem, maybe it is interesting for you or somebody else, encountering the same problem.</p>
<ol>
<li>openshift flask runner requires that in <a href="http://run.py/" rel="nofollow">run.py</a> (== <a href="http://wsgi.py/" rel="nofollow">wsgi.py</a>) app was imported as class instance with name 'application'.<br>
so it is wrong (openshift flask standard runner think so) to import function 'create_app' in <a href="http://run.py/" rel="nofollow">run.py</a>, which i tried to do and why i've got error with positional args.</li>
<li>the only way to solve problem, i found, is to initiate app: 'app = create_app()' without any args, in <strong>init</strong>.py<br>
so it starts on standard config (with no attention to your config files)<br>
and redefine config in <a href="http://wsgi.py/" rel="nofollow">wsgi.py</a>: 'application.config.from_pyfile(CONFIG_FILE)'</li>
</ol>
<p>i'm not sure this is a good way of solving problem, because app starts at first without your config and after you redefine config, restarts.<br>
but i don't see another way of defining config in <a href="http://run.py/" rel="nofollow">run.py</a> if you use blueprints and your app lives on openshift.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#112</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2016-11-27T18:06:16Z" data-function="fromNow" data-refresh="0" style="display: none">2016-11-27T18:06:16Z</span>
  </p>
  <div>
    <p>@kirill: I don't have experience with OpenShift, so I can't comment in this requirement. But you should load a configuration name from the environment, don't need to always use the default.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/b84fc7c1f12bed22543e493b977667b5?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#113</span> <span class="badge text-bg-warning">Jacob</span> said
    
    <span class="flask-moment" data-timestamp="2016-12-22T22:18:28Z" data-function="fromNow" data-refresh="0" style="display: none">2016-12-22T22:18:28Z</span>
  </p>
  <div>
    <p>Thank you for this awesome tutorial! </p>
<p>I'm having issues with gunicorn when I put everything on heroku. I'm using windows, but I don't think that it should matter for heroku. I first had problems with my app, and then I used the microblog app that you have on github, just to make sure that I did not miss anything. I get the same error in both cases: </p>
<p>Running web on flask-thingapp... up, run.4899 (Free)<br>
Traceback (most recent call last):<br>
  File "/app/.heroku/python/bin/gunicorn", line 11, in &lt;module&gt;<br>
    sys.exit(run())<br>
  File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/app/<a href="http://wsgiapp.py/" rel="nofollow">wsgiapp.py</a>", line 74, in run<br>
    WSGIApplication("%(prog)s [OPTIONS] [APP_MODULE]").run()<br>
  File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/app/<a href="http://base.py/" rel="nofollow">base.py</a>", line 185, in run<br>
    super(Application, self).run()<br>
  File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/app/<a href="http://base.py/" rel="nofollow">base.py</a>", line 71, in run<br>
    Arbiter(self).run()<br>
  File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/<a href="http://arbiter.py/" rel="nofollow">arbiter.py</a>", line 169, in run<br>
    self.manage_workers()<br>
  File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/<a href="http://arbiter.py/" rel="nofollow">arbiter.py</a>", line 477, in manage_workers<br>
    self.spawn_workers()<br>
  File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/<a href="http://arbiter.py/" rel="nofollow">arbiter.py</a>", line 542, in spawn_workers<br>
    time.sleep(0.1 * random.random())<br>
  File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/<a href="http://arbiter.py/" rel="nofollow">arbiter.py</a>", line 209, in handle_chld<br>
    self.reap_workers()<br>
  File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/<a href="http://arbiter.py/" rel="nofollow">arbiter.py</a>", line 459, in reap_workers<br>
    raise HaltServer(reason, self.WORKER_BOOT_ERROR)<br>
gunicorn.errors.HaltServer: &lt;HaltServer 'Worker failed to boot.' 3&gt;</p>
<p>I can't figure out what's causing the error and I would appreciate any help.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#114</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2016-12-22T23:12:22Z" data-function="fromNow" data-refresh="0" style="display: none">2016-12-22T23:12:22Z</span>
  </p>
  <div>
    <p>@Jacob: can you launch gunicorn locally, using the exact same command you have on the Procfile?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/11e3d60030ed5f4c7878b8c1fcb337a1?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#115</span> <span class="badge text-bg-warning">Manuel Ramos</span> said
    
    <span class="flask-moment" data-timestamp="2016-12-29T01:16:56Z" data-function="fromNow" data-refresh="0" style="display: none">2016-12-29T01:16:56Z</span>
  </p>
  <div>
    <p>Hi Miguel! Congratulations for this awesome tutorial!</p>
<p>When trying to enter to the application for the first time through my browser I got an "Application error".</p>
<p>I checked the logs and the problem is the following:</p>
<p>Traceback (most recent call last):<br>
2016-12-29T00:58:22.137654+00:00 app[web.1]:   File "/app/.heroku/python/bin/gunicorn", line 11, in &lt;module&gt;<br>
2016-12-29T00:58:22.137655+00:00 app[web.1]:     sys.exit(run())<br>
2016-12-29T00:58:22.137657+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/app/<a href="http://wsgiapp.py/" rel="nofollow">wsgiapp.py</a>", line 74, in run<br>
2016-12-29T00:58:22.137704+00:00 app[web.1]:     WSGIApplication("%(prog)s [OPTIONS] [APP_MODULE]").run()<br>
2016-12-29T00:58:22.137735+00:00 app[web.1]:     super(Application, self).run()<br>
2016-12-29T00:58:22.137706+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/app/<a href="http://base.py/" rel="nofollow">base.py</a>", line 185, in run<br>
2016-12-29T00:58:22.137762+00:00 app[web.1]:     Arbiter(self).run()<br>
2016-12-29T00:58:22.137736+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/app/<a href="http://base.py/" rel="nofollow">base.py</a>", line 71, in run<br>
2016-12-29T00:58:22.137764+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/<a href="http://arbiter.py/" rel="nofollow">arbiter.py</a>", line 169, in run<br>
2016-12-29T00:58:22.137819+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/<a href="http://arbiter.py/" rel="nofollow">arbiter.py</a>", line 477, in manage_workers<br>
2016-12-29T00:58:22.137801+00:00 app[web.1]:     self.manage_workers()<br>
2016-12-29T00:58:22.137881+00:00 app[web.1]:     self.spawn_workers()<br>
2016-12-29T00:58:22.137893+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/<a href="http://arbiter.py/" rel="nofollow">arbiter.py</a>", line 542, in spawn_workers<br>
2016-12-29T00:58:22.137960+00:00 app[web.1]:     time.sleep(0.1 * random.random())<br>
2016-12-29T00:58:22.137972+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/<a href="http://arbiter.py/" rel="nofollow">arbiter.py</a>", line 209, in handle_chld<br>
2016-12-29T00:58:22.138010+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/<a href="http://arbiter.py/" rel="nofollow">arbiter.py</a>", line 459, in reap_workers<br>
2016-12-29T00:58:22.138008+00:00 app[web.1]:     self.reap_workers()<br>
2016-12-29T00:58:22.138085+00:00 app[web.1]:     raise HaltServer(reason, self.WORKER_BOOT_ERROR)<br>
2016-12-29T00:58:22.138138+00:00 app[web.1]: gunicorn.errors.HaltServer: &lt;HaltServer 'Worker failed to boot.' 3&gt;<br>
2016-12-29T00:58:29.415345+00:00 app[web.1]: Traceback (most recent call last):<br>
2016-12-29T00:58:29.415371+00:00 app[web.1]:   File "/app/.heroku/python/bin/gunicorn", line 11, in &lt;module&gt;<br>
2016-12-29T00:58:29.415372+00:00 app[web.1]:     sys.exit(run())<br>
2016-12-29T00:58:29.415373+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/app/<a href="http://wsgiapp.py/" rel="nofollow">wsgiapp.py</a>", line 74, in run<br>
2016-12-29T00:58:29.415408+00:00 app[web.1]:     WSGIApplication("%(prog)s [OPTIONS] [APP_MODULE]").run()</p>
<p>I tried my best but I have no idea of what the problem is or how to solve it. I would be glad if you could help me with this because it is the very last step! Thank you so much!</p>
<p>Manuel Ramos Calderón</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#116</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2016-12-30T06:42:35Z" data-function="fromNow" data-refresh="0" style="display: none">2016-12-30T06:42:35Z</span>
  </p>
  <div>
    <p>@Manuel: All your log is saying is that gunicorn was unable to boot your application. Try running the same command you have on your Procfile locally and see if that fails too. Also check if there are any previous errors in the log that are in the application's source files. This stack trace that you captured appears to be downstream of the real problem.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/11e3d60030ed5f4c7878b8c1fcb337a1?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#117</span> <span class="badge text-bg-warning">Manuel Ramos</span> said
    
    <span class="flask-moment" data-timestamp="2016-12-30T22:32:03Z" data-function="fromNow" data-refresh="0" style="display: none">2016-12-30T22:32:03Z</span>
  </p>
  <div>
    <p>Hello, Miguel! Thanks, I solved the problem with gunicorn and now the app runs with the exact same command that is on the Procfile. So, I committed to github and updated on heroku. Now, instead of the "Application error" I was getting before, now I get a big: "Internal Server Error" on my browser. You can check it by going to: <a href="https://microblog-mses.herokuapp.com/" rel="nofollow">https://microblog-mses.herokuapp.com</a></p>
<p>The stack trace is pretty long, and as I don't know where the error is I'll post it entirely:<br>
2016-12-30T22:22:49.692076+00:00 app[web.1]:   File "/app/app/<a href="http://views.py/" rel="nofollow">views.py</a>", line 32, in before_request<br>
2016-12-30T22:22:49.692076+00:00 app[web.1]:     db.session.add(g.user)<br>
2016-12-30T22:22:49.692077+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/sqlalchemy/orm/<a href="http://scoping.py/" rel="nofollow">scoping.py</a>", line 150, in do<br>
2016-12-30T22:22:49.692078+00:00 app[web.1]:     return getattr(self.registry(), name)(<em>args, </em><em>kwargs)<br>
2016-12-30T22:22:49.692079+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/sqlalchemy/orm/<a href="http://session.py/" rel="nofollow">session.py</a>", line 1490, in add<br>
2016-12-30T22:22:49.692079+00:00 app[web.1]:     raise exc.UnmappedInstanceError(instance)<br>
2016-12-30T22:22:49.692080+00:00 app[web.1]: UnmappedInstanceError: Class 'werkzeug.local.LocalProxy' is not mapped<br>
2016-12-30T22:22:55.218314+00:00 app[web.1]: Traceback (most recent call last):<br>
2016-12-30T22:22:55.218330+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/logging/<a href="http://handlers.py/" rel="nofollow">handlers.py</a>", line 930, in emit<br>
2016-12-30T22:22:55.218372+00:00 app[web.1]:     smtp = smtplib.SMTP(self.mailhost, port, timeout=self._timeout)<br>
2016-12-30T22:22:55.218388+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/<a href="http://smtplib.py/" rel="nofollow">smtplib.py</a>", line 256, in <strong>init</strong><br>
2016-12-30T22:22:55.218418+00:00 app[web.1]:     (code, msg) = self.connect(host, port)<br>
2016-12-30T22:22:55.218433+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/<a href="http://smtplib.py/" rel="nofollow">smtplib.py</a>", line 317, in connect<br>
2016-12-30T22:22:55.218460+00:00 app[web.1]:     (code, msg) = self.getreply()<br>
2016-12-30T22:22:55.218475+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/<a href="http://smtplib.py/" rel="nofollow">smtplib.py</a>", line 365, in getreply<br>
2016-12-30T22:22:55.218513+00:00 app[web.1]:     + str(e))<br>
2016-12-30T22:22:55.218531+00:00 app[web.1]: SMTPServerDisconnected: Connection unexpectedly closed: timed out<br>
2016-12-30T22:22:55.218533+00:00 app[web.1]: Logged from file <a href="http://app.py/" rel="nofollow">app.py</a>, line 1423<br>
2016-12-30T22:22:55.218853+00:00 app[web.1]: Exception on /favicon.ico [GET]<br>
2016-12-30T22:22:55.218855+00:00 app[web.1]: Traceback (most recent call last):<br>
2016-12-30T22:22:55.218856+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1817, in wsgi_app<br>
2016-12-30T22:22:55.218857+00:00 app[web.1]:     response = self.full_dispatch_request()<br>
2016-12-30T22:22:55.218858+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1477, in full_dispatch_request<br>
2016-12-30T22:22:55.218859+00:00 app[web.1]:     rv = self.handle_user_exception(e)<br>
2016-12-30T22:22:55.218859+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1381, in handle_user_exception<br>
2016-12-30T22:22:55.218860+00:00 app[web.1]:     reraise(exc_type, exc_value, tb)<br>
2016-12-30T22:22:55.218861+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1473, in full_dispatch_request<br>
2016-12-30T22:22:55.218861+00:00 app[web.1]:     rv = self.preprocess_request()<br>
2016-12-30T22:22:55.218862+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1666, in preprocess_request<br>
2016-12-30T22:22:55.218863+00:00 app[web.1]:     rv = func()<br>
2016-12-30T22:22:55.218863+00:00 app[web.1]:   File "/app/app/<a href="http://views.py/" rel="nofollow">views.py</a>", line 32, in before_request<br>
2016-12-30T22:22:55.218864+00:00 app[web.1]:     db.session.add(g.user)<br>
2016-12-30T22:22:55.218865+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/sqlalchemy/orm/<a href="http://scoping.py/" rel="nofollow">scoping.py</a>", line 150, in do<br>
2016-12-30T22:22:55.218865+00:00 app[web.1]:     return getattr(self.registry(), name)(</em>args, <strong>kwargs)<br>
2016-12-30T22:22:55.218866+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/sqlalchemy/orm/<a href="http://session.py/" rel="nofollow">session.py</a>", line 1490, in add<br>
2016-12-30T22:22:55.218867+00:00 app[web.1]:     raise exc.UnmappedInstanceError(instance)<br>
2016-12-30T22:22:55.218867+00:00 app[web.1]: UnmappedInstanceError: Class 'werkzeug.local.LocalProxy' is not mapped<br>
2016-12-30T22:23:07.940696+00:00 app[web.1]: Traceback (most recent call last):<br>
2016-12-30T22:23:07.940722+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/logging/<a href="http://handlers.py/" rel="nofollow">handlers.py</a>", line 930, in emit<br>
2016-12-30T22:23:07.940759+00:00 app[web.1]:     smtp = smtplib.SMTP(self.mailhost, port, timeout=self._timeout)<br>
2016-12-30T22:23:07.940762+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/<a href="http://smtplib.py/" rel="nofollow">smtplib.py</a>", line 256, in <strong>init</strong><br>
2016-12-30T22:23:07.940799+00:00 app[web.1]:     (code, msg) = self.connect(host, port)<br>
2016-12-30T22:23:07.940802+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/<a href="http://smtplib.py/" rel="nofollow">smtplib.py</a>", line 317, in connect<br>
2016-12-30T22:23:07.940841+00:00 app[web.1]:     (code, msg) = self.getreply()<br>
2016-12-30T22:23:07.940844+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/<a href="http://smtplib.py/" rel="nofollow">smtplib.py</a>", line 365, in getreply<br>
2016-12-30T22:23:07.940874+00:00 app[web.1]:     + str(e))<br>
2016-12-30T22:23:07.940903+00:00 app[web.1]: SMTPServerDisconnected: Connection unexpectedly closed: timed out<br>
2016-12-30T22:23:07.940906+00:00 app[web.1]: Logged from file <a href="http://app.py/" rel="nofollow">app.py</a>, line 1423<br>
2016-12-30T22:23:07.941156+00:00 app[web.1]: Exception on / [GET]<br>
2016-12-30T22:23:07.941158+00:00 app[web.1]: Traceback (most recent call last):<br>
2016-12-30T22:23:07.941159+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1817, in wsgi_app<br>
2016-12-30T22:23:07.941159+00:00 app[web.1]:     response = self.full_dispatch_request()<br>
2016-12-30T22:23:07.941161+00:00 app[web.1]:     rv = self.handle_user_exception(e)<br>
2016-12-30T22:23:07.941160+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1477, in full_dispatch_request<br>
2016-12-30T22:23:07.941162+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1381, in handle_user_exception<br>
2016-12-30T22:23:07.941162+00:00 app[web.1]:     reraise(exc_type, exc_value, tb)<br>
2016-12-30T22:23:07.941163+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1473, in full_dispatch_request<br>
2016-12-30T22:23:07.941163+00:00 app[web.1]:     rv = self.preprocess_request()<br>
2016-12-30T22:23:07.941164+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1666, in preprocess_request<br>
2016-12-30T22:23:07.941165+00:00 app[web.1]:     rv = func()<br>
2016-12-30T22:23:07.941166+00:00 app[web.1]:   File "/app/app/<a href="http://views.py/" rel="nofollow">views.py</a>", line 32, in before_request<br>
2016-12-30T22:23:07.941166+00:00 app[web.1]:     db.session.add(g.user)<br>
2016-12-30T22:23:07.941167+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/sqlalchemy/orm/<a href="http://scoping.py/" rel="nofollow">scoping.py</a>", line 150, in do<br>
2016-12-30T22:23:07.941168+00:00 app[web.1]:     return getattr(self.registry(), name)(*args, </strong>kwargs)<br>
2016-12-30T22:23:07.941168+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/sqlalchemy/orm/<a href="http://session.py/" rel="nofollow">session.py</a>", line 1490, in add<br>
2016-12-30T22:23:07.941169+00:00 app[web.1]:     raise exc.UnmappedInstanceError(instance)<br>
2016-12-30T22:23:07.941170+00:00 app[web.1]: UnmappedInstanceError: Class 'werkzeug.local.LocalProxy' is not mapped<br>
2016-12-30T22:23:13.168557+00:00 app[web.1]: Traceback (most recent call last):<br>
2016-12-30T22:23:13.168570+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/logging/<a href="http://handlers.py/" rel="nofollow">handlers.py</a>", line 930, in emit<br>
2016-12-30T22:23:13.168571+00:00 app[web.1]:     smtp = smtplib.SMTP(self.mailhost, port, timeout=self._timeout)<br>
2016-12-30T22:23:13.168573+00:00 app[web.1]:     (code, msg) = self.connect(host, port)<br>
2016-12-30T22:23:13.168572+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/<a href="http://smtplib.py/" rel="nofollow">smtplib.py</a>", line 256, in <strong>init</strong><br>
2016-12-30T22:23:13.168573+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/<a href="http://smtplib.py/" rel="nofollow">smtplib.py</a>", line 317, in connect<br>
2016-12-30T22:23:13.168574+00:00 app[web.1]:     (code, msg) = self.getreply()<br>
2016-12-30T22:23:13.168575+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/<a href="http://smtplib.py/" rel="nofollow">smtplib.py</a>", line 365, in getreply<br>
2016-12-30T22:23:13.168576+00:00 app[web.1]:     + str(e))<br>
2016-12-30T22:23:13.168577+00:00 app[web.1]: SMTPServerDisconnected: Connection unexpectedly closed: timed out<br>
2016-12-30T22:23:13.168577+00:00 app[web.1]: Logged from file <a href="http://app.py/" rel="nofollow">app.py</a>, line 1423<br>
2016-12-30T22:23:13.168578+00:00 app[web.1]: Exception on /favicon.ico [GET]<br>
2016-12-30T22:23:13.168579+00:00 app[web.1]: Traceback (most recent call last):<br>
2016-12-30T22:23:13.168580+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1817, in wsgi_app<br>
2016-12-30T22:23:13.168580+00:00 app[web.1]:     response = self.full_dispatch_request()<br>
2016-12-30T22:23:13.168582+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1477, in full_dispatch_request<br>
2016-12-30T22:23:13.168582+00:00 app[web.1]:     rv = self.handle_user_exception(e)<br>
2016-12-30T22:23:13.168583+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1381, in handle_user_exception<br>
2016-12-30T22:23:13.168584+00:00 app[web.1]:     reraise(exc_type, exc_value, tb)<br>
2016-12-30T22:23:13.168585+00:00 app[web.1]:     rv = self.preprocess_request()<br>
2016-12-30T22:23:13.168584+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1473, in full_dispatch_request<br>
2016-12-30T22:23:13.168586+00:00 app[web.1]:     rv = func()<br>
2016-12-30T22:23:13.168587+00:00 app[web.1]:   File "/app/app/<a href="http://views.py/" rel="nofollow">views.py</a>", line 32, in before_request<br>
2016-12-30T22:23:13.168586+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/<a href="http://app.py/" rel="nofollow">app.py</a>", line 1666, in preprocess_request<br>
2016-12-30T22:23:13.168588+00:00 app[web.1]:     db.session.add(g.user)<br>
2016-12-30T22:23:13.168589+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/sqlalchemy/orm/<a href="http://scoping.py/" rel="nofollow">scoping.py</a>", line 150, in do<br>
2016-12-30T22:23:13.168589+00:00 app[web.1]:     return getattr(self.registry(), name)(<em>args, </em>*kwargs)<br>
2016-12-30T22:23:13.168590+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/sqlalchemy/orm/<a href="http://session.py/" rel="nofollow">session.py</a>", line 1490, in add<br>
2016-12-30T22:23:13.168591+00:00 app[web.1]:     raise exc.UnmappedInstanceError(instance)<br>
2016-12-30T22:23:13.168591+00:00 app[web.1]: UnmappedInstanceError: Class 'werkzeug.local.LocalProxy' is not mapped</p>
<p>I hope this is the last time I need to disturb you with this, but as I followed the entire tutorial (and it took me several days...) I would like to see the final results uploaded somewhere :D</p>
<p>Manuel Ramos Calderón</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#118</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2016-12-31T01:44:45Z" data-function="fromNow" data-refresh="0" style="display: none">2016-12-31T01:44:45Z</span>
  </p>
  <div>
    <p>@Manuel: this error is in your application. In file <a href="http://views.py/" rel="nofollow">views.py</a>, line 32 you are adding "g.user" to a database session. SQLAlchemy complains that this "g.user" object is a LocalProxy instance, not a model. Somewhere above that line, you are making a wrong assignments to g.user. If you are using Flask-Login and have something like "g.user = current_user", then change it to "g.user = current_user._get_current_object()" and hopefully that'll work for you.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/6cb2e7e8acf6589e6156f4e3c20da9c0?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#119</span> <span class="badge text-bg-warning">Bahrom</span> said
    
    <span class="flask-moment" data-timestamp="2017-02-02T05:30:20Z" data-function="fromNow" data-refresh="0" style="display: none">2017-02-02T05:30:20Z</span>
  </p>
  <div>
    <p>"heroku addons:add heroku-postgresql:dev" is now "heroku addons:add heroku-postgresql:hobby-dev"</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/0702dc06724582d5c9a2fade9aaebcd8?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#120</span> <span class="badge text-bg-warning">Renner</span> said
    
    <span class="flask-moment" data-timestamp="2017-02-26T04:27:20Z" data-function="fromNow" data-refresh="0" style="display: none">2017-02-26T04:27:20Z</span>
  </p>
  <div>
    <p>On "Deploying the Application", shouldn't you use "git push heroku version-0.18", instead of "git push heroku master"?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#121</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2017-02-26T06:24:20Z" data-function="fromNow" data-refresh="0" style="display: none">2017-02-26T06:24:20Z</span>
  </p>
  <div>
    <p>@Renner: Yes, thanks. I corrected the text.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/d53b16b4d1bbd730255f8406b4883519?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#122</span> <span class="badge text-bg-warning">Revenn</span> said
    
    <span class="flask-moment" data-timestamp="2017-03-18T20:37:04Z" data-function="fromNow" data-refresh="0" style="display: none">2017-03-18T20:37:04Z</span>
  </p>
  <div>
    <p>Hello Miguel,<br>
Great tutorial! Thank you so much for this awesome piece of knowledge.<br>
Btw. this heroku not working like it should. I have Mac OS, I did almost everything but when I went to step:<br>
$ heroku run init<br>
By terminal app said something like:<br>
Running init on ⬢ app_testing... up, run.3533 (Free)<br>
bash: init: command not found<br>
And stop executing this... What's going on?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#123</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2017-03-19T07:30:21Z" data-function="fromNow" data-refresh="0" style="display: none">2017-03-19T07:30:21Z</span>
  </p>
  <div>
    <p>@Revenn: it's possible that Heroku has made changes to the run command. Try issuing "heroku run python <a href="http://db_create.py/" rel="nofollow">db_create.py</a>". Basically I have replaced "init" with the actual command that this task is supposed to run.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/a7525f9281d6891726edd91d34680aad?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#124</span> <span class="badge text-bg-warning">admirito</span> said
    
    <span class="flask-moment" data-timestamp="2017-04-28T09:06:27Z" data-function="fromNow" data-refresh="0" style="display: none">2017-04-28T09:06:27Z</span>
  </p>
  <div>
    <p>@Revenn, @Miguel: heroku has not changed the run command. The problem is that it only deploy the "master" branch and ignore all the other branches. So, you have to push the repo with this command: "git push heroku version-0.18:master".<br>
And one another problem is in the Procfile: "web: gunicorn runp-heroku:app" but the app directory name is "app" so I have modified the Procfile: "web: gunicorn app:app".</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/17c254fc80dd6a119bb0b96916d80d46?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#125</span> <span class="badge text-bg-warning">Shang Nan</span> said
    
    <span class="flask-moment" data-timestamp="2017-06-29T09:25:19Z" data-function="fromNow" data-refresh="0" style="display: none">2017-06-29T09:25:19Z</span>
  </p>
  <div>
    <p>Hello, I'm so glad I find your tutorial as my first flask practice. And I have a problem in the final step to deploy the app on heroku. <br>
I use python3, and I used the guess_language package from <a href="https://bitbucket.org/spirit/guess_language/downloads/geuss_language-spirit-0.5a4.tar.bz2" rel="nofollow">https://bitbucket.org/spirit/guess_language/downloads/geuss_language-spirit-0.5a4.tar.bz2</a><br>
and I want to know how can I specify this package in my requirements.txt file so I can seccessfully push it to heroku.</p>
  </div>
</div>
    </li>
    
  </ul>
</div>

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item"><a class="page-link" href="1.html#comments">&laquo;&laquo;</a></li>
    <li class="page-item"><a class="page-link" href="4.html#comments">&laquo;</a></li>
    <li class="page-item"><a class="page-link" href="6.html#comments">&raquo;</a></li>
    <li class="page-item"><a class="page-link" href="0.html#comments">&raquo;&raquo;</a></li>
  </ul>
</nav>



<div id="comment-form">
  <h3>Leave a Comment</h3>

  
  
  

  
<form action="#comment-form" method="post">
  <input id="url" name="url" type="hidden" value="">
<input id="csrf_token" name="csrf_token" type="hidden" value="IjQyYjY5YzZlNTcyYjFkMTVlZGRkOWJjYjA3ZmFlYWFiNTg3YmU5ODki.ZxdnGA.gLzQDWp1OOy3XsYfXExJDKCkeTk">
    
  <div class="mb-3">
    <label class="form-label" for="name">Name</label>
    <div class="input-group has-validation">
      <input class="form-control" id="name" name="name" required type="text" value="">
    </div>
  </div>

    
    
  <div class="mb-3">
    <label class="form-label" for="email">Email</label>
    <div class="input-group has-validation">
      <input class="form-control" id="email" name="email" required type="text" value="">
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="comment">Comment</label>
    <div class="input-group has-validation">
      <textarea class="form-control" id="comment" name="comment" required>
</textarea>
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="captcha">Captcha</label>
    <div class="input-group has-validation">
      
<script src='https://www.google.com/recaptcha/api.js' async defer></script>
<div class="g-recaptcha" data-sitekey="6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S"></div>

    </div>
  </div>

    
  <input class="btn btn-primary mb-3" id="submit" name="submit" type="submit" value="Submit">

      
</form>

</div>


</div>

      </div>
    </div>
    
    <div class="col-md-4">
      <div id="sidebar">
        
          
  



<div class="card">
  
  
  <div class="card-header">Flask Web Development, 2nd Edition</div>
  <a class="card-book-cover" href="https://amzn.to/3lE2mok">
    <img src="../../../static/flask2e-book-cover-small.png" alt="Flask Web Development, 2nd Edition">
  </a>
  <div class="card-body">
    <p class="card-text">If you want to learn modern web development techniques with Python and Flask, you may find the second edition of my <a href="https://amzn.to/3lE2mok">O'Reilly book</a> useful.</p>
  </div>
  <div class="card-body">
    <a class="card-link" href="https://amzn.to/3lE2mok">Click here to get this Book!</a><br />
  </div>

  
</div>
        
        <div class="card">
  <div class="card-header">About Miguel</div>
  <div class="card-body">
    <img style="float: right; margin: 0px 8px 8px 0px; padding: 4px; border: 1px solid #ccc;" src="../../../static/miguel.jpg" />
    <p class="card-text">Welcome to my blog!</p>
    <p class="card-text">I'm a software engineer and technical writer, currently living in Drogheda, Ireland.</p>
    <p class="card-text">You can also find me on <a href="https://twitter.com/miguelgrinberg">Twitter</a>, <a href="https://mstdn.social/@miguelgrinberg">Mastodon</a>, <a href="https://github.com/miguelgrinberg">Github</a>, <a href="http://www.linkedin.com/in/miguelgrinberg">LinkedIn</a>, <a href="https://youtube.com/miguelgrinberg">YouTube</a>, <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a> and <a href="https://patreon.com/miguelgrinberg">Patreon</a>.</p>
    <p class="card-text">Thank you for visiting!</p>
  </div>
</div>
        
        <div class="card" id="categories">
  <div class="card-header">Categories</div>
  <div class="card-body">
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AI/feed"><img src="../../../static/rss-small.png" title="AI RSS Feed" label="AI RSS Feed" alt="AI RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AI" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AI" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AWS/feed"><img src="../../../static/rss-small.png" title="AWS RSS Feed" label="AWS RSS Feed" alt="AWS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AWS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AWS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Arduino/feed"><img src="../../../static/rss-small.png" title="Arduino RSS Feed" label="Arduino RSS Feed" alt="Arduino RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Arduino" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Arduino" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Authentication/feed"><img src="../../../static/rss-small.png" title="Authentication RSS Feed" label="Authentication RSS Feed" alt="Authentication RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Authentication" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Authentication" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Blog/feed"><img src="../../../static/rss-small.png" title="Blog RSS Feed" label="Blog RSS Feed" alt="Blog RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Blog" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Blog" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/C++/feed"><img src="../../../static/rss-small.png" title="C++ RSS Feed" label="C++ RSS Feed" alt="C++ RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/C++" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="C++" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/CSS/feed"><img src="../../../static/rss-small.png" title="CSS RSS Feed" label="CSS RSS Feed" alt="CSS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/CSS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="CSS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Cloud/feed"><img src="../../../static/rss-small.png" title="Cloud RSS Feed" label="Cloud RSS Feed" alt="Cloud RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Cloud" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Cloud" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Database/feed"><img src="../../../static/rss-small.png" title="Database RSS Feed" label="Database RSS Feed" alt="Database RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Database" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Database" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Docker/feed"><img src="../../../static/rss-small.png" title="Docker RSS Feed" label="Docker RSS Feed" alt="Docker RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Docker" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Docker" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Filmmaking/feed"><img src="../../../static/rss-small.png" title="Filmmaking RSS Feed" label="Filmmaking RSS Feed" alt="Filmmaking RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Filmmaking" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Filmmaking" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Flask/feed"><img src="../../../static/rss-small.png" title="Flask RSS Feed" label="Flask RSS Feed" alt="Flask RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" /> <small><em>126</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Games/feed"><img src="../../../static/rss-small.png" title="Games RSS Feed" label="Games RSS Feed" alt="Games RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Games" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Games" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Heroku/feed"><img src="../../../static/rss-small.png" title="Heroku RSS Feed" label="Heroku RSS Feed" alt="Heroku RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Heroku" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Heroku" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/IoT/feed"><img src="../../../static/rss-small.png" title="IoT RSS Feed" label="IoT RSS Feed" alt="IoT RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/IoT" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="IoT" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/JavaScript/feed"><img src="../../../static/rss-small.png" title="JavaScript RSS Feed" label="JavaScript RSS Feed" alt="JavaScript RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/JavaScript" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="JavaScript" /> <small><em>35</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/MicroPython/feed"><img src="../../../static/rss-small.png" title="MicroPython RSS Feed" label="MicroPython RSS Feed" alt="MicroPython RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/MicroPython" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="MicroPython" /> <small><em>9</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microdot/feed"><img src="../../../static/rss-small.png" title="Microdot RSS Feed" label="Microdot RSS Feed" alt="Microdot RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microdot" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microdot" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microservices/feed"><img src="../../../static/rss-small.png" title="Microservices RSS Feed" label="Microservices RSS Feed" alt="Microservices RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microservices" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microservices" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Movie Reviews/feed"><img src="../../../static/rss-small.png" title="Movie Reviews RSS Feed" label="Movie Reviews RSS Feed" alt="Movie Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Movie Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Movie Reviews" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/OpenStack/feed"><img src="../../../static/rss-small.png" title="OpenStack RSS Feed" label="OpenStack RSS Feed" alt="OpenStack RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/OpenStack" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="OpenStack" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Personal/feed"><img src="../../../static/rss-small.png" title="Personal RSS Feed" label="Personal RSS Feed" alt="Personal RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Personal" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Personal" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Photography/feed"><img src="../../../static/rss-small.png" title="Photography RSS Feed" label="Photography RSS Feed" alt="Photography RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Photography" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Photography" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Product Reviews/feed"><img src="../../../static/rss-small.png" title="Product Reviews RSS Feed" label="Product Reviews RSS Feed" alt="Product Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Product Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Product Reviews" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Programming/feed"><img src="../../../static/rss-small.png" title="Programming RSS Feed" label="Programming RSS Feed" alt="Programming RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" /> <small><em>187</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Project Management/feed"><img src="../../../static/rss-small.png" title="Project Management RSS Feed" label="Project Management RSS Feed" alt="Project Management RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Project Management" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Project Management" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Python/feed"><img src="../../../static/rss-small.png" title="Python RSS Feed" label="Python RSS Feed" alt="Python RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" /> <small><em>169</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/REST/feed"><img src="../../../static/rss-small.png" title="REST RSS Feed" label="REST RSS Feed" alt="REST RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/REST" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="REST" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Rackspace/feed"><img src="../../../static/rss-small.png" title="Rackspace RSS Feed" label="Rackspace RSS Feed" alt="Rackspace RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Rackspace" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Rackspace" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Raspberry Pi/feed"><img src="../../../static/rss-small.png" title="Raspberry Pi RSS Feed" label="Raspberry Pi RSS Feed" alt="Raspberry Pi RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Raspberry Pi" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Raspberry Pi" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/React/feed"><img src="../../../static/rss-small.png" title="React RSS Feed" label="React RSS Feed" alt="React RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/React" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="React" /> <small><em>18</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Robotics/feed"><img src="../../../static/rss-small.png" title="Robotics RSS Feed" label="Robotics RSS Feed" alt="Robotics RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Robotics" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Robotics" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Security/feed"><img src="../../../static/rss-small.png" title="Security RSS Feed" label="Security RSS Feed" alt="Security RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Security" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Security" /> <small><em>12</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Video/feed"><img src="../../../static/rss-small.png" title="Video RSS Feed" label="Video RSS Feed" alt="Video RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Video" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Video" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/WebSocket/feed"><img src="../../../static/rss-small.png" title="WebSocket RSS Feed" label="WebSocket RSS Feed" alt="WebSocket RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/WebSocket" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="WebSocket" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Webcast/feed"><img src="../../../static/rss-small.png" title="Webcast RSS Feed" label="Webcast RSS Feed" alt="Webcast RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Webcast" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Webcast" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Windows/feed"><img src="../../../static/rss-small.png" title="Windows RSS Feed" label="Windows RSS Feed" alt="Windows RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Windows" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Windows" /> <small><em>1</em></small>
      </form>
    </div>
    
  </div>
</div>
        
      </div>
    </div>
    
  </div>
  <div id="footer">
    
    <p>&copy; 2012-<script type="text/javascript">document.write(new Date().getFullYear());</script> by Miguel Grinberg. All rights reserved. <a href="mailto:webmaster _at_ miguelgrinberg _dot_ com">Questions?</a></p>
  </div>
</div>

  
    <script src="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../../static/prettify.js"></script>
  <script src="../../../../cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment-with-locales.min.js" integrity="sha512-42PE0rd+wZ2hNXftlM78BSehIGzezNeQuzihiBCvUEB3CVxHvsShF86wBWwQORNxNINlBPuq7rG4WWhNiTVHFg==" crossorigin="anonymous"></script>

<script>
moment.locale("en");
function flask_moment_render(elem) {{
    const timestamp = moment(elem.dataset.timestamp);
    const func = elem.dataset.function;
    const format = elem.dataset.format;
    const timestamp2 = elem.dataset.timestamp2;
    const no_suffix = elem.dataset.nosuffix;
    const units = elem.dataset.units;
    let args = [];
    if (format)
        args.push(format);
    if (timestamp2)
        args.push(moment(timestamp2));
    if (no_suffix)
        args.push(no_suffix);
    if (units)
        args.push(units);
    elem.textContent = timestamp[func].apply(timestamp, args);
    elem.classList.remove('flask-moment');
    elem.style.display = "";
}}
function flask_moment_render_all() {{
    const moments = document.querySelectorAll('.flask-moment');
    moments.forEach(function(moment) {{
        flask_moment_render(moment);
        const refresh = moment.dataset.refresh;
        if (refresh && refresh > 0) {{
            (function(elem, interval) {{
                setInterval(function() {{
                    flask_moment_render(elem);
                }}, interval);
            }})(moment, refresh);
        }}
    }})
}}
document.addEventListener("DOMContentLoaded", flask_moment_render_all);
</script>

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-20EHZP9GRZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-20EHZP9GRZ');
  </script>
  
  <script type="text/javascript">
    function setThemeUI() {
      document.getElementById('select-theme-auto').classList.remove('active');
      document.getElementById('select-theme-light').classList.remove('active');
      document.getElementById('select-theme-dark').classList.remove('active');
      const theme = getPreferredTheme();
      const actualTheme = document.documentElement.getAttribute('data-bs-theme', 'light');
      document.getElementById('select-theme-' + theme).classList.add('active');
      document.getElementById('current-theme').href.baseVal = `#icon-theme-${actualTheme}`;
    };

    function updateTheme(theme) {
      if (theme === 'auto') {
        localStorage.removeItem('theme')
      }
      else {
        localStorage.setItem('theme', theme)
      }
      setTheme(getPreferredTheme());
    }

    setThemeUI();

    const darkModePreference = window.matchMedia("(prefers-color-scheme: dark)");
    darkModePreference.addEventListener("change", e => {
      if (getPreferredTheme() === 'auto') {
        setTheme('auto');
      }
    });

    document.addEventListener("DOMContentLoaded", () => {
      // add prettyprint class to all <pre><code></code></pre> blocks
      let prettify = false;
      document.querySelectorAll('div.post-body pre code').forEach((code) => {
        code.parentNode.classList.add('prettyprint');
        prettify = true;
      });
      prettyPrint();
    });
  </script>

  </body>

<!-- Mirrored from blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy/page/5 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 08:50:43 GMT -->
</html>