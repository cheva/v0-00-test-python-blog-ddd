<!doctype html>
<html lang="en">
  
<!-- Mirrored from blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xx-some-javascript-magic-2018/page/2 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 08:46:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
  <script type="text/javascript">
    function getPreferredTheme() {
      const storedTheme = localStorage.getItem('theme')
      if (storedTheme) {
        return storedTheme
      }
      return 'auto';
    }

    function setTheme(theme) {
      if (theme === 'auto') {
        theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
      }
      document.documentElement.setAttribute('data-bs-theme', theme);
    };

    setTheme(getPreferredTheme());
  </script>
  
    <title>
  
    The Flask Mega-Tutorial Part XX: Some JavaScript Magic (2018) - miguelgrinberg.com
  
</title>
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="description" content="miguelgrinberg.com">
  <meta name="copyright" content="Copyright (c) 2012-2024 Miguel Grinberg">
  <meta name="author" content="Miguel Grinberg">
  
  <meta name="keywords" content="flask, python, programming, javascript, client-side, jquery, bootstrap">
  
  
  <link rel="canonical" href="../../the-flask-mega-tutorial-part-xx-some-javascript-magic-2018.html">
  

  
    <link href="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&amp;display=swap" rel="stylesheet">

  <link href="../../../static/tomorrow.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/tomorrow-night.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/social.css" rel="stylesheet" type="text/css" />
  <link href="../../../static/style_20231230.css" rel="stylesheet" type="text/css" />

  <link rel="shortcut icon" href="https://blog.miguelgrinberg.com/static/favicon.ico">
  <link rel="alternate" type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed" title="miguelgrinberg.com RSS feed">

    <meta property="og:title" content="The Flask Mega-Tutorial Part XX: Some JavaScript Magic (2018)">
    <meta property="og:description" content="(Great news! There is a new version of this tutorial!)This is the twentieth installment of the Flask Mega-Tutorial series, in which I&#39;m going to add a nice popup when you hover your mouse over a…">
    <meta property="og:image" content="https://blog.miguelgrinberg.com/static/cards/the-flask-mega-tutorial-part-xx-some-javascript-magic-2018.jpg">
    <meta property="og:url" content="https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xx-some-javascript-magic-2018">
    <meta name="twitter:title" content="The Flask Mega-Tutorial Part XX: Some JavaScript Magic (2018)">
    <meta name="twitter:description" content="(Great news! There is a new version of this tutorial!)This is the twentieth installment of the Flask Mega-Tutorial series, in which I&#39;m going to add a nice popup when you hover your mouse over a…">
    <meta name="twitter:image" content="https://blog.miguelgrinberg.com/static/cards/the-flask-mega-tutorial-part-xx-some-javascript-magic-2018.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@miguelgrinberg">

  </head>
  <body>
    <svg style="display: none" version="2.0">
      <defs>
        <symbol id="icon-theme-auto" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-circle-half" viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 0 8 1zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16"/>
        </symbol>
        <symbol id="icon-theme-light" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-brightness-high-fill" viewBox="0 0 16 16">
          <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </symbol>
        <symbol id="icon-theme-dark" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-moon-stars-fill" viewBox="0 0 16 16">
          <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278"/>
          <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
        </symbol>
      </defs>
    </svg>
<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="https://blog.miguelgrinberg.com/index">miguelgrinberg.com</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" aria-current="page" href="https://blog.miguelgrinberg.com/index">Home</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../my-courses-and-books.html">My Courses and Books</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../hire-me.html">Consulting</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../about-me.html">About Me</a></li>
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <svg width="20" height="20" version="2.0"><use id="current-theme" href="#icon-theme-light"></svg>
          </a>
          <ul class="dropdown-menu">
            <li>
              <a id="select-theme-light" class="dropdown-item" href="javascript:updateTheme('light')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-light"></svg>&nbsp; Light Mode
              </a>
            </li>
            <li>
              <a id="select-theme-dark" class="dropdown-item" href="javascript:updateTheme('dark')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-dark"></svg>&nbsp; Dark Mode
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a id="select-theme-auto" class="dropdown-item" href="javascript:updateTheme('auto')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-auto"></svg>&nbsp; System Default
              </a>
            </li>
          </ul>
        </li>
        
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item social-icons">
          <a type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed"><img src="../../../static/social/rss.png" alt="RSS Feed" title="RSS Feed" /></a>
          <a href="https://twitter.com/miguelgrinberg"><img src="../../../static/social/twitter.png" alt="Twitter" title="Twitter" /></a>
          <a rel="me" href="https://mstdn.social/@miguelgrinberg"><img src="../../../static/social/mastodon.png" alt="Mastodon" title="Mastodon" /></a>
          <a href="http://github.com/miguelgrinberg"><img src="../../../static/social/github.png" alt="GitHub" title="GitHub" /></a>
          <a href="https://youtube.com/miguelgrinberg"><img src="../../../static/social/youtube.png" alt="YouTube" title="YouTube" /></a>
          <a href="http://www.linkedin.com/in/miguelgrinberg"><img src="../../../static/social/linkedin.png" alt="LinkedIn" title="LinkedIn" /></a>
          <a href="https://patreon.com/miguelgrinberg"><img src="../../../static/social/patreon.png" alt="Patreon" title="Patreon" /></a>
          <!--<a href="https://www.facebook.com/miguelgrinbergblog"><img src="/static/social/facebook.png" alt="Facebook" title="Facebook" /></a>-->
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
  <div class="row">
    <div class="col-md-8">
      <div id="main">
        
        
        
        
        

<div class="post">

<div class="post-header">
  <h1><a href="../../the-flask-mega-tutorial-part-xx-some-javascript-magic-2018.html">The Flask Mega-Tutorial Part XX: Some JavaScript Magic (2018)</a></h1>
  <h2>
    Posted by
    <form action="https://blog.miguelgrinberg.com/author/Miguel Grinberg" method="POST">
      <input type="submit" class="btn btn-danger btn-sm" value="Miguel Grinberg" />
    </form>
    on
    <button class="btn btn-secondary btn-sm" disabled><span class="flask-moment" data-timestamp="2018-04-17T19:20:08Z" data-function="format" data-format="LL" data-refresh="0" style="display: none">2018-04-17T19:20:08Z</span></button>
    under
    
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/JavaScript" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="JavaScript" />
      </form>
    
    
  </h2>
</div>
<div class="post-body"><p><em>(Great news! There is a <a href="../../the-flask-mega-tutorial-part-i-hello-world.html">new version of this tutorial</a>!)</em></p>
<p>This is the twentieth installment of the Flask Mega-Tutorial series, in which I'm going to add a nice popup when you hover your mouse over a user's nickname.</p>
<p>For your reference, below is a list of the articles in this series.</p>
<ul>
<li><a href="../../the-flask-mega-tutorial-part-i-hello-world-2018.html">Chapter 1: Hello, World!</a></li>
<li><a href="../../the-flask-mega-tutorial-part-ii-templates-2018.html">Chapter 2: Templates</a></li>
<li><a href="../../the-flask-mega-tutorial-part-iii-web-forms-2018.html">Chapter 3: Web Forms</a></li>
<li><a href="../../the-flask-mega-tutorial-part-iv-database-2018.html">Chapter 4: Database</a></li>
<li><a href="../../the-flask-mega-tutorial-part-v-user-logins-2018.html">Chapter 5: User Logins</a></li>
<li><a href="../../the-flask-mega-tutorial-part-vi-profile-page-and-avatars-2018.html">Chapter 6: Profile Page and Avatars</a></li>
<li><a href="../../the-flask-mega-tutorial-part-vii-error-handling-2018.html">Chapter 7: Error Handling</a></li>
<li><a href="../../the-flask-mega-tutorial-part-viii-followers-2018.html">Chapter 8: Followers</a></li>
<li><a href="../../the-flask-mega-tutorial-part-ix-pagination-2018.html">Chapter 9: Pagination</a></li>
<li><a href="../../the-flask-mega-tutorial-part-x-email-support-2018.html">Chapter 10: Email Support</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xi-facelift-2018.html">Chapter 11: Facelift</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xii-dates-and-times-2018.html">Chapter 12: Dates and Times</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018.html">Chapter 13: I18n and L10n</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xiv-ajax-2018.html">Chapter 14: Ajax</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xv-a-better-application-structure-2018.html">Chapter 15: A Better Application Structure</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xvi-full-text-search-2018.html">Chapter 16: Full-Text Search</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xvii-deployment-on-linux-2018.html">Chapter 17: Deployment on Linux</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xviii-deployment-on-heroku-2018.html">Chapter 18: Deployment on Heroku</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xix-deployment-on-docker-containers-2018.html">Chapter 19: Deployment on Docker Containers</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xx-some-javascript-magic-2018.html">Chapter 20: Some JavaScript Magic</a> (this article)</li>
<li><a href="../../the-flask-mega-tutorial-part-xxi-user-notifications-2018.html">Chapter 21: User Notifications</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xxii-background-jobs-2018.html">Chapter 22: Background Jobs</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xxiii-application-programming-interfaces-apis-2018.html">Chapter 23: Application Programming Interfaces (APIs)</a></li>
</ul>
<p>Nowadays it is impossible to build a web application that doesn't use at least a little bit of JavaScript. As I'm sure you know, the reason is that JavaScript is the only language that runs natively in web browsers. In <a href="../../the-flask-mega-tutorial-part-xiv-ajax-2018.html">Chapter 14</a> you saw me add a simple JavaScript enabled link in a Flask template to provide real-time language translations of blog posts. In this chapter I'm going to dig deeper into the topic and show you another useful JavaScript trick to make the application more interesting and engaging to users.</p>
<p>A common user interface pattern for social sites in which users can interact with each other is to show a quick summary of a user in a popup panel when you hover over the user's name, anywhere it appears on the page. If you have never paid attention to this, go to Twitter, Facebook, LinkedIn, or any other major social network, and when you see a username, just leave your mouse pointer on top of it for a couple of seconds to see the popup appear. This chapter is going to be dedicated to building that feature for Microblog, of which you can see a preview below:</p>
<p><img alt="User Popup" src="../../../static/images/mega-tutorial/ch20-demo.png" /></p>
<p><em>The GitHub links for this chapter are: <a href="https://github.com/miguelgrinberg/microblog/tree/v0.20">Browse</a>, <a href="https://github.com/miguelgrinberg/microblog-2018/archive/v0.20.zip">Zip</a>, <a href="https://github.com/miguelgrinberg/microblog/compare/v0.19...v0.20">Diff</a>.</em></p>
<h2>Server-side Support</h2>
<p>Before we delve into the client-side, let's get the little bit of server work that is necessary to support these user popups out of the way. The contents of the user popup are going to be returned by a new route, which is going to be a simplified version of the existing user profile route. Here is the view function:</p>
<p class="code_title"><i>app/main/routes.py</i>: User popup view function.</p>

<pre><code class="language-python">@bp.route('/user/&lt;username&gt;/popup')
@login_required
def user_popup(username):
    user = User.query.filter_by(username=username).first_or_404()
    form = EmptyForm()
    return render_template('user_popup.html', user=user, form=form)
</code></pre>
<p>This route is going to be attached to the <em>/user/&lt;username&gt;/popup</em> URL, and will simply load the requested user and then render a template with it. The template is a shorter version of the one used for the user profile page:</p>
<p class="code_title"><i>app/templates/user_popup.html</i>: User popup template.</p>

<pre><code class="language-html">&lt;table class=&quot;table&quot;&gt;
    &lt;tr&gt;
        &lt;td width=&quot;64&quot; style=&quot;border: 0px;&quot;&gt;&lt;img src=&quot;{{ user.avatar(64) }}&quot;&gt;&lt;/td&gt;
        &lt;td style=&quot;border: 0px;&quot;&gt;
            &lt;p&gt;&lt;a href=&quot;{{ url_for('main.user', username=user.username) }}&quot;&gt;
                {{ user.username }}
            &lt;/a&gt;&lt;/p&gt;
            &lt;small&gt;
                {% if user.about_me %}&lt;p&gt;{{ user.about_me }}&lt;/p&gt;{% endif %}
                {% if user.last_seen %}
                &lt;p&gt;{{ _('Last seen on') }}: {{ moment(user.last_seen).format('lll') }}&lt;/p&gt;
                {% endif %}
                &lt;p&gt;
                    {{ _('%(count)d followers', count=user.followers.count()) }},
                    {{ _('%(count)d following', count=user.followed.count()) }}
                &lt;/p&gt;
                {% if user != current_user %}
                    {% if not current_user.is_following(user) %}
                    &lt;p&gt;
                        &lt;form action=&quot;{{ url_for('main.follow', username=user.username) }}&quot;
                              method=&quot;post&quot;&gt;
                            {{ form.hidden_tag() }}
                            {{ form.submit(value=_('Follow'),
                                           class_='btn btn-default btn-sm') }}
                        &lt;/form&gt;
                    &lt;/p&gt;
                    {% else %}
                    &lt;p&gt;
                        &lt;form action=&quot;{{ url_for('main.unfollow', username=user.username) }}&quot;
                              method=&quot;post&quot;&gt;
                            {{ form.hidden_tag() }}
                            {{ form.submit(value=_('Unfollow'),
                                           class_='btn btn-default btm-sm') }}
                        &lt;/form&gt;
                    &lt;/p&gt;
                    {% endif %}
                {% endif %}
            &lt;/small&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;
</code></pre>
<p>The JavaScript code that I will write in the following sections will invoke this route when the user hovers the mouse pointer over a username. In response the server will return the HTML content for the popup, which the client then display. When the user moves the mouse away the popup will be removed. Sounds simple, right?</p>
<p>If you want to have an idea of how the popup will look, you can now run the application, go to any user's profile page and then append <em>/popup</em> to the URL in the address bar to see a full-screen version of the popup content.</p>
<h2>Introduction to the Bootstrap Popover Component</h2>
<p>In <a href="../../the-flask-mega-tutorial-part-xi-facelift-2018.html">Chapter 11</a> I introduced you to the Bootstrap framework as a convenient way to create great looking web pages. So far, I have used only a minimal portion of this framework. Bootstrap comes bundled with many common UI elements, all of which have demos and examples in the Bootstrap documentation at <em>https://getbootstrap.com</em>. One of these components is the <a href="https://getbootstrap.com/docs/3.3/javascript/#popovers">Popover</a>, which is described in the documentation as a "small overlay of content, for housing secondary information". Exactly what I need!</p>
<p>Most bootstrap components are defined through HTML markup that references the Bootstrap CSS definitions that add the nice styling. Some of the most advanced ones also require JavaScript. The standard way in which an application includes these components in a web page is by adding the HTML in the proper place, and then for the components that need scripting support, calling a JavaScript function that initializes it or activates it. The popover component does require JavaScript support.</p>
<p>The HTML portion to do a popover is really simple, you just need to define the element that is going to trigger the popover to appear. In my case, this is going to the clickable username that appears in each blog post. The <em>app/templates/_post.html</em> sub-template has the username already defined:</p>
<pre><code class="language-html">            &lt;a href=&quot;{{ url_for('main.user', username=post.author.username) }}&quot;&gt;
                {{ post.author.username }}
            &lt;/a&gt;
</code></pre>
<p>Now according to the popover documentation, I need to invoke the <code>popover()</code> JavaScript function on each of the links like the one above that appear on the page, and this will initialize the popup. The initialization call accepts a number of options that configure the popup, including options that pass the content that you want displayed in the popup, what method to use to trigger the popup to appear or disappear (a click, hovering over the element, etc.), if the content is plain text or HTML, and a few more options that you can see in the documentation page. Unfortunately, after reading this information I ended up with more questions than answers, because this component does not appear to be designed to work in the way I need it to. The following is a list of problems I need to solve to implement this feature:</p>
<ul>
<li>There will be many username links in the page, one for each blog post displayed. I need to have a way to find all these links from JavaScript after the page is rendered, so that I can then initialize them as popovers.</li>
<li>The popover examples in the Bootstrap documentation all provide the content of the popover as a <code>data-content</code> attribute added to the target HTML element, so when the hover event is triggered, all Bootstrap needs to do is display the popup. That is really inconvenient for me, because I want to make an Ajax call to the server to get the content, and only when the server's response is received I want the popup to appear.</li>
<li>When using the "hover" mode, the popup will stay visible for as long as you keep the mouse pointer within the target element. When you move the mouse away, the popup will go away. This has the ugly side effect that if the user wants to move the mouse pointer into the popup itself, the popup will disappear. I will need to figure out a way to extend the hover behavior to also include the popup, so that the user can move into the popup and, for example, click on a link there.</li>
</ul>
<p>It is actually not that uncommon when working with browser based applications that things get complicated really fast. You have to think very specifically in terms of how the DOM elements interact with each other and make them behave in a way that gives the user a good experience.</p>
<h2>Executing a Function On Page Load</h2>
<p>It is clear that I'm going to need to run some JavaScript code as soon as each page loads. The function that I'm going to run will search for all the links to usernames in the page, and configure those with a popover component from Bootstrap.</p>
<p>The jQuery JavaScript library is loaded as a dependency of Bootstrap, so I'm going to take advantage of it. When using jQuery, you can register a function to run when the page is loaded by wrapping it inside a <code>$( ... )</code>. I can add this in the <em>app/templates/base.html</em> template, so that this runs on every page of the application:</p>
<p class="code_title"><i>app/templates/base.html</i>: Run function after page load.</p>

<pre><code class="language-html">...
&lt;script&gt;
    // ...

    $(function() {
        // write start up code here
    });
&lt;/script&gt;
</code></pre>
<p>As you see, I have added my start up function inside the <code>&lt;script&gt;</code> element in which I defined the <code>translate()</code> function in <a href="../../the-flask-mega-tutorial-part-xiv-ajax-2018.html">Chapter 14</a>.</p>
<h2>Finding DOM Elements with Selectors</h2>
<p>My first problem is to create a JavaScript function that finds all the user links in the page. This function is going to run when the page finishes loading, and when complete, will configure the hovering and popup behavior for all of them. For now I'm going to concentrate in finding the links.</p>
<p>If you recall from <a href="../../the-flask-mega-tutorial-part-xiv-ajax-2018.html">Chapter 14</a>, the HTML elements that were involved in the live translations had unique IDs. For example, a post with ID=123 had a <code>id="post123"</code> attribute added. Then using the jQuery, the expression <code>$('#post123')</code> was used in JavaScript to locate this element in the DOM. The <code>$()</code> function is extremely powerful and has a fairly sophisticated query language to search for DOM elements that is based on <a href="https://api.jquery.com/category/selectors/">CSS Selectors</a>.</p>
<p>The selector that I used for the translation feature was designed to find one specific element that had a unique identifier set as an <code>id</code> attribute. Another option to identify elements is by using the <code>class</code> attribute, which can be assigned to multiple elements in the page. For example, I could mark all the user links with a <code>class="user_popup"</code>, and then I could get the list of links from JavaScript with <code>$('.user_popup')</code> (in CSS selectors, the <code>#</code> prefix searches by ID, while the <code>.</code> prefix searches by class). The return value in this case would be a collection of all the elements that have the class.</p>
<h2>Popovers and the DOM</h2>
<p>By playing with the popover examples on the Bootstrap documentation and inspecting the DOM in the browser's debugger, I determined that Bootstrap creates the popover component as a sibling of the target element in the DOM. As I mentioned above, that affects the behavior of the hover event, which will trigger a "mouse out" as soon as the user moves the mouse away from the <code>&lt;a&gt;</code> link and into the popup itself.</p>
<p>A trick that I can use to extend the hover event to include the popover, is to make the popover a child of the target element, that way the hover event is inherited. Looking through the popover options in the documentation, this can be done by passing a parent element in the <code>container</code> option.</p>
<p>Making the popover a child of the hovered element would work well for buttons, or general <code>&lt;div&gt;</code> or <code>&lt;span&gt;</code> based elements, but in my case, the target for the popover is going to be an <code>&lt;a&gt;</code> element that displays the clickable link of a username. The problem with making the popover a child of a <code>&lt;a&gt;</code> element is that the popover will then acquire the link behavior of the <code>&lt;a&gt;</code> parent. The end result would be something like this:</p>
<pre><code class="language-html">        &lt;a href=&quot;...&quot; class=&quot;user_popup&quot;&gt;
            username
            &lt;div&gt; ... popover elements here ... &lt;/div&gt;
        &lt;/a&gt;
</code></pre>
<p>To avoid the popover being inside the <code>&lt;a&gt;</code> element, I'm going to use is another trick. I'm going to wrap the <code>&lt;a&gt;</code> element inside a <code>&lt;span&gt;</code> element, and then associate the hover event and the popover with the <code>&lt;span&gt;</code>. The resulting structure would be:</p>
<pre><code class="language-html">        &lt;span class=&quot;user_popup&quot;&gt;
            &lt;a href=&quot;...&quot;&gt;
                username
            &lt;/a&gt;
            &lt;div&gt; ... popover elements here ... &lt;/div&gt;
        &lt;/span&gt;
</code></pre>
<p>The <code>&lt;div&gt;</code> and <code>&lt;span&gt;</code> elements are invisible, so they are great elements to use to help organize and structure your DOM. The <code>&lt;div&gt;</code> element is a <em>block element</em>, sort of like a paragraph in the HTML document, while the <code>&lt;span&gt;</code> element is an <em>inline element</em>, which would compare to a word. For this case I decided to go with the <code>&lt;span&gt;</code> element, since the <code>&lt;a&gt;</code> element that I'm wrapping is also an inline element.</p>
<p>So I'm going to go ahead and refactor my <em>app/templates/_post.html</em> sub-template to include the <code>&lt;span&gt;</code> element:</p>
<p class="code_title"><i>app/templates/_post.html</i>: User popup template.</p>

<pre><code class="language-html">...
                {% set user_link %}
                    &lt;span class=&quot;user_popup&quot;&gt;
                        &lt;a href=&quot;{{ url_for('main.user', username=post.author.username) }}&quot;&gt;
                            {{ post.author.username }}
                        &lt;/a&gt;
                    &lt;/span&gt;
                {% endset %}
...
</code></pre>
<p>If you are wondering where the popover HTML elements are, the good news is that I don't have to worry about that. When I get to call the <code>popover()</code> initialization function on the <code>&lt;span&gt;</code> elements I just created, the Bootstrap framework will dynamically insert the popup component for me.</p>
<h2>Hover Events</h2>
<p>As I mentioned above, the hover behavior used by the popover component from Bootstrap is not flexible enough to accommodate my needs, but if you look at the documentation for the <code>trigger</code> option, "hover' is just one of the possible values. The one that caught my eye was the "manual" mode, in which the popover can be displayed or removed manually by making JavaScript calls. This mode will give me the freedom to implement the hover logic myself, so I'm going to use that option and implement my own hover event handlers that work the way I need them to.</p>
<p>So my next step is to attach a "hover" event to all the links in the page. Using jQuery, a hover event can be attached to any HTML element by calling <code>element.hover(handlerIn, handlerOut)</code>. If this function is called on a collection of elements, jQuery conveniently attaches the event to all of them. The two arguments are two functions, which are invoked when the user moves the mouse pointer into and out of the target element respectively.</p>
<p class="code_title"><i>app/templates/base.html</i>: Hover event.</p>

<pre><code class="language-javascript">    $(function() {
        $('.user_popup').hover(
            function(event) {
                // mouse in event handler
                var elem = $(event.currentTarget);
            },
            function(event) {
                // mouse out event handler
                var elem = $(event.currentTarget);
            }
        )
    });
</code></pre>
<p>The <code>event</code> argument is the event object, which contains useful information. In this case, I'm extracting the element that was the target of the event using the <code>event.currentTarget</code>.</p>
<p>The browser dispatches the hover event immediately after the mouse enters the affected element. In the case of a popup, you want to activate only after waiting a short period of time where the mouse stays on the element, so that when the mouse pointer briefly passes over the element but doesn't stay on it there is no popups flashing. Since the event does not come with support for a delay, this is another thing that I'm going to need to implement myself. So I'm going to add a one second timer to the "mouse in" event handler:</p>
<p class="code_title"><i>app/templates/base.html</i>: Hover delay.</p>

<pre><code class="language-javascript">    $(function() {
        var timer = null;
        $('.user_popup').hover(
            function(event) {
                // mouse in event handler
                var elem = $(event.currentTarget);
                timer = setTimeout(function() {
                    timer = null;
                    // popup logic goes here
                }, 1000);
            },
            function(event) {
                // mouse out event handler
                var elem = $(event.currentTarget);
                if (timer) {
                    clearTimeout(timer);
                    timer = null;
                }
            }
        )
    });
</code></pre>
<p>The <code>setTimeout()</code> function is available in the browser environment. It takes two arguments, a function and a time in milliseconds. The effect of <code>setTimeout()</code> is that the function is invoked after the given delay. So I added a function that for now is empty, which will be invoked one second after the hover event is dispatched. Thanks to closures in the JavaScript language, this function can access variables that were defined in an outer scope, such as <code>elem</code>.</p>
<p>I'm storing the timer object in a <code>timer</code> variable that I have defined outside of the <code>hover()</code> call, to make the timer object accessible also to the "mouse out" handler. The reason I need this is, once again, to make for a good user experience. If the user moves the mouse pointer into one of these user links and stays on it for, say, half a second before moving it away, I do not want that timer to still go off and invoke the function that will display the popup. So my mouse out event handler checks if there is an active timer object, and if there is one, it cancels it.</p>
<h2>Ajax Requests</h2>
<p>Ajax requests are not a new topic, as I have introduced this topic back in <a href="../../the-flask-mega-tutorial-part-xiv-ajax-2018.html">Chapter 14</a> as part of the live language translation feature. When using jQuery, the <code>$.ajax()</code> function sends an asynchronous request to the server.</p>
<p>The request that I'm going to send to the server will have the <em>/user/&lt;username&gt;/popup</em> URL, which I added to the application at the start of this chapter. The response from this request is going to contain the HTML that I need to insert in the popup.</p>
<p>My immediate problem regarding this request is to know what is the value of <code>username</code> that I need to include in the URL. The mouse in event handler function is generic, it's going to run for all the user links that are found in the page, so the function needs to determine the username from its context.</p>
<p>The <code>elem</code> variable contains the target element from the hover event, which is the <code>&lt;span&gt;</code> element that wraps the <code>&lt;a&gt;</code> element. To extract the username, I can navigate the DOM starting from the <code>&lt;span&gt;</code>, moving to the first child, which is the <code>&lt;a&gt;</code> element, and then extracting the text from it, which is the username that I need to use in my URL. With jQuery's DOM traversal functions, this is actually easy:</p>
<pre><code>elem.first().text().trim()
</code></pre>
<p>The <code>first()</code> function applied to a DOM node returns its first child. The <code>text()</code> function returns the text contents of a node. This function doesn't do any trimming of the text, so for example, if you have the <code>&lt;a&gt;</code> in one line, the text in the following line, and the <code>&lt;/a&gt;</code> in another line, <code>text()</code> will return all the whitespace that surrounds the text. To eliminate all that whitespace and leave just the text, I use the <code>trim()</code> JavaScript function.</p>
<p>And that is all the information I need to be able to issue the request to the server:</p>
<p class="code_title"><i>app/templates/base.html</i>: XHR request.</p>

<pre><code class="language-javascript">    $(function() {
        var timer = null;
        var xhr = null;
        $('.user_popup').hover(
            function(event) {
                // mouse in event handler
                var elem = $(event.currentTarget);
                timer = setTimeout(function() {
                    timer = null;
                    xhr = $.ajax(
                        '/user/' + elem.first().text().trim() + '/popup').done(
                            function(data) {
                                xhr = null
                                // create and display popup here
                            }
                        );
                }, 1000);
            },
            function(event) {
                // mouse out event handler
                var elem = $(event.currentTarget);
                if (timer) {
                    clearTimeout(timer);
                    timer = null;
                }
                else if (xhr) {
                    xhr.abort();
                    xhr = null;
                }
                else {
                    // destroy popup here
                }
            }
        )
    });
</code></pre>
<p>Here I defined a new variable in the outer scope, <code>xhr</code>. This variable is going to hold the asynchronous request object, which I initialize from a call to <code>$.ajax()</code>. Unfortunately when building URLs directly in the JavaScript side I cannot use the <code>url_for()</code> from Flask, so in this case I have to concatenate the URL parts explicitly.</p>
<p>The <code>$.ajax()</code> call returns a promise, which is this special JavaScript object that represents the asynchronous operation. I can attach a completion callback by adding <code>.done(function)</code>, so then my callback function will be invoked once the request is complete. The callback function will receive the response as an argument, which you can see I named <code>data</code> in the code above. This is going to be the HTML content that I'm going to put in the popover.</p>
<p>But before we get to the popover, there is one more detail related to giving the user a good experience that needs to be taken care of. Recall that I added logic in the "mouse out" event handler function to cancel the one second timeout if the user moved the mouse pointer out of the <code>&lt;span&gt;</code>. The same idea needs to be applied to the asynchronous request, so I have added a second clause to abort my <code>xhr</code> request object if it exists.</p>
<h2>Popover Creation and Destruction</h2>
<p>So finally I can create my popover component, using the <code>data</code> argument that was passed to me in the Ajax callback function:</p>
<p class="code_title"><i>app/templates/base.html</i>: Display popover.</p>

<pre><code class="language-javascript">                                function(data) {
                                    xhr = null;
                                    elem.popover({
                                        trigger: 'manual',
                                        html: true,
                                        animation: false,
                                        container: elem,
                                        content: data
                                    }).popover('show');
                                    flask_moment_render_all();
                                }
</code></pre>
<p>The actual creation of the popup is very simple, the <code>popover()</code> function from Bootstrap does all the work required to set it up. Options for the popover are given as an argument. I have configured this popover with the "manual" trigger mode, HTML content, no fade animation (so that it appears and disappears more quickly), and I have set the parent to be the <code>&lt;span&gt;</code> element itself, so that the hover behavior extends to the popover by inheritance. Finally, I'm passing the <code>data</code> argument to the Ajax callback as the <code>content</code> argument.</p>
<p>The return of the <code>popover()</code> call is the newly created popover component, which for a strange reason, had another method also called <code>popover()</code> that is used to display it. So I had to add a second <code>popover('show')</code> call to make the popup appear on the page.</p>
<p>The content of the popup includes the "last seen" date, which is generated through the Flask-Moment plugin as covered in <a href="../../the-flask-mega-tutorial-part-xii-dates-and-times-2018.html">Chapter 12</a>. As <a href="https://github.com/miguelgrinberg/Flask-Moment#ajax-support">documented</a> by the extension, when new Flask-Moment elements are added via Ajax, the <code>flask_moment_render_all()</code> function needs to be called to appropriately render those elements.</p>
<p>What remains now is to deal with the removal of the popup on the mouse out event handler. This handler already has the logic to abort the popover operation if it is interrupted by the user moving the mouse out of the target element. If none of those conditions apply, then that means that the popover is currently displayed and the user is leaving the target area, so in that case, a <code>popover('destroy')</code> call to the target element does the proper removal and cleanup.</p>
<p class="code_title"><i>app/templates/base.html</i>: Destroy popover.</p>

<pre><code class="language-javascript">                function(event) {
                    // mouse out event handler
                    var elem = $(event.currentTarget);
                    if (timer) {
                        clearTimeout(timer);
                        timer = null;
                    }
                    else if (xhr) {
                        xhr.abort();
                        xhr = null;
                    }
                    else {
                        elem.popover('destroy');
                    }
                }
</code></pre></div>

<div class="card patreon-bar">
  <div class="card-body">
    <h5>Become a Patron!</h5>
    <p class="card-text">Hello, and thank you for visiting my blog! If you enjoyed this article, please consider supporting my work on this blog on <a href="https://patreon.com/miguelgrinberg">Patreon</a>!</p>
    <a href="https://patreon.com/miguelgrinberg" alt="Become a Patron!" title="Become a Patron!"><img src="../../../static/patreon-button.png"></a>
  </div>
</div>


<div class="card social-bar">
  <div class="card-body">
    <h5>Share this post:</h5>
      <!-- Sharingbutton Hacker News -->
      <a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xx-some-javascript-magic-2018&amp;t=The%20Flask%20Mega-Tutorial%20Part%20XX%3A%20Some%20JavaScript%20Magic%20%282018%29" target="_blank" rel="noopener" aria-label="Hacker News">
        <div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 140"><path fill-rule="evenodd" d="M60.94 82.314L17 0h20.08l25.85 52.093c.397.927.86 1.888 1.39 2.883.53.994.995 2.02 1.393 3.08.265.4.463.764.596 1.095.13.334.262.63.395.898.662 1.325 1.26 2.618 1.79 3.877.53 1.26.993 2.42 1.39 3.48 1.06-2.254 2.22-4.673 3.48-7.258 1.26-2.585 2.552-5.27 3.877-8.052L103.49 0h18.69L77.84 83.308v53.087h-16.9v-54.08z"></path></svg></div>Hacker News</div>
      </a>

      <!-- Sharingbutton Reddit -->
      <a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xx-some-javascript-magic-2018&amp;resubmit=true&amp;title=The%20Flask%20Mega-Tutorial%20Part%20XX:%20Some%20JavaScript%20Magic%20(2018)" target="_blank" rel="noopener" aria-label="Reddit">
        <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96 0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65 0 3-1.35 3-3s-1.35-3-3-3c-1.38 0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65 0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66 0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64 0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4 0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6 0 .23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1 0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></div>Reddit</div>
      </a>

      <!-- Sharingbutton Twitter -->
      <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=The%20Flask%20Mega-Tutorial%20Part%20XX%3A%20Some%20JavaScript%20Magic%20%282018%29&amp;url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xx-some-javascript-magic-2018" target="_blank" rel="noopener" aria-label="Twitter">
        <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div>Twitter</div>
      </a>

      <!-- Sharingbutton LinkedIn -->
      <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xx-some-javascript-magic-2018&amp;title=The%20Flask%20Mega-Tutorial%20Part%20XX%3A%20Some%20JavaScript%20Magic%20%282018%29&amp;summary=The%20Flask%20Mega-Tutorial%20Part%20XX%3A%20Some%20JavaScript%20Magic%20%282018%29&amp;source=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xx-some-javascript-magic-2018" target="_blank" rel="noopener" aria-label="LinkedIn">
        <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg></div>LinkedIn</div>
      </a>

      <!-- Sharingbutton Facebook -->
      <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xx-some-javascript-magic-2018" target="_blank" rel="noopener" aria-label="Facebook">
        <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div>Facebook</div>
      </a>

      <!-- Sharingbutton E-Mail -->
      <a class="resp-sharing-button__link" href="mailto:?subject=The%20Flask%20Mega-Tutorial%20Part%20XX%3A%20Some%20JavaScript%20Magic%20%282018%29&amp;body=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xx-some-javascript-magic-2018" target="_self" rel="noopener" aria-label="E-Mail">
        <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></div>E-Mail</div>
      </a>

  </div>
</div>

<div id="comments" class="post-comment-count">
  
  <a class="btn btn-outline-secondary" href="../../the-flask-mega-tutorial-part-xx-some-javascript-magic-2018.html#comments">66 comments</a>
  
</div>


<div class="comments">
  <ul>
    
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/7bf193de82c70806d3733dcf39b658a7?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#26</span> <span class="badge text-bg-warning">kevin</span> said
    
    <span class="flask-moment" data-timestamp="2019-04-14T02:00:42Z" data-function="fromNow" data-refresh="0" style="display: none">2019-04-14T02:00:42Z</span>
  </p>
  <div>
    <p>Hey Miguel, thanks for taking the time to write this and answer so many questions. What is the best approach to using flask with javascript forms. I would like to use flexx to create the required javascript (ex: <a href="https://flexx.readthedocs.io/en/stable/examples/themed_form_src.html#themed-form-py" rel="nofollow">https://flexx.readthedocs.io/en/stable/examples/themed_form_src.html#themed-form-py</a>) but have flask handle the form submission. Is this possible or practical? Thanks</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#27</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2019-04-14T10:01:53Z" data-function="fromNow" data-refresh="0" style="display: none">2019-04-14T10:01:53Z</span>
  </p>
  <div>
    <p>@kevin: there shouldn't be really any problems. Flask receives form information in the standard format that browsers use. Most client side form libraries are going to preserve this format, so as far as Flask is concerned there will not be any difference. You will obviously need to handle the request as an Ajax request, so you would not be returning a full templated page as a response, but other than that there shouldn't be any difference.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/2330e8e6f4d907baa65e156c7ebb6fb7?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#28</span> <span class="badge text-bg-warning">Célia</span> said
    
    <span class="flask-moment" data-timestamp="2019-05-13T09:06:08Z" data-function="fromNow" data-refresh="0" style="display: none">2019-05-13T09:06:08Z</span>
  </p>
  <div>
    <p>Hello Miguel,</p>
<p>First of all, thank you for this tutorial. It's really amazing and helpfull.<br>
I would also like to know how to create a post automatically with a predefined text? I am trying to create a chatbot from your flask interface and I would like to nest his answers between the user's posts as if it were a real person.</p>
<p>Thank you in advance for your answer.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#29</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2019-05-14T10:48:26Z" data-function="fromNow" data-refresh="0" style="display: none">2019-05-14T10:48:26Z</span>
  </p>
  <div>
    <p>@Célia: your question is too vague for me to answer it. An automatic post is no different than a manual post in terms of how the server creates it. If you are asking how to generate the text of the post, the topic of chat bots is vast, there are many ways to do that and which way you use will depend on your particular situation.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/5a18fff7aff11f1c0e6423a235c93788?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#30</span> <span class="badge text-bg-warning">Elvin</span> said
    
    <span class="flask-moment" data-timestamp="2019-06-09T11:13:09Z" data-function="fromNow" data-refresh="0" style="display: none">2019-06-09T11:13:09Z</span>
  </p>
  <div>
    <p>Miguel, Thanks a lot for your great tutorial. I love it.</p>
<p>When I amend the width of each td in user_popup html, the popup window size remained unchanged?</p>
<p>May you shed a light on how to enlarge the popup window size? Thanks a lot!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#31</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2019-06-09T14:31:05Z" data-function="fromNow" data-refresh="0" style="display: none">2019-06-09T14:31:05Z</span>
  </p>
  <div>
    <p>@Elvin: Impossible for me to advice you if you don't show me what you've done.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/f5cf49a6a25cae21cc96f52d1bd1e063?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#32</span> <span class="badge text-bg-warning">Zarkaiss</span> said
    
    <span class="flask-moment" data-timestamp="2019-07-12T13:40:05Z" data-function="fromNow" data-refresh="0" style="display: none">2019-07-12T13:40:05Z</span>
  </p>
  <div>
    <p>Getting this error when trying to do the user_popup template any ideas on what's going on? It's setup exactly like the user template. </p>
<p>File "/home/zarkaiss1/microblog/app/templates/user_popup.html", line 18, in template<br>
    </p><p>{{ ('%(count)d followers', count=user.followers.count()) }},<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://environment.py/" rel="nofollow">environment.py</a>", line 497, in _parse<br>
    return Parser(self, source, name, encode_filename(filename)).parse()<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 901, in parse<br>
    result = nodes.Template(self.subparse(), lineno=1)<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 875, in subparse<br>
    add_data(self.parse_tuple(with_condexpr=True))<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 620, in parse_tuple<br>
    args.append(parse())<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 432, in parse_expression<br>
    return self.parse_condexpr()<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 437, in parse_condexpr<br>
    expr1 = self.parse_or()<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 450, in parse_or<br>
    left = self.parse_and()<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 459, in parse_and<br>
    left = self.parse_not()<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 470, in parse_not<br>
    return self.parse_compare()<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 474, in parse_compare<br>
    expr = self.parse_math1()<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 496, in parse_math1<br>
    left = self.parse_concat()<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 507, in parse_concat<br>
    args = [self.parse_math2()]<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 517, in parse_math2<br>
    left = self.parse_pow()<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 528, in parse_pow<br>
    left = self.parse_unary()<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 546, in parse_unary<br>
    node = self.parse_primary()<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://parser.py/" rel="nofollow">parser.py</a>", line 577, in parse_primary<br>
    self.stream.expect('rparen')<br>
  File "/home/zarkaiss1/.virtualenvs/flask/lib/python3.6/site-packages/jinja2/<a href="http://lexer.py/" rel="nofollow">lexer.py</a>", line 384, in expect<br>
    <a href="http://self.name/" rel="nofollow">self.name</a>, self.filename)<br>
jinja2.exceptions.TemplateSyntaxError: expected token ')', got '='</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#33</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2019-07-13T15:32:21Z" data-function="fromNow" data-refresh="0" style="display: none">2019-07-13T15:32:21Z</span>
  </p>
  <div>
    <p>@Zarkaiss: jinja templates do not implement the full python syntax. For this line that gives you the error, try the following:</p>
<p>{{ user.followers.count() }} followers</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/57a891e756f2222cd62ad3509bba23f7?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#34</span> <span class="badge text-bg-warning">Jonas Andersen</span> said
    
    <span class="flask-moment" data-timestamp="2019-07-26T00:55:54Z" data-function="fromNow" data-refresh="0" style="display: none">2019-07-26T00:55:54Z</span>
  </p>
  <div>
    <p>A guy wrote a plugin that gives you the "url_for" syntax inside of a javascript, if you want to keep all of the clientside url stuff dynamic with a familiar syntax.</p>
<p><a href="http://stewartpark.github.io/Flask-JSGlue/" rel="nofollow">http://stewartpark.github.io/Flask-JSGlue/</a></p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/a02849f4ef5c7a6ac7627f77934754e3?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#35</span> <span class="badge text-bg-warning">Len</span> said
    
    <span class="flask-moment" data-timestamp="2019-08-10T05:42:11Z" data-function="fromNow" data-refresh="0" style="display: none">2019-08-10T05:42:11Z</span>
  </p>
  <div>
    <p>Great tutorial but code is hard to read with the font size and font color</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#36</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2019-08-10T20:47:57Z" data-function="fromNow" data-refresh="0" style="display: none">2019-08-10T20:47:57Z</span>
  </p>
  <div>
    <p>@Len: you can make the font larger. All browsers have the option.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/241cea1f60770d085bbb7e4ac86940d2?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#37</span> <span class="badge text-bg-warning">nathan</span> said
    
    <span class="flask-moment" data-timestamp="2019-08-19T01:12:29Z" data-function="fromNow" data-refresh="0" style="display: none">2019-08-19T01:12:29Z</span>
  </p>
  <div>
    <p>Hi Miguel, <br>
I console logged the result of the elem of the hover jQuery function, and it seems that elem and elem.first() both return the same object, the &lt;span class="user_popup"&gt; element. But when I compare them and console log the result, it is false.<br>
I looked up the definition of .first() of jQuery, it seems that it is not returning the first child element, but rather the first element of a group that is returned.</p>
<p>I wonder why it was like this, I am really confused..</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/db5d9089e39ccf5a19783c322c752464?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#38</span> <span class="badge text-bg-warning">Sebastian</span> said
    
    <span class="flask-moment" data-timestamp="2019-09-18T01:12:56Z" data-function="fromNow" data-refresh="0" style="display: none">2019-09-18T01:12:56Z</span>
  </p>
  <div>
    <p>Hi Miguel,<br>
I have a value (from a timer, for the duration of playing a game) I want to pass it back to the server-side and redirect to a new side. That does not work. Hence, I was wondering if I can pass this JS data to a Flask Form to hande the request and redirect. Is that possible? I tried out a couple of things, but no luck.<br>
Thanks!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#39</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2019-09-18T10:39:50Z" data-function="fromNow" data-refresh="0" style="display: none">2019-09-18T10:39:50Z</span>
  </p>
  <div>
    <p>@Sebastian: You can pass this data with an Ajax request, but the redirect will have to be done from JS once you get the success callback for the request. Alternatively, you can have a hidden form in your page and trigger the form submission by issuing a submit button click. In that case the request will be issued in the foreground by the web browser, and the response from it will be interpreted, so a redirect response should work.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#40</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2019-09-22T03:09:53Z" data-function="fromNow" data-refresh="0" style="display: none">2019-09-22T03:09:53Z</span>
  </p>
  <div>
    <p>@nathan: You are correct, my description of the first() function was incorrect. I have updated this article with a correction, please see the update above.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/f4af7d4923df03ea8837c7a6ff690423?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#41</span> <span class="badge text-bg-warning">Raj</span> said
    
    <span class="flask-moment" data-timestamp="2020-03-19T20:22:21Z" data-function="fromNow" data-refresh="0" style="display: none">2020-03-19T20:22:21Z</span>
  </p>
  <div>
    <p>I tried it for my web page, where on hover i want to display the link details. It worked but mouse out event is not destroying the content. Upon debugging i find that this code part elem.popover('destroy'); is not working. I am not sure if this is the case or something else. Any clue why it is not working.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#42</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2020-03-21T23:39:56Z" data-function="fromNow" data-refresh="0" style="display: none">2020-03-21T23:39:56Z</span>
  </p>
  <div>
    <p>@Raj: check the documentation for the Bootstrap version that you are using. This tutorial uses version 3.3.7, which does have the destroy. I believe Bootstrap 4 uses "dispose" instead of "destroy", if I remember correctly.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/65a36332981fd76429942c0fcd2ab7ac?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#43</span> <span class="badge text-bg-warning">Alessandro</span> said
    
    <span class="flask-moment" data-timestamp="2020-06-15T10:29:46Z" data-function="fromNow" data-refresh="0" style="display: none">2020-06-15T10:29:46Z</span>
  </p>
  <div>
    <p>Hi Miguel,<br>
Thanks for putting together such a great tutorial.<br>
I had a quick question about the "Follow" hyperlink that appears within the user popup. When clicked, this returns a 405 error code (Method not allowed). If I look at the Flask logs I can see that this is because '/follow/&lt;user&gt;' is called using GET instead of POST, since this link is generated by &lt;a href&gt;. How would I force the request to be made as a POST? I tried using the approach taken for the Follow button in 'user.html' but this requires a form to be passed in when generating the page, which doesn't seem appropriate here.<br>
Thanks!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#44</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2020-06-15T15:42:39Z" data-function="fromNow" data-refresh="0" style="display: none">2020-06-15T15:42:39Z</span>
  </p>
  <div>
    <p>@Alessandro: sorry, this is my mistake. I have made some updates to the early parts of this tutorial a few days ago, specifically in the way follow and unfollow links are shown. I forgot to update the popup as well. I'll update it shortly. Sorry for the inconvenience!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/345931326e06f6fd06ba25db9024e4d3?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#45</span> <span class="badge text-bg-warning">Shyam</span> said
    
    <span class="flask-moment" data-timestamp="2020-06-27T20:07:05Z" data-function="fromNow" data-refresh="0" style="display: none">2020-06-27T20:07:05Z</span>
  </p>
  <div>
    <p>Hi Miguel,</p>
<p>Thanks for a brilliant tutorial. I have quick question regarding {% set user_link %} {% endset %} assignment. </p>
<p>In _post.html when I use <br>
{% set user_link %} <br>
                &lt;span class="user_popup"&gt;<br>
                    &lt;a href="{{ url_for('user', username=post.author.username) }}"&gt;{{ post.author.username }}&lt;/a&gt;<br>
                &lt;/span&gt;        <br>
            {% endset %} ,</p>
<p>{{ post.author.username }} is not getting displayed. When I take out {% set user_link %}, it is getting displayed again, do you know any reason why that might be?</p>
<p>Thanks in advance for your help</p>
<p>Shyam</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#46</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2020-06-27T22:50:18Z" data-function="fromNow" data-refresh="0" style="display: none">2020-06-27T22:50:18Z</span>
  </p>
  <div>
    <p>@Shyam: the <code>{% set user_link %}</code> just sets a variable, it is not intended to show this variable. You have to use this <code>user_link</code> variable later in the template to show its contents. The line that follows the <code>{% endset %}</code> should use this variable to build the username as a link.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/aa6bd408bc1819b64b98fc63e37c2be7?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#47</span> <span class="badge text-bg-warning">Tom</span> said
    
    <span class="flask-moment" data-timestamp="2020-07-23T16:34:34Z" data-function="fromNow" data-refresh="0" style="display: none">2020-07-23T16:34:34Z</span>
  </p>
  <div>
    <p>Hi Miguel,</p>
<p>My popup is appearing and disappearing correctly, but it is not displaying the content retrieved from the ajax call. I have tried replacing the content option with just a a string to see if that displays correctly and it does.</p>
<p>The debugger indicates the ajax call is getting the info correctly and it is stored as 'data' but  I am just getting an empty popup displayed.</p>
<p>Do you know why this may be? I am using Bootstrap 4. so could this potentially be interfering?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#48</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2020-07-23T22:05:41Z" data-function="fromNow" data-refresh="0" style="display: none">2020-07-23T22:05:41Z</span>
  </p>
  <div>
    <p>@Tom: difficult for me to say. You need to debug this on your side. If you are getting the data, but the data does not appear inside the popup, then this data must be incorrectly applied. A combination of logging to the console plus checking the Bootstrap 4 docs should help figure this out.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/aa6bd408bc1819b64b98fc63e37c2be7?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#49</span> <span class="badge text-bg-warning">Tom</span> said
    
    <span class="flask-moment" data-timestamp="2020-07-24T21:49:25Z" data-function="fromNow" data-refresh="0" style="display: none">2020-07-24T21:49:25Z</span>
  </p>
  <div>
    <p>For anyone using Bootstrap 4 and encountering this issue, it is because BS4 has a built-in sanitizer for popovers that doesn't like tables for some reason. (<a href="https://getbootstrap.com/docs/4.3/getting-started/javascript/#sanitizer" rel="nofollow">https://getbootstrap.com/docs/4.3/getting-started/javascript/#sanitizer</a>)</p>
<p>It can be deactivated by adding "sanitize: false" as an attribute of the popover code.<br>
(<a href="https://stackoverflow.com/questions/55362609/bootstrap-4-3-1-popover-does-not-display-table-inside-popover-content" rel="nofollow">https://stackoverflow.com/questions/55362609/bootstrap-4-3-1-popover-does-not-display-table-inside-popover-content</a>)</p>
<p>Thanks Miguel for this great tutorial.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/d46294d44e23575770b33bec66e1db0e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#50</span> <span class="badge text-bg-warning">David</span> said
    
    <span class="flask-moment" data-timestamp="2020-10-05T14:02:31Z" data-function="fromNow" data-refresh="0" style="display: none">2020-10-05T14:02:31Z</span>
  </p>
  <div>
    <p>I am unable to get the popup on hovering my mouse over the user link. I have checked the span class, route, and jquery code and they look fine. When I checked the console, I noticed that the connection to jquery cdn 1.12.4 times out and I also get the error below:</p>
<p>DevTools failed to load SourceMap: Could not load content for <a href="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.26.0/moment-with-locales.min.js.map:" rel="nofollow">http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.26.0/moment-with-locales.min.js.map:</a> HTTP error: status code 404, net::ERR_HTTP_RESPONSE_CODE_FAILURE</p>
<p>I have pointed the script source to jquery cdn 3.4.1 and moment.js cdn. After doing this, there is no timeout to the jquery cdn but the moment js error above is still present.</p>
<p>While the latter looks like an issue rendering the time within the ajax response, I still can't get the popup to display. Could this be an issue with a web browser and script version compatibility?</p>
  </div>
</div>
    </li>
    
  </ul>
</div>

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item"><a class="page-link" href="1.html#comments">&laquo;&laquo;</a></li>
    <li class="page-item"><a class="page-link" href="1.html#comments">&laquo;</a></li>
    <li class="page-item"><a class="page-link" href="3.html#comments">&raquo;</a></li>
    <li class="page-item"><a class="page-link" href="0.html#comments">&raquo;&raquo;</a></li>
  </ul>
</nav>



<div id="comment-form">
  <h3>Leave a Comment</h3>

  
  
  

  
<form action="#comment-form" method="post">
  <input id="url" name="url" type="hidden" value="">
<input id="csrf_token" name="csrf_token" type="hidden" value="IjQyYjY5YzZlNTcyYjFkMTVlZGRkOWJjYjA3ZmFlYWFiNTg3YmU5ODki.Zxdl_Q.TC5sc05FBOQXj7ys37Ov5ewKG4U">
    
  <div class="mb-3">
    <label class="form-label" for="name">Name</label>
    <div class="input-group has-validation">
      <input class="form-control" id="name" name="name" required type="text" value="">
    </div>
  </div>

    
    
  <div class="mb-3">
    <label class="form-label" for="email">Email</label>
    <div class="input-group has-validation">
      <input class="form-control" id="email" name="email" required type="text" value="">
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="comment">Comment</label>
    <div class="input-group has-validation">
      <textarea class="form-control" id="comment" name="comment" required>
</textarea>
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="captcha">Captcha</label>
    <div class="input-group has-validation">
      
<script src='https://www.google.com/recaptcha/api.js' async defer></script>
<div class="g-recaptcha" data-sitekey="6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S"></div>

    </div>
  </div>

    
  <input class="btn btn-primary mb-3" id="submit" name="submit" type="submit" value="Submit">

      
</form>

</div>


</div>

      </div>
    </div>
    
    <div class="col-md-4">
      <div id="sidebar">
        
          
  



<div class="card">
  
  
  <div class="card-header">Flask Web Development, 2nd Edition</div>
  <a class="card-book-cover" href="https://amzn.to/3lE2mok">
    <img src="../../../static/flask2e-book-cover-small.png" alt="Flask Web Development, 2nd Edition">
  </a>
  <div class="card-body">
    <p class="card-text">If you want to learn modern web development techniques with Python and Flask, you may find the second edition of my <a href="https://amzn.to/3lE2mok">O'Reilly book</a> useful.</p>
  </div>
  <div class="card-body">
    <a class="card-link" href="https://amzn.to/3lE2mok">Click here to get this Book!</a><br />
  </div>

  
</div>
        
        <div class="card">
  <div class="card-header">About Miguel</div>
  <div class="card-body">
    <img style="float: right; margin: 0px 8px 8px 0px; padding: 4px; border: 1px solid #ccc;" src="../../../static/miguel.jpg" />
    <p class="card-text">Welcome to my blog!</p>
    <p class="card-text">I'm a software engineer and technical writer, currently living in Drogheda, Ireland.</p>
    <p class="card-text">You can also find me on <a href="https://twitter.com/miguelgrinberg">Twitter</a>, <a href="https://mstdn.social/@miguelgrinberg">Mastodon</a>, <a href="https://github.com/miguelgrinberg">Github</a>, <a href="http://www.linkedin.com/in/miguelgrinberg">LinkedIn</a>, <a href="https://youtube.com/miguelgrinberg">YouTube</a>, <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a> and <a href="https://patreon.com/miguelgrinberg">Patreon</a>.</p>
    <p class="card-text">Thank you for visiting!</p>
  </div>
</div>
        
        <div class="card" id="categories">
  <div class="card-header">Categories</div>
  <div class="card-body">
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AI/feed"><img src="../../../static/rss-small.png" title="AI RSS Feed" label="AI RSS Feed" alt="AI RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AI" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AI" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AWS/feed"><img src="../../../static/rss-small.png" title="AWS RSS Feed" label="AWS RSS Feed" alt="AWS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AWS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AWS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Arduino/feed"><img src="../../../static/rss-small.png" title="Arduino RSS Feed" label="Arduino RSS Feed" alt="Arduino RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Arduino" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Arduino" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Authentication/feed"><img src="../../../static/rss-small.png" title="Authentication RSS Feed" label="Authentication RSS Feed" alt="Authentication RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Authentication" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Authentication" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Blog/feed"><img src="../../../static/rss-small.png" title="Blog RSS Feed" label="Blog RSS Feed" alt="Blog RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Blog" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Blog" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/C++/feed"><img src="../../../static/rss-small.png" title="C++ RSS Feed" label="C++ RSS Feed" alt="C++ RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/C++" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="C++" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/CSS/feed"><img src="../../../static/rss-small.png" title="CSS RSS Feed" label="CSS RSS Feed" alt="CSS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/CSS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="CSS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Cloud/feed"><img src="../../../static/rss-small.png" title="Cloud RSS Feed" label="Cloud RSS Feed" alt="Cloud RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Cloud" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Cloud" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Database/feed"><img src="../../../static/rss-small.png" title="Database RSS Feed" label="Database RSS Feed" alt="Database RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Database" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Database" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Docker/feed"><img src="../../../static/rss-small.png" title="Docker RSS Feed" label="Docker RSS Feed" alt="Docker RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Docker" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Docker" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Filmmaking/feed"><img src="../../../static/rss-small.png" title="Filmmaking RSS Feed" label="Filmmaking RSS Feed" alt="Filmmaking RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Filmmaking" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Filmmaking" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Flask/feed"><img src="../../../static/rss-small.png" title="Flask RSS Feed" label="Flask RSS Feed" alt="Flask RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" /> <small><em>126</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Games/feed"><img src="../../../static/rss-small.png" title="Games RSS Feed" label="Games RSS Feed" alt="Games RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Games" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Games" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Heroku/feed"><img src="../../../static/rss-small.png" title="Heroku RSS Feed" label="Heroku RSS Feed" alt="Heroku RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Heroku" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Heroku" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/IoT/feed"><img src="../../../static/rss-small.png" title="IoT RSS Feed" label="IoT RSS Feed" alt="IoT RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/IoT" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="IoT" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/JavaScript/feed"><img src="../../../static/rss-small.png" title="JavaScript RSS Feed" label="JavaScript RSS Feed" alt="JavaScript RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/JavaScript" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="JavaScript" /> <small><em>35</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/MicroPython/feed"><img src="../../../static/rss-small.png" title="MicroPython RSS Feed" label="MicroPython RSS Feed" alt="MicroPython RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/MicroPython" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="MicroPython" /> <small><em>9</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microdot/feed"><img src="../../../static/rss-small.png" title="Microdot RSS Feed" label="Microdot RSS Feed" alt="Microdot RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microdot" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microdot" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microservices/feed"><img src="../../../static/rss-small.png" title="Microservices RSS Feed" label="Microservices RSS Feed" alt="Microservices RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microservices" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microservices" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Movie Reviews/feed"><img src="../../../static/rss-small.png" title="Movie Reviews RSS Feed" label="Movie Reviews RSS Feed" alt="Movie Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Movie Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Movie Reviews" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/OpenStack/feed"><img src="../../../static/rss-small.png" title="OpenStack RSS Feed" label="OpenStack RSS Feed" alt="OpenStack RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/OpenStack" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="OpenStack" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Personal/feed"><img src="../../../static/rss-small.png" title="Personal RSS Feed" label="Personal RSS Feed" alt="Personal RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Personal" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Personal" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Photography/feed"><img src="../../../static/rss-small.png" title="Photography RSS Feed" label="Photography RSS Feed" alt="Photography RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Photography" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Photography" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Product Reviews/feed"><img src="../../../static/rss-small.png" title="Product Reviews RSS Feed" label="Product Reviews RSS Feed" alt="Product Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Product Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Product Reviews" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Programming/feed"><img src="../../../static/rss-small.png" title="Programming RSS Feed" label="Programming RSS Feed" alt="Programming RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" /> <small><em>187</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Project Management/feed"><img src="../../../static/rss-small.png" title="Project Management RSS Feed" label="Project Management RSS Feed" alt="Project Management RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Project Management" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Project Management" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Python/feed"><img src="../../../static/rss-small.png" title="Python RSS Feed" label="Python RSS Feed" alt="Python RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" /> <small><em>169</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/REST/feed"><img src="../../../static/rss-small.png" title="REST RSS Feed" label="REST RSS Feed" alt="REST RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/REST" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="REST" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Rackspace/feed"><img src="../../../static/rss-small.png" title="Rackspace RSS Feed" label="Rackspace RSS Feed" alt="Rackspace RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Rackspace" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Rackspace" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Raspberry Pi/feed"><img src="../../../static/rss-small.png" title="Raspberry Pi RSS Feed" label="Raspberry Pi RSS Feed" alt="Raspberry Pi RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Raspberry Pi" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Raspberry Pi" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/React/feed"><img src="../../../static/rss-small.png" title="React RSS Feed" label="React RSS Feed" alt="React RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/React" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="React" /> <small><em>18</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Robotics/feed"><img src="../../../static/rss-small.png" title="Robotics RSS Feed" label="Robotics RSS Feed" alt="Robotics RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Robotics" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Robotics" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Security/feed"><img src="../../../static/rss-small.png" title="Security RSS Feed" label="Security RSS Feed" alt="Security RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Security" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Security" /> <small><em>12</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Video/feed"><img src="../../../static/rss-small.png" title="Video RSS Feed" label="Video RSS Feed" alt="Video RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Video" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Video" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/WebSocket/feed"><img src="../../../static/rss-small.png" title="WebSocket RSS Feed" label="WebSocket RSS Feed" alt="WebSocket RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/WebSocket" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="WebSocket" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Webcast/feed"><img src="../../../static/rss-small.png" title="Webcast RSS Feed" label="Webcast RSS Feed" alt="Webcast RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Webcast" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Webcast" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Windows/feed"><img src="../../../static/rss-small.png" title="Windows RSS Feed" label="Windows RSS Feed" alt="Windows RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Windows" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Windows" /> <small><em>1</em></small>
      </form>
    </div>
    
  </div>
</div>
        
      </div>
    </div>
    
  </div>
  <div id="footer">
    
    <p>&copy; 2012-<script type="text/javascript">document.write(new Date().getFullYear());</script> by Miguel Grinberg. All rights reserved. <a href="mailto:webmaster _at_ miguelgrinberg _dot_ com">Questions?</a></p>
  </div>
</div>

  
    <script src="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../../static/prettify.js"></script>
  <script src="../../../../cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment-with-locales.min.js" integrity="sha512-42PE0rd+wZ2hNXftlM78BSehIGzezNeQuzihiBCvUEB3CVxHvsShF86wBWwQORNxNINlBPuq7rG4WWhNiTVHFg==" crossorigin="anonymous"></script>

<script>
moment.locale("en");
function flask_moment_render(elem) {{
    const timestamp = moment(elem.dataset.timestamp);
    const func = elem.dataset.function;
    const format = elem.dataset.format;
    const timestamp2 = elem.dataset.timestamp2;
    const no_suffix = elem.dataset.nosuffix;
    const units = elem.dataset.units;
    let args = [];
    if (format)
        args.push(format);
    if (timestamp2)
        args.push(moment(timestamp2));
    if (no_suffix)
        args.push(no_suffix);
    if (units)
        args.push(units);
    elem.textContent = timestamp[func].apply(timestamp, args);
    elem.classList.remove('flask-moment');
    elem.style.display = "";
}}
function flask_moment_render_all() {{
    const moments = document.querySelectorAll('.flask-moment');
    moments.forEach(function(moment) {{
        flask_moment_render(moment);
        const refresh = moment.dataset.refresh;
        if (refresh && refresh > 0) {{
            (function(elem, interval) {{
                setInterval(function() {{
                    flask_moment_render(elem);
                }}, interval);
            }})(moment, refresh);
        }}
    }})
}}
document.addEventListener("DOMContentLoaded", flask_moment_render_all);
</script>

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-20EHZP9GRZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-20EHZP9GRZ');
  </script>
  
  <script type="text/javascript">
    function setThemeUI() {
      document.getElementById('select-theme-auto').classList.remove('active');
      document.getElementById('select-theme-light').classList.remove('active');
      document.getElementById('select-theme-dark').classList.remove('active');
      const theme = getPreferredTheme();
      const actualTheme = document.documentElement.getAttribute('data-bs-theme', 'light');
      document.getElementById('select-theme-' + theme).classList.add('active');
      document.getElementById('current-theme').href.baseVal = `#icon-theme-${actualTheme}`;
    };

    function updateTheme(theme) {
      if (theme === 'auto') {
        localStorage.removeItem('theme')
      }
      else {
        localStorage.setItem('theme', theme)
      }
      setTheme(getPreferredTheme());
    }

    setThemeUI();

    const darkModePreference = window.matchMedia("(prefers-color-scheme: dark)");
    darkModePreference.addEventListener("change", e => {
      if (getPreferredTheme() === 'auto') {
        setTheme('auto');
      }
    });

    document.addEventListener("DOMContentLoaded", () => {
      // add prettyprint class to all <pre><code></code></pre> blocks
      let prettify = false;
      document.querySelectorAll('div.post-body pre code').forEach((code) => {
        code.parentNode.classList.add('prettyprint');
        prettify = true;
      });
      prettyPrint();
    });
  </script>

  </body>

<!-- Mirrored from blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xx-some-javascript-magic-2018/page/2 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 08:46:52 GMT -->
</html>