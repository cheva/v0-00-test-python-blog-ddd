<!doctype html>
<html lang="en">
  
<!-- Mirrored from blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy/page/4 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 09:45:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
  <script type="text/javascript">
    function getPreferredTheme() {
      const storedTheme = localStorage.getItem('theme')
      if (storedTheme) {
        return storedTheme
      }
      return 'auto';
    }

    function setTheme(theme) {
      if (theme === 'auto') {
        theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
      }
      document.documentElement.setAttribute('data-bs-theme', theme);
    };

    setTheme(getPreferredTheme());
  </script>
  
    <title>
  
    The Flask Mega-Tutorial, Part XVII: Deployment on Linux (even on the Raspberry Pi!) (2012) - miguelgrinberg.com
  
</title>
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="description" content="miguelgrinberg.com">
  <meta name="copyright" content="Copyright (c) 2012-2024 Miguel Grinberg">
  <meta name="author" content="Miguel Grinberg">
  
  <meta name="keywords" content="python, programming, flask, web, tutorial, deployment, hosting, vps, server">
  
  
  <link rel="canonical" href="../../the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy.html">
  

  
    <link href="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&amp;display=swap" rel="stylesheet">

  <link href="../../../static/tomorrow.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/tomorrow-night.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/social.css" rel="stylesheet" type="text/css" />
  <link href="../../../static/style_20231230.css" rel="stylesheet" type="text/css" />

  <link rel="shortcut icon" href="https://blog.miguelgrinberg.com/static/favicon.ico">
  <link rel="alternate" type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed" title="miguelgrinberg.com RSS feed">

    <meta property="og:title" content="The Flask Mega-Tutorial, Part XVII: Deployment on Linux (even on the Raspberry Pi!) (2012)">
    <meta property="og:description" content="(Great news! There is a new version of this tutorial!)This is the seventeenth article in the series in which I document my experience writing web applications in Python using the Flask…">
    <meta property="og:image" content="https://blog.miguelgrinberg.com/static/cards/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy.jpg">
    <meta property="og:url" content="https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy">
    <meta name="twitter:title" content="The Flask Mega-Tutorial, Part XVII: Deployment on Linux (even on the Raspberry Pi!) (2012)">
    <meta name="twitter:description" content="(Great news! There is a new version of this tutorial!)This is the seventeenth article in the series in which I document my experience writing web applications in Python using the Flask…">
    <meta name="twitter:image" content="https://blog.miguelgrinberg.com/static/cards/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@miguelgrinberg">

  </head>
  <body>
    <svg style="display: none" version="2.0">
      <defs>
        <symbol id="icon-theme-auto" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-circle-half" viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 0 8 1zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16"/>
        </symbol>
        <symbol id="icon-theme-light" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-brightness-high-fill" viewBox="0 0 16 16">
          <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </symbol>
        <symbol id="icon-theme-dark" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-moon-stars-fill" viewBox="0 0 16 16">
          <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278"/>
          <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
        </symbol>
      </defs>
    </svg>
<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="https://blog.miguelgrinberg.com/index">miguelgrinberg.com</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" aria-current="page" href="https://blog.miguelgrinberg.com/index">Home</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../my-courses-and-books.html">My Courses and Books</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../hire-me.html">Consulting</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../about-me.html">About Me</a></li>
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <svg width="20" height="20" version="2.0"><use id="current-theme" href="#icon-theme-light"></svg>
          </a>
          <ul class="dropdown-menu">
            <li>
              <a id="select-theme-light" class="dropdown-item" href="javascript:updateTheme('light')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-light"></svg>&nbsp; Light Mode
              </a>
            </li>
            <li>
              <a id="select-theme-dark" class="dropdown-item" href="javascript:updateTheme('dark')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-dark"></svg>&nbsp; Dark Mode
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a id="select-theme-auto" class="dropdown-item" href="javascript:updateTheme('auto')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-auto"></svg>&nbsp; System Default
              </a>
            </li>
          </ul>
        </li>
        
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item social-icons">
          <a type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed"><img src="../../../static/social/rss.png" alt="RSS Feed" title="RSS Feed" /></a>
          <a href="https://twitter.com/miguelgrinberg"><img src="../../../static/social/twitter.png" alt="Twitter" title="Twitter" /></a>
          <a rel="me" href="https://mstdn.social/@miguelgrinberg"><img src="../../../static/social/mastodon.png" alt="Mastodon" title="Mastodon" /></a>
          <a href="http://github.com/miguelgrinberg"><img src="../../../static/social/github.png" alt="GitHub" title="GitHub" /></a>
          <a href="https://youtube.com/miguelgrinberg"><img src="../../../static/social/youtube.png" alt="YouTube" title="YouTube" /></a>
          <a href="http://www.linkedin.com/in/miguelgrinberg"><img src="../../../static/social/linkedin.png" alt="LinkedIn" title="LinkedIn" /></a>
          <a href="https://patreon.com/miguelgrinberg"><img src="../../../static/social/patreon.png" alt="Patreon" title="Patreon" /></a>
          <!--<a href="https://www.facebook.com/miguelgrinbergblog"><img src="/static/social/facebook.png" alt="Facebook" title="Facebook" /></a>-->
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
  <div class="row">
    <div class="col-md-8">
      <div id="main">
        
        
        
        
        

<div class="post">

<div class="post-header">
  <h1><a href="../../the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy.html">The Flask Mega-Tutorial, Part XVII: Deployment on Linux (even on the Raspberry Pi!) (2012)</a></h1>
  <h2>
    Posted by
    <form action="https://blog.miguelgrinberg.com/author/Miguel Grinberg" method="POST">
      <input type="submit" class="btn btn-danger btn-sm" value="Miguel Grinberg" />
    </form>
    on
    <button class="btn btn-secondary btn-sm" disabled><span class="flask-moment" data-timestamp="2013-04-15T06:14:46Z" data-function="format" data-format="LL" data-refresh="0" style="display: none">2013-04-15T06:14:46Z</span></button>
    under
    
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Raspberry Pi" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Raspberry Pi" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" />
      </form>
    
    
  </h2>
</div>
<div class="post-body"><p><em>(Great news! There is a <a href="../../the-flask-mega-tutorial-part-i-hello-world.html">new version of this tutorial</a>!)</em></p>
<p>This is the seventeenth article in the series in which I document my experience writing web applications in <a href="http://python.org/">Python</a> using the <a href="http://flask.pocoo.org/">Flask</a> microframework.</p>
<p>The goal of the tutorial series is to develop a decently featured microblogging application that demonstrating total lack of originality I have decided to call <code>microblog</code>.</p>
<p><strong>NOTE</strong>: This article was revised in September 2014 to be in sync with current versions of Python and Flask.</p>
<p>Here is an index of all the articles in the series that have been published to date:</p>
<ul>
<li><a href="../../the-flask-mega-tutorial-part-i-hello-world-legacy.html">Part I: Hello, World!</a></li>
<li><a href="../../the-flask-mega-tutorial-part-ii-templates-legacy.html">Part II: Templates</a></li>
<li><a href="../../the-flask-mega-tutorial-part-iii-web-forms-legacy.html">Part III: Web Forms</a></li>
<li><a href="../../the-flask-mega-tutorial-part-iv-database-legacy.html">Part IV: Database</a></li>
<li><a href="../../the-flask-mega-tutorial-part-v-user-logins-legacy.html">Part V: User Logins</a></li>
<li><a href="../../the-flask-mega-tutorial-part-vi-profile-page-and-avatars-legacy.html">Part VI: Profile Page And Avatars</a></li>
<li><a href="../../the-flask-mega-tutorial-part-vii-unit-testing-legacy.html">Part VII: Unit Testing</a></li>
<li><a href="../../the-flask-mega-tutorial-part-viii-followers-contacts-and-friends-legacy.html">Part VIII: Followers, Contacts And Friends</a></li>
<li><a href="../../the-flask-mega-tutorial-part-ix-pagination-legacy.html">Part IX: Pagination</a></li>
<li><a href="../../the-flask-mega-tutorial-part-x-full-text-search-legacy.html">Part X: Full Text Search</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xi-email-support-legacy.html">Part XI: Email Support</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xii-facelift-legacy.html">Part XII: Facelift</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xiii-dates-and-times-legacy.html">Part XIII: Dates and Times</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xiv-i18n-and-l10n-legacy.html">Part XIV: I18n, L10n</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xv-ajax-legacy.html">Part XV: Ajax</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xvi-debugging-testing-and-profiling-legacy.html">Part XVI: Debugging, Testing and Profiling</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy.html">Part XVII: Deployment on Linux (even on the Raspberry Pi!)</a> (this article)</li>
<li><a href="../../the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud-legacy.html">Part XVIII: Deployment on the Heroku Cloud</a></li>
</ul>
<p>Today we are reaching a huge milestone in the life of our <code>microblog</code> application. We are going public with it, as we will be looking at different ways in which we can deploy it and make it accessible to our users.</p>
<p>In this article I will explore the traditional hosting options, and will be looking at hands-on deployment on a Linux box and on the widely popular Raspberry Pi minicomputer. In the next article we will be looking at deployment on cloud services.</p>
<p>To begin we will be looking at the more traditional of all deployment options. We will install the application behind a web server on a dedicated host that we will manage.</p>
<p>But where can we find a host? These days there are many cheap server offers out there. The cheapest options are for a VPS (virtual private server), which is virtual machine that looks like a standalone and dedicated server to you, but is really sharing the physical hardware with a few others like it. You can check on <a href="http://www.lowendbox.com/">lowendbox.com</a> for deals if you want to get one to experiment with (note that I'm not affiliated with them, I do not endorse them or make money if you click the link above).</p>
<p>Another easy way to obtain a host is to install a virtual machine on your regular PC. If you are a Windows or Mac user and would like to experience deploying the application to a Linux server without spending a dime, then this is the way to go. You can install <a href="https://www.virtualbox.org/">VirtualBox</a> on your system, download an ISO image for the Linux distribution of your choice and then create a VM on which you install this ISO image.</p>
<p>Let's talk a bit about operating system choices. I think there are four decent choices for hosting a web server:</p>
<ul>
<li>Linux</li>
<li>BSD</li>
<li>OS X</li>
<li>Windows</li>
</ul>
<p>From a technical point of view you could setup a Python based web server on any of the above, so how do we choose?</p>
<p>In my opinion the choice isn't too hard to make. For me it is important that we are on a platform that is open source, because the community at large does a much better job at keeping a platform safe and secure than what a single company can do on a closed source product. We also want to be on a platform that has a large server installation base, because that gives us more chances of finding solutions to our problems. Based on the above criteria, I consider Windows and OS X inferior to Linux and BSD as servers.</p>
<p>So now we are down to two options. The choice of Linux vs. BSD is an easy one for me: It does not matter. Both are excellent options for hosting a web server. Depending on the hosting provider you may have Linux or BSD options to choose from, so I just simply use what's available.</p>
<p>There are many Linux and BSD distributions out there, so how to pick one? This is largely a matter of preference, but if we are going to try to use what the majority use we can look at the distributions according to some of their major characteristics, and then pick a popular distribution in the group of choice:</p>
<ul>
<li>RPM based (RedHat, CentOS, Fedora)</li>
<li>Debian based (Debian, Ubuntu, Mint)</li>
<li>BSD based (FreeBSD, NetBSD, OpenBSD)</li>
<li>others</li>
</ul>
<p>I'm sure my simplistic grouping of distros will offend some. I'm also sure many will have the need to mention that Mac OS X is BSD based and as such should be in my list. Keep in mind that this classification is just my own, I don't expect everyone will agree with me.</p>
<p>As an exercise in preparing this article I tested a few Linux distros (I'm using a VPS that does not offer BSD choices). I tried Fedora, Ubuntu, Debian and CentOS. None of them was straightforward, unfortunately, but out of all of these, the CentOS install was the one with less complications, so that's the one I'm going to describe here.</p>
<p>If you have never done this you may find the setup task to be extremely laborious, and you would be correct if you think that. The thing is, once the server is setup it takes very little effort to keep it running.</p>
<p>Ready? Here we go!</p>
<h2>Hosting on CentOS 6</h2>
<p>I'm going to assume that we have a clean install of CentOS 6 on a dedicated server or VPS. A VM in your PC also works, but go ahead and do a standard install before starting.</p>
<h3>Client side setup</h3>
<p>We will be managing this server remotely from our own PC, so we need a tool that we can use to login into this system and run commands. If your PC runs Linux or OS X then you already have <a href="http://www.openssh.org/">OpenSSH</a> installed. If you are on Windows then there are two very decent ways to get SSH functionality:</p>
<ul>
<li><a href="http://www.cygwin.com/">Cygwin</a> (select the OpenSSH package in the installer)</li>
<li><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">Putty</a></li>
</ul>
<p>Cygwin is much more than SSH, it provides a Linux like environment inside your Windows box. Putty, on the other side, is just an SSH tool. Since I want to cover the most ground, the instructions below will be for Linux, OS X and Cygwin users. If you use Putty on Windows, then there is a little bit of translation required.</p>
<p>Let's begin by logging in to our shiny new CentOS 6 box. Open a command line prompt on your PC (a Cygwin prompt if you are on Windows) and run the following:</p>
<pre><code>$ ssh root@&lt;your-server&gt;
</code></pre>
<p>This is saying that you want to login to the system as user <code>root</code>, the admin of the system. You should replace <code>&lt;your-server&gt;</code> with the IP address or hostname of your server. Note the <code>$</code> is the command line prompt, you do not type that.</p>
<p>You will be asked to provide the password for user <code>root</code>. If this is a dedicated server or VPS that you purchased, you must have been asked about this password during the setup process. If this is your own VM then you chose a root password during installation.</p>
<h3>Installing software packages</h3>
<p>Now that we are logged in, we need to install all the software that we will be using to deploy our server, which obviously include Python and a web server. We will also switch from sqlite to a more robust MySQL database.</p>
<p>The command to install software on CentOS is called <code>yum</code>. We can install all the packages we need using a single command:</p>
<pre><code>$ yum install python python-devel python-virtualenv httpd httpd-devel mysql-server mysql-devel git gcc sudo
</code></pre>
<p>Some of these could be already installed, but it doesn't hurt to be safe and request all the packages we need, <code>yum</code> will only install what's missing.</p>
<p>The packages we just installed are:</p>
<ul>
<li><code>python</code> and <code>python-devel</code>: the Python interpreter and its  development package</li>
<li><code>virtualenv</code>: the Python script that creates virtual environments</li>
<li><code>httpd</code> and <code>httpd-devel</code>: The Apache web server and its development package</li>
<li><code>mysql-server</code> and <code>mysql-devel</code>: The MySQL database server and its development package</li>
<li><code>git</code>: source code version control system (we will use it to download and update the application)</li>
<li><code>gcc</code>: the C/C++ compiler (needed to compile Python extensions)</li>
<li><code>sudo</code>: a tool that helps users run commands as other users.</li>
</ul>
<h3>Creating a user account to host the application</h3>
<p>We will now setup a user account on which we will host our application. In case the reasons aren't clear, the <code>root</code> account has the maximum privileges, so we could easily delete or destroy important parts of the system by mistake. If we work inside a restricted account then all the important parts of the system will be out of reach so we are protected against mistakes. A second, maybe more important reason to not use the root account is that if a hacker gets hold of this account he will own our server. We want to hide the root account as much as possible, I like to disable root account logins completely on production servers.</p>
<p>We will call this new account <code>apps</code>, assuming we could host several applications inside it. Since the applications will be run by the web server account, we will make the group of our <code>apps</code> account the group of the web server account (which was created for us when Apache was installed), so that the web server has permission to read and write on these files. If you are not familiar with Unix user permissions, then an introduction is available over at <a href="http://en.wikipedia.org/wiki/Filesystem_permissions#Traditional_Unix_permissions">this Wikipedia page</a>.</p>
<p>The command to create the <code>apps</code> account on CentOS is:</p>
<pre><code>$ adduser -g apache apps
</code></pre>
<p>The <code>-g</code> option makes the primary group of this account the <code>apache</code> group, which on CentOS is the group of the <code>apache</code> user account. As part of the account setup you will have to enter a password for this account.</p>
<p>The <code>adduser</code> command will create a home directory for the new account, at <code>/home/apps</code>. Unfortunately, when we go check the permissions of this directory we find it to only be accessible to the owner:</p>
<pre><code>$ ls /home -l
total 7
drwx------ 2 apps  apache 4096 Apr  7 11:46 apps
</code></pre>
<p>We decided we want the <code>apache</code> group users to be able to freely work on the files on this account, so we have to give the group enough permissions:</p>
<pre><code>$ chmod 775 /home/apps
</code></pre>
<p>Consult the documentation for the <code>chmod</code> tool for detailed information. The <code>775</code> permisions will allow the owner and the group full access, and will also give others permission to read and execute, but not write to this directory.</p>
<h3>Password-less logins</h3>
<p>The next step is to be able to login to this account from our PC without using a password. The SSH tool supports another type of authentication, called <a href="http://en.wikipedia.org/wiki/Public-key_cryptography">public key</a>. If you are on a non-Windows OS it is very likely that you already have keys installed on your system. </p>
<p>Now open a terminal window on your own PC (Cygwin's bash shell for Windows users). To check if you have keys installed run the following command:</p>
<pre><code>$ ls ~/.ssh
id_rsa  id_rsa.pub
</code></pre>
<p>If the directory listing shows files named <code>id_rsa</code> and <code>id_rsa.pub</code> like above then you are good to go. If you don't have these files then you have to run the following command:</p>
<pre><code>$ keygen -t rsa
</code></pre>
<p>This application will prompt you to enter a few things, for which I recommend you accept the defaults by pressing Enter on all the prompts. If you know what you are doing and want to do otherwise, you are certainly welcome to.</p>
<p>After this command runs you should have the two files listed above. The file <code>id_rsa.pub</code> is your public key, the data in this file can be shared with others without creating a security risk. The <code>id_rsa</code> file is your private key, so you should never share the contents of this file with anyone.</p>
<p>We will now add our public key to our server, so that it knows who we are. Still on our local PC we start by printing the public key file:</p>
<pre><code>$ cat ~/.ssh/id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCjwaK4JVuY6PZAr8HocCIOszrLIzzCjO0Xlt9zkFNKvVpP1B92u3JvwwiagqR+k0kHih2SmYnycmXjAcE60tvu+sIDA/7tEJZh4kO4nUYM5PJ17E+qTqUleBXQM74eITydq/USkOqc5p++qUUgA60gUUuNum3igbZiNi71zK4m8g/IDywWYk+5vzNt2i7Sm8NEuauy/xWgnWhCBXZ/tXfkgWgC/4HzpmsfO+nniNh8VgTZp8Q+y+4psSE+p14qUg7KdDbf0Wo/D35wDkMvto96bIT8RF0np9dTkFj8TgNW8inP+6MC+4vCd8F/NpESCVt8hRlBVERMF8Xv4f/0+7WT miguel@miguelspc
</code></pre>
<p>Now we need to copy this data to the clipboard and then switch to the CentOS system, where we will issue these commands:</p>
<pre><code>$ mkdir /home/apps/.ssh
$ echo &lt;paste-your-key-here&gt; &gt; /home/apps/.ssh/authorized_keys
</code></pre>
<p>For my server and public key the following commands are necessary:</p>
<pre><code>$ mkdir /home/apps/.ssh
$ echo ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCjwaK4JVuY6PZAr8HocCIOszrLIzzCjO0Xlt9zkFNKvVpP1B92u3JvwwiagqR+k0kHih2SmYnycmXjAcE60tvu+sIDA/7tEJZh4kO4nUYM5PJ17E+qTqUleBXQM74eITydq/USkOqc5p++qUUgA60gUUuNum3igbZiNi71zK4m8g/IDywWYk+5vzNt2i7Sm8NEuauy/xWgnWhCBXZ/tXfkgWgC/4HzpmsfO+nniNh8VgTZp8Q+y+4psSE+p14qUg7KdDbf0Wo/D35wDkMvto96bIT8RF0np9dTkFj8TgNW8inP+6MC+4vCd8F/NpESCVt8hRlBVERMF8Xv4f/0+7WT miguel@miguelspc &gt; /home/apps/.ssh/authorized_keys
</code></pre>
<p>These commands write your public key to the file <code>authorized_keys</code> in the server. This makes your public key known to OpenSSH on the server. The remaining task is to secure the <code>.ssh</code> directory and the <code>authorized_keys</code> file inside it:</p>
<pre><code>$ chown -R apps:apache /home/apps/.ssh
$ chmod 700 /home/apps/.ssh
$ chmod 600 /home/apps/.ssh/authorized_keys
</code></pre>
<p>These commands change the ownership of these files to the <code>apps</code> account and then make the directory and file only accessible by the new owner.</p>
<p>The password-less login should now be working. We will now logout of the <code>root</code> account of our server and then login again, but this time we will login as the <code>apps</code> user:</p>
<pre><code>$ ssh apps@&lt;your-server&gt;
</code></pre>
<p>If everything goes well you should not need to enter a password to obtain access.</p>
<h3>Installing the application</h3>
<p>We will now use <code>git</code> to download and install <code>microblog</code> into the server. If you are not familiar with <code>git</code> I recommend that you read <a href="http://ryanflorence.com/git-for-beginners/">git for beginners</a>.</p>
<p>The application must be available in a git server that can be reached from our web server. I will be using my own github hosted application. You are welcome to use it as well, or if you prefer you can also clone it and make one that is yours.</p>
<p>To install <code>microblog</code> in our server we just issue a <code>git clone</code> command:</p>
<pre><code>$ git clone https://github.com/miguelgrinberg/microblog.git
$ cd microblog
</code></pre>
<p>The latest version of the application has a few changes from how we left it in the previous article.</p>
<p>First, there are a few new files at the top level, <code>runp-sqlite.fcgi</code>, <code>runp-mysql.fcgi</code>, <code>killpython</code> and <code>requirements.txt</code>. The <code>*.fcgi</code> scripts are starter scripts that are invoked by servers that use the <a href="http://www.fastcgi.com/drupal/">FastCGI</a> protocol. The <code>killpython</code> script will help us restart the application after we upgrade it. The <code>requirements.txt</code> file lists all the dependencies that we need to install to run our application. We will look at all these later.</p>
<p>Another interesting change is in our <code>config.py</code> file. Up to now we initialized our database as follows:</p>
<pre><code>SQLALCHEMY_DATABASE_URI = 'sqlite:///' + os.path.join(basedir, 'app.db')
</code></pre>
<p>Now we have this instead:</p>
<pre><code>if os.environ.get('DATABASE_URL') is None:
    SQLALCHEMY_DATABASE_URI = 'sqlite:///' + os.path.join(basedir, 'app.db')
else:
    SQLALCHEMY_DATABASE_URI = os.environ['DATABASE_URL']
</code></pre>
<p>This is a simple change that enables us to override the database the application will use by setting an environment variable. You will see how we take advantage of this change in the next section.</p>
<h3>Setting up MySQL</h3>
<p>The sqlite database that we've been using all this time is great for simple applications, but when we get into a full blown web server that can serve multiple requests at a time it is a better idea to use a more robust database. So we will setup a MySQL database for <code>microblog</code>.</p>
<p>We have installed MySQL already, so all that is left is to create a database and a user that has permissions on it. To manage our database server we use the <code>mysql</code> tool:</p>
<pre><code>$ mysql -u root -p
Enter password: (enter the mysql root password, or empty if one is not defined)
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 11
Server version: 5.1.67 Source distribution

Copyright (c) 2000, 2012, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql&gt;
</code></pre>
<p>And now that we are in the mysql prompt we can go ahead and create a database and a user, both named <code>apps</code>:</p>
<pre><code>mysql&gt; create database apps character set utf8 collate utf8_bin;
mysql&gt; create user 'apps'@'localhost' identified by 'apps';
mysql&gt; grant all privileges on apps.* to 'apps'@'localhost';
mysql&gt; flush privileges;
mysql&gt; quit;
</code></pre>
<p>Note that you will need to pick a password for the <code>apps</code> MySQL user in the <code>identified by</code> section. For simplicity I have picked <code>apps</code> as password, but on a real installation a hard to guess password should be used. Do not confuse the database <code>apps</code> user with the system's <code>apps</code> user.</p>
<h3>Initializing the application</h3>
<p>Now that we have a database ready we can initialize <code>microblog</code>.</p>
<p>We start by creating and populating the Python virtualenv:</p>
<pre><code>$ virtualenv flask
$ flask/bin/pip install -r requirements.txt
$ flask/bin/pip install mysql-python
</code></pre>
<p>Note that in addition to installing all the dependencies listed in the <code>requirements.txt</code> file we add the MySQL support, which is required by SQLAlchemy when connecting to that database server.</p>
<p>Then we create the database:</p>
<pre><code>$ DATABASE_URL=mysql://apps:apps@localhost/apps ./db_create.py
</code></pre>
<p>Note how we set an environment variable to point to our new MySQL database instead of the sqlite default.</p>
<p>Next we compile all the messages in our translation database:</p>
<pre><code>$ ./tr_compile.py
</code></pre>
<p>And to finalize, we enable group write access to the two folders that need to be written to by the web server:</p>
<pre><code>$ chmod -R g+w search.db tmp
</code></pre>
<p>The <code>search.db</code> folder is used by our Whoosh full text search database. The <code>tmp</code> directory should be left open so that new files can be created there when needed.</p>
<h3>Setting up Apache</h3>
<p>The last thing to do is to configure our Apache web server.</p>
<p>We wil be using the <code>mod_fcgid</code> module to handle the FastCGI communication with our application. Many Linux distributions offer a package for <code>mod_fcgid</code>, but unfortunately CentOS is not one of them, so we will build this module from its source code.</p>
<p>Here is the list of commands that build and install the current release of <code>mod_fcgid</code>:</p>
<pre><code>$ wget http://mirror.metrocast.net/apache/httpd/mod_fcgid/mod_fcgid-2.3.9.tar.gz
$ tar xvzf mod_fcgid-2.3.9.tar.gz
$ cd mod_fcgid-2.3.9
$ APXS=/usr/sbin/apxs ./configure.apxs
$ su
(enter root password)
$ make install
</code></pre>
<p>You can consult the <code>mod_fcgid</code> documentation if you want details on the above commands.</p>
<p>With this module installed we can now configure our server. For this we need to edit the Apache configuration file. Linux distributions do not agree on a standard location and name for this file, so you will need to figure out where this file is. On CentOS, the config file is located at <code>/etc/httpd/conf/httpd.conf</code>.</p>
<p>The changes that we need to make are simply to define our server. At the bottom of the configuration file we add the following (from the root account, since this file is not writable to regular users):</p>
<pre><code>FcgidIPCDir /tmp
AddHandler fcgid-script .fcgi
&lt;VirtualHost *:80&gt;
    DocumentRoot /home/apps/microblog/app/static
    Alias /static /home/apps/microblog/app/static
    ScriptAlias / /home/apps/microblog/runp-mysql.fcgi/
&lt;/VirtualHost&gt;
</code></pre>
<p>The <code>FcgidIPCDir</code> sets the directory where the file sockets will be created. I've found that on CentOS this was going by default to a directory where the <code>apache</code> user did not have write permissions, so I'm putting all these files on <code>/tmp</code> instead.</p>
<p>Next we use <code>AddHandler</code> to tell apache that any files that have a <code>.fcgi</code> extension should be treated as FastCGI files and routed through the <code>mod_fcgid</code> module that we just installed. Remember the new <code>runp-mysql.fcgi</code> file that we have in our root folder? This file uses the <code>flipflop</code> Python module as an adapter so that our application can speak the FastCGI protocol. Let's have a quick look at this file:</p>
<pre><code>#!flask/bin/python
import os
os.environ['DATABASE_URL'] = 'mysql://apps:apps@localhost/apps'

from flipflop import WSGIServer
from app import app

if __name__ == '__main__':
    WSGIServer(app).run()
</code></pre>
<p>Apache will execute this script to start our application. Note how we insert the MySQL database name in the environment, so that Apache can see it.</p>
<p>The <code>&lt;VirtualHost&gt;</code> section defines the host that will run our web server. The <code>*:80</code> denomination indicates that any requests that arrive at the server for any hostnames on port 80 will be handled by this virtual server. The configuration can have multiple <code>&lt;VirtualHost&gt;</code> sections, each defining a different server. To differentiate the servers you can use different IP addresses, domain or sub-domain names or ports.</p>
<p>The definition of our virtual host is pretty simple. The <code>DocumentRoot</code> statement tells Apache where to look for static files. Any requests for files will be served our of this folder, so for example, when browsers ask for a <code>/favicon.ico</code> file to show the little icon next to the URL Apache will try to find it here. Unfortunately all the static files that we use in our application have a <code>/static</code> prefix, so to prevent Apache from looking for another <code>static</code> folder we use the <code>Alias</code> statement, which just says that anything that starts with <code>/static</code> should go directly to our folder. Finally, the <code>ScriptAlias</code> statement tells Apache that when a request that starts with <code>/</code> arrives  (basically all requests that are not for static files) then use the script indicated as second argument to handle it, and that is our <code>.fcgi</code> script.</p>
<p>The Apache config file supports many more options that I will not mention here. I recommend that you review the Apache documentation to decide what options make sense for your server.</p>
<p>To activate the changes we made we need to restart the apache server, again from the root account:</p>
<pre><code>$ service httpd restart
</code></pre>
<p>And now from the browser on your PC you should be able to access microblog at the address <code>http://&lt;your-server&gt;</code>.</p>
<h3>Installing application updates</h3>
<p>The last remaining thing we are going to look at for this server is how to roll out an update of the application.</p>
<p>Let's assume we have deployed the application and it has been running happily for a while on our server. Now it's time to push an update, which could fix some bugs we found, or just add features.</p>
<p>We will use <code>git</code> and our own tools for this. If we login to the web server using the <code>apps</code> account we can upgrade to the latest release from the git repository by running:</p>
<pre><code>$ cd microblog
$ git pull
$ DATABASE_URL=mysql://apps:apps@localhost/apps ./db_upgrade.py
$ ./tr_compile.py
</code></pre>
<p>The <code>git pull</code> operation downloads any new or updated files from our git server. We then upgrade our database and recompile our translation files, in case any of those need updating. That's it!</p>
<p>Once we have the updates in place we need to tell apache to restart the FastCGI processes, and this gets a bit tricky, because we are logged in as user <code>apps</code>, an unprivileged account, while the FastCGI processes are owned by the <code>apache</code> user.</p>
<p>For this we are going to use <code>sudo</code>. The <code>sudo</code> tool allows users to selectively run applications as other users. We don't really want to give our <code>apps</code> account a lot of power, we will limit it to just be able to send kill signals to the FastCGI processes started by the apache user.</p>
<p>The <code>killpython</code> script that we have in the <code>microblog</code> directory does this work:</p>
<pre><code>killall /home/apps/microblog/flask/bin/python
</code></pre>
<p>The problem is, if we run this under the <code>apps</code> account we won't have permission to kill the processes owned by the <code>apache</code> user. To enable <code>apps</code> to kill these processes we have to make a small change in file <code>/etc/sudoers</code>:</p>
<pre><code>apps    ALL=(apache) NOPASSWD:/home/apps/microblog/killpython
Defaults: apps    !requiretty
</code></pre>
<p>Note you will need to make this change as user <code>root</code>, since <code>/etc/sudoers</code> is a system file.</p>
<p>The first cryptic command gives the <code>apps</code> user permission to run the <code>killpython</code> command as user <code>apache</code> without having to provide a password. The second line allows <code>sudo</code> commands for user <code>apps</code> to be issued from a script in addition to doing it from an interactive console. You can read the man page for <code>sudoers</code> for detailed information on the syntax of <code>sudo</code> configuration file.</p>
<p>Now when logged in as <code>apps</code> we can kill the python jobs as follows:</p>
<pre><code>$ sudo -u apache ./killpython
</code></pre>
<p>If the FastCGI processes are killed Apache will restart them the next time a request comes for <code>microblog</code>.</p>
<p>To make upgrading our server a bit more simple we can write a client side script that upgrades and restarts all together. The script would run the following:</p>
<pre><code>ssh apps@&lt;your-server&gt; "cd microblog;git pull;sudo -u apache ./killpython;DATABASE_URL=mysql://apps:apps@localhost/apps ./db_upgrade.py;./tr_compile.py"
</code></pre>
<p>If you store the above line in a script then you can roll out an application upgrade with a single command!</p>
<h3>What's left to do</h3>
<p>I will not discuss a few more mundane operations that are recommended to make a server that is open to the hostile Internet world more secure. Things such as:</p>
<ul>
<li>Not allowing <code>root</code> remote logins</li>
<li>Disabling any services that are not used, like FTP, CIFS, etc.</li>
<li>Setting up a firewall</li>
<li>Keep the server up to date on security fixes.</li>
<li>Etc.</li>
</ul>
<p>I will leave these as an exercise to the interested reader, since they are largely unrelated to this tutorial.</p>
<h2>Hosting on the Raspberry Pi</h2>
<p>The <a href="http://www.raspberrypi.org/">Raspberry Pi</a> is a revolutionary little Linux computer that costs $35. It has very low power consumption so it is the perfect device to host a home based web application that can be online 24/7 without tying up a full blown computer.</p>
<p>There are several Linux distributions that run on the Raspberry Pi. We'll set up our application on <a href="http://www.raspbian.org/">Raspbian</a>, the official distribution.</p>
<p>As a side benefit, note that Raspbian is a derivative of Debian, so the instructions below will apply with little or no modification for Debian/Ubuntu based servers.</p>
<p>We will now follow the same steps we followed for CentOS to get the RPi server setup.</p>
<h3>Client side setup</h3>
<p>A Raspberry Pi is a pretty decent computer to work in. You can connect an HDMI monitor, keyboard and mouse and work directly on it to configure our web server. Also like we did for CentOS or actually any other Linux distribution you can have the Raspberry Pi just connected to the network and then access it remotely from a PC over <code>ssh</code>. See the client side setup section above for CentOS for instructions on how to setup a client PC with <code>ssh</code>.</p>
<p>Note that I will not cover how to install and setup the Raspberry Pi here, there are plenty of articles elsewhere for that. I will assume the Raspberry Pi is already running and connected to the network.</p>
<h3>Installing software packages</h3>
<p>Since the Pi is a limited power machine we will not do a full blown Apache/MySQL installation like we did for CentOS. Instead, we will take a lightweight approach. For web server we will use <a href="http://www.lighttpd.net/">Lighttpd</a> (pronounced "Lighty"), a small web server with a very good and efficient FastCGI implementation. For our database we will stay with sqlite.</p>
<p>With CentOS we used <code>yum</code> to install packages. In Debian derivatives the package manager is called <code>apt-get</code>:</p>
<pre><code>$ sudo apt-get update
$ sudo apt-get upgrade
$ sudo apt-get install python python-dev python-virtualenv lighttpd git
</code></pre>
<p>The <code>update</code> line downloads an updated package list to your Pi. The <code>upgrade</code> line upgrades all installed packages to their latest versions.  It is recommended that you issue these two commands regularly, to keep your Raspberry Pi's software up to date. Finally the <code>install</code> statement installs the packages that we need for our task.</p>
<h3>Creating a user account to host the application</h3>
<p>We said that we will assume our Raspberry Pi server will be in a trusted network. Since security is not a major concern we will not bother creating a dedicated account and instead will install the app directly on the default <code>pi</code> account.</p>
<p>If your Raspberry Pi will be connected to the internet then you should follow the approach we used for CentOS and make a different account that has no privileges, as this ensure that if an intruder manages to access the account the damage that he or she can cause will be limited.</p>
<h3>Password-less logins</h3>
<p>Having a public key authentication procedure is also less important if we assume the application will run on a small intranet, but should you need such functionality the procedure is identical to what we did for the CentOS system.</p>
<h3>Installing the application</h3>
<p>The application installs very easily, again using <code>git</code>:</p>
<pre><code>$ git clone git://github.com/miguelgrinberg/microblog.git
$ cd microblog
</code></pre>
<h3>Initializing the application</h3>
<p>Since we will be using a sqlite database in this host we can go ahead and initialize <code>microblog</code> as we have done in past articles for our development server:</p>
<pre><code>$ virtualenv flask
$ flask/bin/pip install -r requirements.txt
% flask/bin/pip install mysql-python
$ ./db_create.py
$ ./tr_compile.py
</code></pre>
<p>Note that the <code>setup.py</code> script will try to install the MySQL support and that will fail, but this is all right since we will not use it.</p>
<p>The files were all checked out under the <code>pi</code> user ownership. But as we have seen for CentOS, the web server on the Pi will run under a different account. Since security isn't a concern for this server, we will take a much simpler approach:</p>
<pre><code>$ chmod -R 777 *
</code></pre>
<p>The above <code>chmod</code> statement makes all the files writable by all users. Again, this would be a really bad thing to do on an open server, but for a server where you have full control it saves you from the trouble of dealing with user permissions.</p>
<p>I want to make it clear that the Raspberry Pi is perfectly capable of supporting a configuration based on user groups and user permissions similar to what we created above for the CentOS box. We are choosing this simplified setup because we will be using this server in a controlled environment.</p>
<h3>Setting up Lighttpd</h3>
<p>Lighttpd comes with native support for FastCGI, so we do not need to worry about installing a separate module for it.</p>
<p>All we need to do is append the definition of our website to the configuration file, which is located at <code>/etc/lighttpd/lighttpd.conf</code>:</p>
<pre><code>fastcgi.server = ("/microblog" =&gt;
    ((
        "socket" =&gt; "/tmp/microblog-fcgi.sock",
        "bin-path" =&gt; "/home/pi/microblog/runp-sqlite.fcgi",
        "check-local" =&gt; "disable",
        "max-procs" =&gt; 1
    ))
)

alias.url = (
    "/microblog/static/" =&gt; "/home/pi/microblog/app/static/",
)
</code></pre>
<p>And with this our application should be online at <code>http://aaa.bbb.ccc.ddd/microblog</code>, with <code>aaa.bbb.ccc.ddd</code> being the IP address of your Raspberry Pi.</p>
<p>But there are a few things to note in the above configuration, and also a couple of things that didn't initially work and required some changes in the application side.</p>
<p>The <code>fastcgi.server</code> statement is the one that defines the behavior of our FastCGI server, which we are exposing under the <code>/microblog</code> URL. The reason we are not exposing the application at the root URL is simple, we may want to host more than one application, so putting all the URLs under a <code>/microblog</code> root effectively works as a namespace.</p>
<p>Inside the FastCGI definition we provide a socket name in the <code>/tmp</code> directory and the path to our <code>runp-sqlite.fcgi</code> file, which Lighttpd will execute to start up FastCGI processes. The <code>check-local</code> option tells Lighttpd to send requests to the FastCGI server even if the request path matches a file on disk. The <code>max-procs</code> limits the number of FastCGI processes to 1, which for a small server is enough and avoids potential problems with multiple concurrent writers to the sqlite database.</p>
<p>The <code>alias.url</code> section provides the mapping that enables Lighttpd to server our static files. The alias maps any requests for <code>/microblog/static/...</code> to the correct location on disk where we store our static files.</p>
<p>The <code>runp-sqlite.fcgi</code> script is pretty much the same as the one we used for CentOS, but without overriding the database setting:</p>
<pre><code>from flipflop import WSGIServer
from app import app

if __name__ == '__main__':
    WSGIServer(app).run()
</code></pre>
<h3>Some necessary fixes</h3>
<p>Testing this setup reveals a couple of bugs in our application.</p>
<p>First, our javascript and css static files are not being served. The problem becomes evident after inspecting the HTML source of the login page. The <code>base.html</code> template references these files via hardcoded paths that begin with <code>/static</code>, but we said are putting this application inside a <code>/microblog</code> prefix. For example, see how we had the link to the CSS file:</p>
<pre><code>&lt;link href="/static/css/bootstrap.min.css" rel="stylesheet" media="screen"&gt;
</code></pre>
<p>Here we really want <code>/microblog/static/bootstrap.min.css</code>, but of course we can't add <code>/microblog</code> to the <code>base.html</code> file because that will break the development server that runs on our PC. The solution is to let Flask generate these URLs using our old friend <code>url_for</code>:</p>
<pre><code>&lt;link href="{{ url_for('.static', filename='css/bootstrap.min.css') }}" rel="stylesheet" media="screen"&gt;
</code></pre>
<p>After updating all the js and css files as above the site serves the login page with all the auxiliary static files.</p>
<p>But trying to login reveals another problem, Right after logging in we get a 500 error code. Luckily  for us we have logging, so a quick look at <code>/home/pi/microblog/tmp/microblog.log</code> shows the following error:</p>
<pre><code>ProgrammingError: (ProgrammingError) SQLite objects created in a thread can only be used in that same thread.The object was created in thread id -1260325776 and this is thread id -1243548560
</code></pre>
<p>What is this? We are not running multiple threads ourselves but obviously there are multiple threads in our application. The only difference between our development server and this one is that we are now using <code>flipflop</code> for the FastCGI server. Looking at the code in this module we can easily find that by default <code>flipflop</code> runs a multithreaded web server.</p>
<p>A possible solution would be to use the single-threaded FastCGI server from <code>flipflop</code> but that could affect the performance if the server will have multiple concurrent users. Another, more interesting way to handle this problem is to enable threading in <code>sqlite</code> (which appears to be <a href="http://www.sqlite.org/threadsafe.html">fully supported</a>). Multithreading can be enabled in SQLAlchemy by setting the <code>check_same_thread</code> option to <code>False</code> in our <code>config.py</code> configuration file:</p>
<pre><code>SQLALCHEMY_DATABASE_URI = 'sqlite:///' + os.path.join(basedir, 'app.db') + '?check_same_thread=False'
</code></pre>
<p>With this change we are allowing multiple threads to make changes to the database, the sqlite library takes care of synchronizing multiple accesses.</p>
<p>And with these small changes we have a fully enabled web application running on our Raspberry Pi!</p>
<h3>Installing application updates</h3>
<p>To deploy application updates we can just login to the Raspberry Pi and issue the commands that update the source files, database and translation files:</p>
<pre><code>$ cd microblog
$ git pull
$ ./db_upgrade.py
$ ./tr_compile.py
</code></pre>
<p>If you setup password-less login to your Pi then of course you can write a script wrapper that does all this in a single command.</p>
<h2>Final words</h2>
<p>The updated application is available, as always, on my <a href="https://github.com/miguelgrinberg/microblog/tree/version-0.17">github page</a>. Alternatively you can download it as a zip file below:</p>
<p>Download <a href="https://github.com/miguelgrinberg/microblog-2012/archive/version-0.17.zip">microblog 0.17</a>.</p>
<p>In the next article we will be looking at deployment on cloud services as an alternative to the traditional options we explored today.</p>
<p>I will see you then. Thank you!</p>
<p>Miguel</p></div>

<div class="card patreon-bar">
  <div class="card-body">
    <h5>Become a Patron!</h5>
    <p class="card-text">Hello, and thank you for visiting my blog! If you enjoyed this article, please consider supporting my work on this blog on <a href="https://patreon.com/miguelgrinberg">Patreon</a>!</p>
    <a href="https://patreon.com/miguelgrinberg" alt="Become a Patron!" title="Become a Patron!"><img src="../../../static/patreon-button.png"></a>
  </div>
</div>


<div class="card social-bar">
  <div class="card-body">
    <h5>Share this post:</h5>
      <!-- Sharingbutton Hacker News -->
      <a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy&amp;t=The%20Flask%20Mega-Tutorial%2C%20Part%20XVII%3A%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20%282012%29" target="_blank" rel="noopener" aria-label="Hacker News">
        <div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 140"><path fill-rule="evenodd" d="M60.94 82.314L17 0h20.08l25.85 52.093c.397.927.86 1.888 1.39 2.883.53.994.995 2.02 1.393 3.08.265.4.463.764.596 1.095.13.334.262.63.395.898.662 1.325 1.26 2.618 1.79 3.877.53 1.26.993 2.42 1.39 3.48 1.06-2.254 2.22-4.673 3.48-7.258 1.26-2.585 2.552-5.27 3.877-8.052L103.49 0h18.69L77.84 83.308v53.087h-16.9v-54.08z"></path></svg></div>Hacker News</div>
      </a>

      <!-- Sharingbutton Reddit -->
      <a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy&amp;resubmit=true&amp;title=The%20Flask%20Mega-Tutorial,%20Part%20XVII:%20Deployment%20on%20Linux%20(even%20on%20the%20Raspberry%20Pi!)%20(2012)" target="_blank" rel="noopener" aria-label="Reddit">
        <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96 0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65 0 3-1.35 3-3s-1.35-3-3-3c-1.38 0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65 0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66 0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64 0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4 0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6 0 .23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1 0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></div>Reddit</div>
      </a>

      <!-- Sharingbutton Twitter -->
      <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=The%20Flask%20Mega-Tutorial%2C%20Part%20XVII%3A%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20%282012%29&amp;url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy" target="_blank" rel="noopener" aria-label="Twitter">
        <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div>Twitter</div>
      </a>

      <!-- Sharingbutton LinkedIn -->
      <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy&amp;title=The%20Flask%20Mega-Tutorial%2C%20Part%20XVII%3A%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20%282012%29&amp;summary=The%20Flask%20Mega-Tutorial%2C%20Part%20XVII%3A%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20%282012%29&amp;source=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy" target="_blank" rel="noopener" aria-label="LinkedIn">
        <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg></div>LinkedIn</div>
      </a>

      <!-- Sharingbutton Facebook -->
      <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy" target="_blank" rel="noopener" aria-label="Facebook">
        <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div>Facebook</div>
      </a>

      <!-- Sharingbutton E-Mail -->
      <a class="resp-sharing-button__link" href="mailto:?subject=The%20Flask%20Mega-Tutorial%2C%20Part%20XVII%3A%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20%282012%29&amp;body=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy" target="_self" rel="noopener" aria-label="E-Mail">
        <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></div>E-Mail</div>
      </a>

  </div>
</div>

<div id="comments" class="post-comment-count">
  
  <a class="btn btn-outline-secondary" href="../../the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy.html#comments">101 comments</a>
  
</div>


<div class="comments">
  <ul>
    
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#76</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2015-07-16T06:26:39Z" data-function="fromNow" data-refresh="0" style="display: none">2015-07-16T06:26:39Z</span>
  </p>
  <div>
    <p>@Wasch: well, the reply looks like a redirect, it's not an error. The content of the page is not going to be right because the WSGI environment is missing, but the application appears to run. So really this doesn't say much, just that your fcgi file is able to execute, so the problem must be elsewhere.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/95b23ef11f29431c2f85f630c2578f8e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#77</span> <span class="badge text-bg-warning">Wasch</span> said
    
    <span class="flask-moment" data-timestamp="2015-07-16T08:09:46Z" data-function="fromNow" data-refresh="0" style="display: none">2015-07-16T08:09:46Z</span>
  </p>
  <div>
    <p>Thanks @Miguel, I tried setting up your microblog and got a 302 FOUND error message with a working redirect to the login page, but the page would not serve when i pointed my browser to <a href="http://192.168.xxx.xxx/microblog" rel="nofollow">192.168.XXX.XXX/microblog</a>. Static pages were also a no go. I don't understand how the WSGI environment is missing (am running this on the raspberry pi), i'll check through online resources, but any pointers you may have would be welcome.</p>
<p>PS: I also had to switch to flup from flipflop.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#78</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2015-07-17T05:34:27Z" data-function="fromNow" data-refresh="0" style="display: none">2015-07-17T05:34:27Z</span>
  </p>
  <div>
    <p>@Wasch: static pages do not go through the Flask application, you need to configure them in the web server. Regarding the redirect I'm not sure I understand. You can connect to the main page, but then the redirect to the login page fails? What is the login URL you are being sent? Check if it is wrong that may give you some clues.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/b0a8bb03fc95bcf300bba9db8116b6a5?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#79</span> <span class="badge text-bg-warning">Konrad</span> said
    
    <span class="flask-moment" data-timestamp="2015-09-24T11:59:18Z" data-function="fromNow" data-refresh="0" style="display: none">2015-09-24T11:59:18Z</span>
  </p>
  <div>
    <p>First of all thank you very much for this tutorial.<br>
I had a problem with "Traceback (most recent call last):<br>
  File "./<a href="http://db_create.py/" rel="nofollow">db_create.py</a>", line 2, in &lt;module&gt;<br>
    from migrate.versioning import api<br>
ImportError: No module named migrate.versioning"<br>
The solution was to clone repo from branch version 0.17</p>
<p>because master is somewhat different - I had no time to investigate which change caused it but insted of cloning with commend <br>
<code>$ git clone git://<a href="http://github.com/miguelgrinberg/microblog.git" rel="nofollow">github.com/miguelgrinberg/microblog.git</a></code><br>
I cloned branch with:<br>
<code>git clone -b version-0.17 <a href="https://github.com/miguelgrinberg/microblog.git" rel="nofollow">https://github.com/miguelgrinberg/microblog.git</a></code><br>
and it helped</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/d0796ae10a445bb0ae5f0041bbb0e697?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#80</span> <span class="badge text-bg-warning">Neil</span> said
    
    <span class="flask-moment" data-timestamp="2015-12-04T21:41:55Z" data-function="fromNow" data-refresh="0" style="display: none">2015-12-04T21:41:55Z</span>
  </p>
  <div>
    <p>Just wanted to thank you again for the excellent tutorial.  The site is now up and running on an AWS EC2 instance.  I will be evangelizing this tutorial to anyone interested in learning Flask or backend development in general!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/adb0ee7fe59e2f53b4534ab5af275d8c?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#81</span> <span class="badge text-bg-warning">Phill</span> said
    
    <span class="flask-moment" data-timestamp="2016-01-02T21:19:24Z" data-function="fromNow" data-refresh="0" style="display: none">2016-01-02T21:19:24Z</span>
  </p>
  <div>
    <p>Liking your blog! I had trouble getting Lighttpd up and running on an RPi. The first problem was this error: </p>
<p>Duplicate config variable in conditional 0 global: alias.url</p>
<p>I fixed this by changing the line: <br>
alias.url = (<br>
    "/microblog/static/" =&gt; "/home/pi/microblog/app/static/",<br>
)</p>
<p>to:<br>
alias.url += (<br>
    "/microblog/static/" =&gt; "/home/pi/microblog/app/static/",<br>
)</p>
<p>That allowed me to start the server.</p>
<p>Then I kept getting 404's and had to:<br>
sudo lighttpd-enable-mod fastcgi<br>
sudo service lighttpd reload</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/1ce8117cf121774c2f69f2d1a997f0bd?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#82</span> <span class="badge text-bg-warning">Christer</span> said
    
    <span class="flask-moment" data-timestamp="2016-01-18T00:36:23Z" data-function="fromNow" data-refresh="0" style="display: none">2016-01-18T00:36:23Z</span>
  </p>
  <div>
    <p>Thanks for the tutorial on Flask. I am rather new on Flask and try by step and step learn Flask through examples and reading. I have installed Flask on Raspberry and it works great with static template. On my Rasperry pi I have a python application running that collecting temperature. I want to get information from temperature python application  to show on my Flask webserver. I can not figur out how I can retrieve information  from on other running python application into Flask evironment. The temperature is constantly changing and that must reflekt on the website, not once but multiple value on temperature change on website. Would glad if you could give me some direction how that could be solved.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#83</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2016-01-27T15:37:37Z" data-function="fromNow" data-refresh="0" style="display: none">2016-01-27T15:37:37Z</span>
  </p>
  <div>
    <p>@Christer: You have a few options. One is to have the temperature service offer an API endpoint that returns the current temp. The Flask app can send a request to the other service to get the current value and relay it to the client. Another option is to save the temperature routinely to a file, which the Flask app can read as needed.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/1615a76bab103b14389f5a3c3bbd71c8?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#84</span> <span class="badge text-bg-warning">Mike Zhao</span> said
    
    <span class="flask-moment" data-timestamp="2016-02-22T02:28:07Z" data-function="fromNow" data-refresh="0" style="display: none">2016-02-22T02:28:07Z</span>
  </p>
  <div>
    <p>Hi Miguel,</p>
<pre><code>    I followed your tutorial and now am trying to deploy my app to Heroku. However, I'm getting a DatabaseAlreadyControlled Error during the init process from the file <a href="http://db_create.py/" rel="nofollow">db_create.py</a>. I've tried deleting my database multiple times but it still doesn't seem to work. Can you help me? I've included the github link if you would like to see my code: <a href="https://github.com/zzhao36/chara2" rel="nofollow">https://github.com/zzhao36/chara2</a>.
</code></pre>
<p>2016-02-22T02:23:17.582534+00:00 app[init.1]: Traceback (most recent call last):<br>
2016-02-22T02:23:17.582549+00:00 app[init.1]:   File "<a href="http://db_create.py/" rel="nofollow">db_create.py</a>", line 12, in &lt;module&gt;<br>
2016-02-22T02:23:17.582554+00:00 app[init.1]:     api.version_control(SQLALCHEMY_DATABASE_URI, SQLALCHEMY_MIGRATE_REPO)<br>
2016-02-22T02:23:17.582555+00:00 app[init.1]:   File "&lt;decorator-gen-8&gt;", line 2, in version_control<br>
2016-02-22T02:23:17.582643+00:00 app[init.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/migrate/versioning/util/<strong>init</strong>.py", line 160, in with_engine<br>
2016-02-22T02:23:17.582690+00:00 app[init.1]:     return f(<em>a, </em>*kw)<br>
2016-02-22T02:23:17.582705+00:00 app[init.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/migrate/versioning/<a href="http://api.py/" rel="nofollow">api.py</a>", line 250, in version_control<br>
2016-02-22T02:23:17.582764+00:00 app[init.1]:     ControlledSchema.create(engine, repository, version)<br>
2016-02-22T02:23:17.582768+00:00 app[init.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/migrate/versioning/<a href="http://schema.py/" rel="nofollow">schema.py</a>", line 141, in create<br>
2016-02-22T02:23:17.582819+00:00 app[init.1]:     table = cls._create_table_version(engine, repository, version)<br>
2016-02-22T02:23:17.582822+00:00 app[init.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/migrate/versioning/<a href="http://schema.py/" rel="nofollow">schema.py</a>", line 189, in _create_table_version<br>
2016-02-22T02:23:17.582876+00:00 app[init.1]:     raise exceptions.DatabaseAlreadyControlledError<br>
2016-02-22T02:23:17.582891+00:00 app[init.1]: migrate.exceptions.DatabaseAlreadyControlledError</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/1adbb1173e63990f194cb6aeb7243a2c?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#85</span> <span class="badge text-bg-warning">ruslan</span> said
    
    <span class="flask-moment" data-timestamp="2016-06-27T22:39:31Z" data-function="fromNow" data-refresh="0" style="display: none">2016-06-27T22:39:31Z</span>
  </p>
  <div>
    <p>Hello Miguel! Thank you for detail and helpful manual!</p>
<p>I follow your manual from part 1 and finally installed the application in Debian 8 + lighttpd + sqlite. Debian instance works well under MS Hyper-V (2008 R2).</p>
<p>I found one small item in code that move FastCGI to "Error 500".</p>
&lt;h1&gt;actual from version 0.7 till version 0.17&lt;/h1&gt;
<p>File app/"<strong>init</strong>.py   &gt;&gt; line 54<br>
file_handler = RotatingFileHandler('tmp/microblog.log', 'a',</p>
<p>Application can't find directory 'tmp/...' because of missed "/". <br>
I changed it to '/tmp/...' and updated code works w/o error:<br>
file_handler = RotatingFileHandler('/tmp/microblog.log', 'a',</p>
<p>If this notice is matter, please update the manual in next reduction.<br>
I put the same comments to part 7 when code was initially presented.</p>
<p>regards,<br>
ruslan</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/dafc3f429e0ee073e864e85a32588c07?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#86</span> <span class="badge text-bg-warning">jeh0753</span> said
    
    <span class="flask-moment" data-timestamp="2016-06-29T22:59:17Z" data-function="fromNow" data-refresh="0" style="display: none">2016-06-29T22:59:17Z</span>
  </p>
  <div>
    <p>Miguel, I'm having an issue here related to password-less login. I'm running this on CentOS 7, and found that if I give 775 permissions to the apps folder, I am denied permission to enter the apps account. When I adjusted the /etc/.ssh/sshd-config file to turn strictmode off, I was able to get in anyway, but from my research I found that so long as StrictMode is enabled (which it should be), the maximum permissions for the /home/apps/ folder needs to be a maximum of 755. Is there a work-around for this?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#87</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2016-07-14T18:18:35Z" data-function="fromNow" data-refresh="0" style="display: none">2016-07-14T18:18:35Z</span>
  </p>
  <div>
    <p>@rusian: the tmp directory is local to the project, it is not the global /tmp. But if you want logs to go to the system wide /tmp your change is fine.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#88</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2016-07-14T18:44:01Z" data-function="fromNow" data-refresh="0" style="display: none">2016-07-14T18:44:01Z</span>
  </p>
  <div>
    <p>@jeh0753: not sure I understand why 775 vs 755 is important. This is a security feature of SSH. If you want to relax security on your account you can, but that means you have to tell SSH to not check your account (i.e. disable StrictMode).</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/dafc3f429e0ee073e864e85a32588c07?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#89</span> <span class="badge text-bg-warning">Jake Hawkesworth</span> said
    
    <span class="flask-moment" data-timestamp="2016-07-20T00:19:55Z" data-function="fromNow" data-refresh="0" style="display: none">2016-07-20T00:19:55Z</span>
  </p>
  <div>
    <p>Miguel, thanks for this great, challenging tutorial. </p>
<p>For some reason, tmp/microblog.log is not being created by the RotatingFileHandler, and the <a href="http://db_create.py/" rel="nofollow">db_create.py</a> step is throwing me a "no such file" error. When I comment the RotatingFileHandler out, I immediately get a new error, sqlalchemy.exc.OperationalError: (OperationalError)  1045, which I haven't been able to figure out. I'm running Python 2.7 and Centos 7. Does this sound like a package version issue?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/dafc3f429e0ee073e864e85a32588c07?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#90</span> <span class="badge text-bg-warning">Jake</span> said
    
    <span class="flask-moment" data-timestamp="2016-07-21T01:39:22Z" data-function="fromNow" data-refresh="0" style="display: none">2016-07-21T01:39:22Z</span>
  </p>
  <div>
    <p>@Miguel - Thanks so much for your reply. I was able to get past the 775 755 issue; it turned out that I had incorrect settings on the home folder for apps. This was a great link that helped me through it, if others run into issues where they can't get ssh to work without StrictMode turned off: <br>
<a href="http://callumpy.co.uk/blog/centos-public-key-authentication-setup-guide-and-tips/" rel="nofollow">http://callumpy.co.uk/blog/centos-public-key-authentication-setup-guide-and-tips/</a></p>
<p>I sent a followup question yesterday; I've been stuck on the <a href="http://db_compile.py/" rel="nofollow">db_compile.py</a> step for a few days; can't seem to crack it!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/dafc3f429e0ee073e864e85a32588c07?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#91</span> <span class="badge text-bg-warning">Jake</span> said
    
    <span class="flask-moment" data-timestamp="2016-07-21T02:17:45Z" data-function="fromNow" data-refresh="0" style="display: none">2016-07-21T02:17:45Z</span>
  </p>
  <div>
    <p>@Miguel - update on my problem. @rusian had the idea of switching the / in tmp, and that solved my issue with the log file. I'm still running into error 1045 with <a href="http://db_create.py/" rel="nofollow">db_create.py</a>:<br>
sqlalchemy.exc.OperationalError: (OperationalError) (1045, "Access denied for user 'apps'@'localhost' (using password: YES)")<br>
The issue traces back to:<br>
File "./microblog/<a href="http://db_create.py/" rel="nofollow">db_create.py</a>", line 7, in &lt;module&gt;<br>
    db.create_all()</p>
<p>This is weird, because I've been able to successfully log in to mysql's apps account without a password. Any ideas?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/dafc3f429e0ee073e864e85a32588c07?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#92</span> <span class="badge text-bg-warning">Jake</span> said
    
    <span class="flask-moment" data-timestamp="2016-07-23T05:11:15Z" data-function="fromNow" data-refresh="0" style="display: none">2016-07-23T05:11:15Z</span>
  </p>
  <div>
    <p>@Miguel - solved my problem. The code above for db_create assumes the password to be 'apps'. I had no password at all, so once I got rid of that part of the line of code, the problem went away!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/232a37d2cbfa1672878edd79ed38f724?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#93</span> <span class="badge text-bg-warning">Soham</span> said
    
    <span class="flask-moment" data-timestamp="2016-07-23T16:57:08Z" data-function="fromNow" data-refresh="0" style="display: none">2016-07-23T16:57:08Z</span>
  </p>
  <div>
    <p>Hi Miguel, many thanks for this amazing tutorial. I encountered a problem while setting up the server: while executing the command 'make' to compile mod_fcgid, i get this error:<br>
Makefile:29: /<a href="http://rules.mk/" rel="nofollow">rules.mk</a>: No such file or directory<br>
make: *** No rule to make target `/<a href="http://rules.mk/" rel="nofollow">rules.mk</a>'.  Stop.<br>
Would be glad if you could help me. Thanks</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#94</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2016-07-28T05:38:11Z" data-function="fromNow" data-refresh="0" style="display: none">2016-07-28T05:38:11Z</span>
  </p>
  <div>
    <p>@Soham: not familiar with the problem you are having. Maybe a good idea to ask on stack overflow.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/b7b0d23de6cfdf42483f2c499473d69b?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#95</span> <span class="badge text-bg-warning">Souvik Ray</span> said
    
    <span class="flask-moment" data-timestamp="2017-04-01T10:09:55Z" data-function="fromNow" data-refresh="0" style="display: none">2017-04-01T10:09:55Z</span>
  </p>
  <div>
    <p>I don't understand one thing...I have linux installed and coded the app in linux only.Then why do I need a VPS?Can't I directly host my site on Heroku?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/89fbe3bf3a71de6c32c34adb65059e5e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#96</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2017-04-02T05:38:25Z" data-function="fromNow" data-refresh="0" style="display: none">2017-04-02T05:38:25Z</span>
  </p>
  <div>
    <p>@Souvik: Yes. Heroku is one option, a VPS is another. There are actually even more options for deploying your app. You just need to pick the one you like the best.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/7de5b452c5337c64e41c1eb6b4243c4a?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#97</span> <span class="badge text-bg-warning">Sun Qingyao</span> said
    
    <span class="flask-moment" data-timestamp="2017-08-16T03:01:10Z" data-function="fromNow" data-refresh="0" style="display: none">2017-08-16T03:01:10Z</span>
  </p>
  <div>
    <p>Hello, I'm following your great tutorial, and it's really educative. However, I got an error with flipflop: “OSError: [Errno 88] Socket operation on non-socket”. Is it an issue of Apache, CentOS, or flipflop itself?</p>
<p>Please see this Stack Overflow question for a MCVE:</p>
<p><a href="https://stackoverflow.com/q/45703959/5399734" rel="nofollow">https://stackoverflow.com/q/45703959/5399734</a></p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#98</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2017-08-16T06:21:30Z" data-function="fromNow" data-refresh="0" style="display: none">2017-08-16T06:21:30Z</span>
  </p>
  <div>
    <p>@Sun: You can't run the fastcgi script from the terminal. This script is supposed to be executed by Apache. Typically you have it configured in a ScriptAlias directive in your Apache config file.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/28a64a9a4772753a3c15f559c2b43a80?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#99</span> <span class="badge text-bg-warning">Victor Johnson</span> said
    
    <span class="flask-moment" data-timestamp="2017-08-30T08:31:51Z" data-function="fromNow" data-refresh="0" style="display: none">2017-08-30T08:31:51Z</span>
  </p>
  <div>
    <p>Can i deploy this microblog in a shared hosting which has a cpanel??<br>
if not why? can you explain me why?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#100</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2017-08-30T22:25:22Z" data-function="fromNow" data-refresh="0" style="display: none">2017-08-30T22:25:22Z</span>
  </p>
  <div>
    <p>@Victor: If you can run Python scripts on your hosting account then I don't see why you would not be able to run this application. Unfortunately shared hosting is not a platform that I will be writing about, I instead prefer to focus on more modern cloud hosting options that are more flexible.</p>
  </div>
</div>
    </li>
    
  </ul>
</div>

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item"><a class="page-link" href="1.html#comments">&laquo;&laquo;</a></li>
    <li class="page-item"><a class="page-link" href="3.html#comments">&laquo;</a></li>
    <li class="page-item"><a class="page-link" href="5.html#comments">&raquo;</a></li>
    <li class="page-item"><a class="page-link" href="0.html#comments">&raquo;&raquo;</a></li>
  </ul>
</nav>



<div id="comment-form">
  <h3>Leave a Comment</h3>

  
  
  

  
<form action="#comment-form" method="post">
  <input id="url" name="url" type="hidden" value="">
<input id="csrf_token" name="csrf_token" type="hidden" value="IjQyYjY5YzZlNTcyYjFkMTVlZGRkOWJjYjA3ZmFlYWFiNTg3YmU5ODki.Zxdzxw.SOjJbISnoLZj1obdfPBXloyC0Uc">
    
  <div class="mb-3">
    <label class="form-label" for="name">Name</label>
    <div class="input-group has-validation">
      <input class="form-control" id="name" name="name" required type="text" value="">
    </div>
  </div>

    
    
  <div class="mb-3">
    <label class="form-label" for="email">Email</label>
    <div class="input-group has-validation">
      <input class="form-control" id="email" name="email" required type="text" value="">
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="comment">Comment</label>
    <div class="input-group has-validation">
      <textarea class="form-control" id="comment" name="comment" required>
</textarea>
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="captcha">Captcha</label>
    <div class="input-group has-validation">
      
<script src='https://www.google.com/recaptcha/api.js' async defer></script>
<div class="g-recaptcha" data-sitekey="6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S"></div>

    </div>
  </div>

    
  <input class="btn btn-primary mb-3" id="submit" name="submit" type="submit" value="Submit">

      
</form>

</div>


</div>

      </div>
    </div>
    
    <div class="col-md-4">
      <div id="sidebar">
        
          
  



<div class="card">
  
  
  
  
  <div class="card-header">
    <div class="row">
      <div class="col">The Flask Mega-Tutorial</div>
      <div class="col text-end">
        <a href="../../announcing-the-flask-mega-tutorial-2024-edition.html">
          <h5 style="margin-bottom: 0px"><span class="badge text-bg-warning">New 2024 Edition!</span></h5>
        </a>
      </div>
    </div>
  </div>
  <a class="card-book-cover" href="https://amzn.to/3MQffrm">
    <img src="../../../static/mega-tutorial-2024-small.png" alt="The New Flask Mega-Tutorial">
  </a>
  <div class="card-body">
    <p class="card-text">If you would you like to support my work on my <a href="../../the-flask-mega-tutorial-part-i-hello-world.html">Flask Mega-Tutorial series</a> on this blog and as a reward have access to the complete tutorial nicely structured as a book and/or a set of videos, you can now order it from my <a href="https://courses.miguelgrinberg.com/p/flask-mega-tutorial">Courses</a> site or from <a href="https://amzn.to/3MQffrm">Amazon</a>.</p>
  </div>
  <div class="card-body">
    <a class="card-link" href="https://amzn.to/3MQffrm">Click here to get the Book!</a><br />
    <a class="card-link" href="https://courses.miguelgrinberg.com/p/flask-mega-tutorial">Click here to get the Video Course!</a>
  </div>

  
</div>
        
        <div class="card">
  <div class="card-header">About Miguel</div>
  <div class="card-body">
    <img style="float: right; margin: 0px 8px 8px 0px; padding: 4px; border: 1px solid #ccc;" src="../../../static/miguel.jpg" />
    <p class="card-text">Welcome to my blog!</p>
    <p class="card-text">I'm a software engineer and technical writer, currently living in Drogheda, Ireland.</p>
    <p class="card-text">You can also find me on <a href="https://twitter.com/miguelgrinberg">Twitter</a>, <a href="https://mstdn.social/@miguelgrinberg">Mastodon</a>, <a href="https://github.com/miguelgrinberg">Github</a>, <a href="http://www.linkedin.com/in/miguelgrinberg">LinkedIn</a>, <a href="https://youtube.com/miguelgrinberg">YouTube</a>, <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a> and <a href="https://patreon.com/miguelgrinberg">Patreon</a>.</p>
    <p class="card-text">Thank you for visiting!</p>
  </div>
</div>
        
        <div class="card" id="categories">
  <div class="card-header">Categories</div>
  <div class="card-body">
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AI/feed"><img src="../../../static/rss-small.png" title="AI RSS Feed" label="AI RSS Feed" alt="AI RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AI" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AI" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AWS/feed"><img src="../../../static/rss-small.png" title="AWS RSS Feed" label="AWS RSS Feed" alt="AWS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AWS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AWS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Arduino/feed"><img src="../../../static/rss-small.png" title="Arduino RSS Feed" label="Arduino RSS Feed" alt="Arduino RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Arduino" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Arduino" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Authentication/feed"><img src="../../../static/rss-small.png" title="Authentication RSS Feed" label="Authentication RSS Feed" alt="Authentication RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Authentication" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Authentication" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Blog/feed"><img src="../../../static/rss-small.png" title="Blog RSS Feed" label="Blog RSS Feed" alt="Blog RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Blog" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Blog" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/C++/feed"><img src="../../../static/rss-small.png" title="C++ RSS Feed" label="C++ RSS Feed" alt="C++ RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/C++" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="C++" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/CSS/feed"><img src="../../../static/rss-small.png" title="CSS RSS Feed" label="CSS RSS Feed" alt="CSS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/CSS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="CSS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Cloud/feed"><img src="../../../static/rss-small.png" title="Cloud RSS Feed" label="Cloud RSS Feed" alt="Cloud RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Cloud" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Cloud" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Database/feed"><img src="../../../static/rss-small.png" title="Database RSS Feed" label="Database RSS Feed" alt="Database RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Database" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Database" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Docker/feed"><img src="../../../static/rss-small.png" title="Docker RSS Feed" label="Docker RSS Feed" alt="Docker RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Docker" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Docker" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Filmmaking/feed"><img src="../../../static/rss-small.png" title="Filmmaking RSS Feed" label="Filmmaking RSS Feed" alt="Filmmaking RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Filmmaking" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Filmmaking" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Flask/feed"><img src="../../../static/rss-small.png" title="Flask RSS Feed" label="Flask RSS Feed" alt="Flask RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" /> <small><em>126</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Games/feed"><img src="../../../static/rss-small.png" title="Games RSS Feed" label="Games RSS Feed" alt="Games RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Games" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Games" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Heroku/feed"><img src="../../../static/rss-small.png" title="Heroku RSS Feed" label="Heroku RSS Feed" alt="Heroku RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Heroku" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Heroku" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/IoT/feed"><img src="../../../static/rss-small.png" title="IoT RSS Feed" label="IoT RSS Feed" alt="IoT RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/IoT" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="IoT" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/JavaScript/feed"><img src="../../../static/rss-small.png" title="JavaScript RSS Feed" label="JavaScript RSS Feed" alt="JavaScript RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/JavaScript" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="JavaScript" /> <small><em>35</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/MicroPython/feed"><img src="../../../static/rss-small.png" title="MicroPython RSS Feed" label="MicroPython RSS Feed" alt="MicroPython RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/MicroPython" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="MicroPython" /> <small><em>9</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microdot/feed"><img src="../../../static/rss-small.png" title="Microdot RSS Feed" label="Microdot RSS Feed" alt="Microdot RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microdot" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microdot" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microservices/feed"><img src="../../../static/rss-small.png" title="Microservices RSS Feed" label="Microservices RSS Feed" alt="Microservices RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microservices" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microservices" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Movie Reviews/feed"><img src="../../../static/rss-small.png" title="Movie Reviews RSS Feed" label="Movie Reviews RSS Feed" alt="Movie Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Movie Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Movie Reviews" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/OpenStack/feed"><img src="../../../static/rss-small.png" title="OpenStack RSS Feed" label="OpenStack RSS Feed" alt="OpenStack RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/OpenStack" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="OpenStack" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Personal/feed"><img src="../../../static/rss-small.png" title="Personal RSS Feed" label="Personal RSS Feed" alt="Personal RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Personal" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Personal" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Photography/feed"><img src="../../../static/rss-small.png" title="Photography RSS Feed" label="Photography RSS Feed" alt="Photography RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Photography" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Photography" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Product Reviews/feed"><img src="../../../static/rss-small.png" title="Product Reviews RSS Feed" label="Product Reviews RSS Feed" alt="Product Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Product Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Product Reviews" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Programming/feed"><img src="../../../static/rss-small.png" title="Programming RSS Feed" label="Programming RSS Feed" alt="Programming RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" /> <small><em>187</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Project Management/feed"><img src="../../../static/rss-small.png" title="Project Management RSS Feed" label="Project Management RSS Feed" alt="Project Management RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Project Management" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Project Management" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Python/feed"><img src="../../../static/rss-small.png" title="Python RSS Feed" label="Python RSS Feed" alt="Python RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" /> <small><em>169</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/REST/feed"><img src="../../../static/rss-small.png" title="REST RSS Feed" label="REST RSS Feed" alt="REST RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/REST" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="REST" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Rackspace/feed"><img src="../../../static/rss-small.png" title="Rackspace RSS Feed" label="Rackspace RSS Feed" alt="Rackspace RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Rackspace" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Rackspace" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Raspberry Pi/feed"><img src="../../../static/rss-small.png" title="Raspberry Pi RSS Feed" label="Raspberry Pi RSS Feed" alt="Raspberry Pi RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Raspberry Pi" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Raspberry Pi" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/React/feed"><img src="../../../static/rss-small.png" title="React RSS Feed" label="React RSS Feed" alt="React RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/React" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="React" /> <small><em>18</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Robotics/feed"><img src="../../../static/rss-small.png" title="Robotics RSS Feed" label="Robotics RSS Feed" alt="Robotics RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Robotics" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Robotics" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Security/feed"><img src="../../../static/rss-small.png" title="Security RSS Feed" label="Security RSS Feed" alt="Security RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Security" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Security" /> <small><em>12</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Video/feed"><img src="../../../static/rss-small.png" title="Video RSS Feed" label="Video RSS Feed" alt="Video RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Video" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Video" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/WebSocket/feed"><img src="../../../static/rss-small.png" title="WebSocket RSS Feed" label="WebSocket RSS Feed" alt="WebSocket RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/WebSocket" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="WebSocket" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Webcast/feed"><img src="../../../static/rss-small.png" title="Webcast RSS Feed" label="Webcast RSS Feed" alt="Webcast RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Webcast" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Webcast" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Windows/feed"><img src="../../../static/rss-small.png" title="Windows RSS Feed" label="Windows RSS Feed" alt="Windows RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Windows" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Windows" /> <small><em>1</em></small>
      </form>
    </div>
    
  </div>
</div>
        
      </div>
    </div>
    
  </div>
  <div id="footer">
    
    <p>&copy; 2012-<script type="text/javascript">document.write(new Date().getFullYear());</script> by Miguel Grinberg. All rights reserved. <a href="mailto:webmaster _at_ miguelgrinberg _dot_ com">Questions?</a></p>
  </div>
</div>

  
    <script src="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../../static/prettify.js"></script>
  <script src="../../../../cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment-with-locales.min.js" integrity="sha512-42PE0rd+wZ2hNXftlM78BSehIGzezNeQuzihiBCvUEB3CVxHvsShF86wBWwQORNxNINlBPuq7rG4WWhNiTVHFg==" crossorigin="anonymous"></script>

<script>
moment.locale("en");
function flask_moment_render(elem) {{
    const timestamp = moment(elem.dataset.timestamp);
    const func = elem.dataset.function;
    const format = elem.dataset.format;
    const timestamp2 = elem.dataset.timestamp2;
    const no_suffix = elem.dataset.nosuffix;
    const units = elem.dataset.units;
    let args = [];
    if (format)
        args.push(format);
    if (timestamp2)
        args.push(moment(timestamp2));
    if (no_suffix)
        args.push(no_suffix);
    if (units)
        args.push(units);
    elem.textContent = timestamp[func].apply(timestamp, args);
    elem.classList.remove('flask-moment');
    elem.style.display = "";
}}
function flask_moment_render_all() {{
    const moments = document.querySelectorAll('.flask-moment');
    moments.forEach(function(moment) {{
        flask_moment_render(moment);
        const refresh = moment.dataset.refresh;
        if (refresh && refresh > 0) {{
            (function(elem, interval) {{
                setInterval(function() {{
                    flask_moment_render(elem);
                }}, interval);
            }})(moment, refresh);
        }}
    }})
}}
document.addEventListener("DOMContentLoaded", flask_moment_render_all);
</script>

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-20EHZP9GRZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-20EHZP9GRZ');
  </script>
  
  <script type="text/javascript">
    function setThemeUI() {
      document.getElementById('select-theme-auto').classList.remove('active');
      document.getElementById('select-theme-light').classList.remove('active');
      document.getElementById('select-theme-dark').classList.remove('active');
      const theme = getPreferredTheme();
      const actualTheme = document.documentElement.getAttribute('data-bs-theme', 'light');
      document.getElementById('select-theme-' + theme).classList.add('active');
      document.getElementById('current-theme').href.baseVal = `#icon-theme-${actualTheme}`;
    };

    function updateTheme(theme) {
      if (theme === 'auto') {
        localStorage.removeItem('theme')
      }
      else {
        localStorage.setItem('theme', theme)
      }
      setTheme(getPreferredTheme());
    }

    setThemeUI();

    const darkModePreference = window.matchMedia("(prefers-color-scheme: dark)");
    darkModePreference.addEventListener("change", e => {
      if (getPreferredTheme() === 'auto') {
        setTheme('auto');
      }
    });

    document.addEventListener("DOMContentLoaded", () => {
      // add prettyprint class to all <pre><code></code></pre> blocks
      let prettify = false;
      document.querySelectorAll('div.post-body pre code').forEach((code) => {
        code.parentNode.classList.add('prettyprint');
        prettify = true;
      });
      prettyPrint();
    });
  </script>

  </body>

<!-- Mirrored from blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi-legacy/page/4 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 09:45:36 GMT -->
</html>