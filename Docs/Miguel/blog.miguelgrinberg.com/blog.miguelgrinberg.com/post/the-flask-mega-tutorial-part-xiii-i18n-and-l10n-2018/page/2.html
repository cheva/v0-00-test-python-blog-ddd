<!doctype html>
<html lang="en">
  
<!-- Mirrored from blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018/page/2 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 09:40:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
  <script type="text/javascript">
    function getPreferredTheme() {
      const storedTheme = localStorage.getItem('theme')
      if (storedTheme) {
        return storedTheme
      }
      return 'auto';
    }

    function setTheme(theme) {
      if (theme === 'auto') {
        theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
      }
      document.documentElement.setAttribute('data-bs-theme', theme);
    };

    setTheme(getPreferredTheme());
  </script>
  
    <title>
  
    The Flask Mega-Tutorial Part XIII: I18n and L10n (2018) - miguelgrinberg.com
  
</title>
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="description" content="miguelgrinberg.com">
  <meta name="copyright" content="Copyright (c) 2012-2024 Miguel Grinberg">
  <meta name="author" content="Miguel Grinberg">
  
  <meta name="keywords" content="python, flask, programming, internationalization, i18n, localization, l10n, gettext, babel, translations">
  
  
  <link rel="canonical" href="../../the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018.html">
  

  
    <link href="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&amp;display=swap" rel="stylesheet">

  <link href="../../../static/tomorrow.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/tomorrow-night.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/social.css" rel="stylesheet" type="text/css" />
  <link href="../../../static/style_20231230.css" rel="stylesheet" type="text/css" />

  <link rel="shortcut icon" href="https://blog.miguelgrinberg.com/static/favicon.ico">
  <link rel="alternate" type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed" title="miguelgrinberg.com RSS feed">

    <meta property="og:title" content="The Flask Mega-Tutorial Part XIII: I18n and L10n (2018)">
    <meta property="og:description" content="(Great news! There is a new version of this tutorial!)This is the thirteenth installment of the Flask Mega-Tutorial series, in which I&#39;m going to tell you how to expand Microblog to support multiple…">
    <meta property="og:image" content="https://blog.miguelgrinberg.com/static/cards/the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018.jpg">
    <meta property="og:url" content="https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018">
    <meta name="twitter:title" content="The Flask Mega-Tutorial Part XIII: I18n and L10n (2018)">
    <meta name="twitter:description" content="(Great news! There is a new version of this tutorial!)This is the thirteenth installment of the Flask Mega-Tutorial series, in which I&#39;m going to tell you how to expand Microblog to support multiple…">
    <meta name="twitter:image" content="https://blog.miguelgrinberg.com/static/cards/the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@miguelgrinberg">

  </head>
  <body>
    <svg style="display: none" version="2.0">
      <defs>
        <symbol id="icon-theme-auto" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-circle-half" viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 0 8 1zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16"/>
        </symbol>
        <symbol id="icon-theme-light" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-brightness-high-fill" viewBox="0 0 16 16">
          <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </symbol>
        <symbol id="icon-theme-dark" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-moon-stars-fill" viewBox="0 0 16 16">
          <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278"/>
          <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
        </symbol>
      </defs>
    </svg>
<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="https://blog.miguelgrinberg.com/index">miguelgrinberg.com</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" aria-current="page" href="https://blog.miguelgrinberg.com/index">Home</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../my-courses-and-books.html">My Courses and Books</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../hire-me.html">Consulting</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../about-me.html">About Me</a></li>
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <svg width="20" height="20" version="2.0"><use id="current-theme" href="#icon-theme-light"></svg>
          </a>
          <ul class="dropdown-menu">
            <li>
              <a id="select-theme-light" class="dropdown-item" href="javascript:updateTheme('light')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-light"></svg>&nbsp; Light Mode
              </a>
            </li>
            <li>
              <a id="select-theme-dark" class="dropdown-item" href="javascript:updateTheme('dark')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-dark"></svg>&nbsp; Dark Mode
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a id="select-theme-auto" class="dropdown-item" href="javascript:updateTheme('auto')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-auto"></svg>&nbsp; System Default
              </a>
            </li>
          </ul>
        </li>
        
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item social-icons">
          <a type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed"><img src="../../../static/social/rss.png" alt="RSS Feed" title="RSS Feed" /></a>
          <a href="https://twitter.com/miguelgrinberg"><img src="../../../static/social/twitter.png" alt="Twitter" title="Twitter" /></a>
          <a rel="me" href="https://mstdn.social/@miguelgrinberg"><img src="../../../static/social/mastodon.png" alt="Mastodon" title="Mastodon" /></a>
          <a href="http://github.com/miguelgrinberg"><img src="../../../static/social/github.png" alt="GitHub" title="GitHub" /></a>
          <a href="https://youtube.com/miguelgrinberg"><img src="../../../static/social/youtube.png" alt="YouTube" title="YouTube" /></a>
          <a href="http://www.linkedin.com/in/miguelgrinberg"><img src="../../../static/social/linkedin.png" alt="LinkedIn" title="LinkedIn" /></a>
          <a href="https://patreon.com/miguelgrinberg"><img src="../../../static/social/patreon.png" alt="Patreon" title="Patreon" /></a>
          <!--<a href="https://www.facebook.com/miguelgrinbergblog"><img src="/static/social/facebook.png" alt="Facebook" title="Facebook" /></a>-->
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
  <div class="row">
    <div class="col-md-8">
      <div id="main">
        
        
        
        
        

<div class="post">

<div class="post-header">
  <h1><a href="../../the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018.html">The Flask Mega-Tutorial Part XIII: I18n and L10n (2018)</a></h1>
  <h2>
    Posted by
    <form action="https://blog.miguelgrinberg.com/author/Miguel Grinberg" method="POST">
      <input type="submit" class="btn btn-danger btn-sm" value="Miguel Grinberg" />
    </form>
    on
    <button class="btn btn-secondary btn-sm" disabled><span class="flask-moment" data-timestamp="2018-02-27T18:13:23Z" data-function="format" data-format="LL" data-refresh="0" style="display: none">2018-02-27T18:13:23Z</span></button>
    under
    
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" />
      </form>
    
    
  </h2>
</div>
<div class="post-body"><p><em>(Great news! There is a <a href="../../the-flask-mega-tutorial-part-i-hello-world.html">new version of this tutorial</a>!)</em></p>
<p>This is the thirteenth installment of the Flask Mega-Tutorial series, in which I'm going to tell you how to expand Microblog to support multiple languages. As part of that effort you will also learn about creating your own CLI extensions to the flask command.</p>
<p>For your reference, below is a list of the articles in this series.</p>
<ul>
<li><a href="../../the-flask-mega-tutorial-part-i-hello-world-2018.html">Chapter 1: Hello, World!</a></li>
<li><a href="../../the-flask-mega-tutorial-part-ii-templates-2018.html">Chapter 2: Templates</a></li>
<li><a href="../../the-flask-mega-tutorial-part-iii-web-forms-2018.html">Chapter 3: Web Forms</a></li>
<li><a href="../../the-flask-mega-tutorial-part-iv-database-2018.html">Chapter 4: Database</a></li>
<li><a href="../../the-flask-mega-tutorial-part-v-user-logins-2018.html">Chapter 5: User Logins</a></li>
<li><a href="../../the-flask-mega-tutorial-part-vi-profile-page-and-avatars-2018.html">Chapter 6: Profile Page and Avatars</a></li>
<li><a href="../../the-flask-mega-tutorial-part-vii-error-handling-2018.html">Chapter 7: Error Handling</a></li>
<li><a href="../../the-flask-mega-tutorial-part-viii-followers-2018.html">Chapter 8: Followers</a></li>
<li><a href="../../the-flask-mega-tutorial-part-ix-pagination-2018.html">Chapter 9: Pagination</a></li>
<li><a href="../../the-flask-mega-tutorial-part-x-email-support-2018.html">Chapter 10: Email Support</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xi-facelift-2018.html">Chapter 11: Facelift</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xii-dates-and-times-2018.html">Chapter 12: Dates and Times</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018.html">Chapter 13: I18n and L10n</a> (this article)</li>
<li><a href="../../the-flask-mega-tutorial-part-xiv-ajax-2018.html">Chapter 14: Ajax</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xv-a-better-application-structure-2018.html">Chapter 15: A Better Application Structure</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xvi-full-text-search-2018.html">Chapter 16: Full-Text Search</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xvii-deployment-on-linux-2018.html">Chapter 17: Deployment on Linux</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xviii-deployment-on-heroku-2018.html">Chapter 18: Deployment on Heroku</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xix-deployment-on-docker-containers-2018.html">Chapter 19: Deployment on Docker Containers</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xx-some-javascript-magic-2018.html">Chapter 20: Some JavaScript Magic</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xxi-user-notifications-2018.html">Chapter 21: User Notifications</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xxii-background-jobs-2018.html">Chapter 22: Background Jobs</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xxiii-application-programming-interfaces-apis-2018.html">Chapter 23: Application Programming Interfaces (APIs)</a></li>
</ul>
<p>The topics of this chapter are Internationalization and Localization, commonly abbreviated I18n and L10n. To make my application friendly to people who do not speak English, I'm going to implement a translation workflow that, with the help of language translators, will allow me to offer the application to users in a choice of languages.</p>
<p><em>The GitHub links for this chapter are: <a href="https://github.com/miguelgrinberg/microblog/tree/v0.13">Browse</a>, <a href="https://github.com/miguelgrinberg/microblog-2018/archive/v0.13.zip">Zip</a>, <a href="../../../../github.com/miguelgrinberg/microblog/compare/v0.12...v0.html">Diff</a>.</em></p>
<h2>Introduction to Flask-Babel</h2>
<p>As you can probably guess, there is a Flask extension that makes working with translations very easy. The extension is called <a href="https://pythonhosted.org/Flask-Babel/">Flask-Babel</a> and is installed with pip:</p>
<pre><code>(venv) $ pip install &quot;flask-babel&lt;3&quot;
</code></pre>
<p>This install the latest 2.x release of Flask-Babel. Flask-Babel is initialized like most other Flask extensions:</p>
<p class="code_title"><i>app/__init__.py</i>: Flask-Babel instance.</p>

<pre><code class="language-python"># ...
from flask_babel import Babel

app = Flask(__name__)
# ...
babel = Babel(app)
</code></pre>
<p>As part of this chapter, I'm going to show you how to translate the application into Spanish, as I happen to speak that language. I could also work with translators that know other languages and support those as well. To keep track of the list of supported languages, I'm going to add a configuration variable:</p>
<p class="code_title"><i>config.py</i>: Supported languages list.</p>

<pre><code class="language-python">class Config(object):
    # ...
    LANGUAGES = ['en', 'es']
</code></pre>
<p>I'm using two-letter language codes for this application, but if you need to be more specific, a country code can be added as well. For example, you could use <code>en-US</code>, <code>en-GB</code> and <code>en-CA</code> to support American, British and Canadian English as different languages.</p>
<p>The <code>Babel</code> instance provides a <code>localeselector</code> decorator. The decorated function is invoked for each request to select a language translation to use for that request:</p>
<p class="code_title"><i>app/__init__.py</i>: Select best language.</p>

<pre><code class="language-python">from flask import request

# ...

@babel.localeselector
def get_locale():
    return request.accept_languages.best_match(app.config['LANGUAGES'])
</code></pre>
<p>Here I'm using an attribute of Flask's <code>request</code> object called <code>accept_languages</code>. This object provides a high-level interface to work with the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language">Accept-Language</a> header that clients send with a request. This header specifies the client language and locale preferences as a weighted list. The contents of this header can be configured in the browser's preferences page, with the default being usually imported from the language settings in the computer's operating system. Most people don't even know such a setting exists, but this is useful as users can provide a list of preferred languages, each with a weight. In case you are curious, here is an example of a complex <code>Accept-Languages</code> header:</p>
<pre><code>Accept-Language: da, en-gb;q=0.8, en;q=0.7
</code></pre>
<p>This says that Danish (<code>da</code>) is the preferred language (with default weight = 1.0), followed by British English (<code>en-GB</code>) with a 0.8 weight, and as a last option generic English (<code>en</code>) with a 0.7 weight.</p>
<p>To select the best language, you need to compare the list of languages requested by the client against the languages the application supports, and using the client provided weights, find the best language. The logic to do this is somewhat complicated, but it is all encapsulated in the <code>best_match()</code> method, which takes the list of languages offered by the application as an argument and returns the best choice.</p>
<h2>Marking Texts to Translate In Python Source Code</h2>
<p>Okay, so now comes the bad news. The normal workflow when making an application available in multiple languages is to mark all the texts that need translations in the source code. After the texts are marked, Flask-Babel will scan all the files and extract those texts into a separate translation file using the <a href="https://www.gnu.org/software/gettext/">gettext</a> tool. Unfortunately this is a tedious task that needs to be done to enable translations. </p>
<p>I'm going to show you a few examples of this marking here, but you can get the complete set of changes from the <a href="https://github.com/miguelgrinberg/microblog/tree/v0.13">download package</a> for this chapter or the GitHub repository.</p>
<p>The way texts are marked for translation is by wrapping them in a function call that as a convention is called <code>_()</code>, just an underscore. The simplest cases are those where literal strings appear in the source code. Here is an example <code>flash()</code> statement:</p>
<pre><code class="language-python">from flask_babel import _
# ...
flash(_('Your post is now live!'))
</code></pre>
<p>The idea is that the <code>_()</code> function wraps the text in the base language (English in this case). This function will use the language selected by the <code>get_locale()</code> function to find the correct translation for a given client. The <code>_()</code> function then returns the translated text, which in this case will become the argument to <code>flash()</code>.</p>
<p>Unfortunately not all cases are that simple. Consider this other <code>flash()</code> call from the application:</p>
<pre><code class="language-python">flash('User {} not found.'.format(username))
</code></pre>
<p>This text has a dynamic component that is inserted in the middle of the static text. The <code>_()</code> function has a syntax that supports this type of texts, but it is based on the older string substitution syntax:</p>
<pre><code class="language-python">flash(_('User %(username)s not found.', username=username))
</code></pre>
<p>There is an even harder case to handle. Some string literals are assigned outside of a request, usually when the application is starting up, so at the time these texts are evaluated there is no way to know what language to use. An example of this is the labels associated with form fields. The only solution to handle those texts is to find a way to delay the evaluation of the string until it is used, which is going to be under an actual request. Flask-Babel provides a <em>lazy evaluation</em> version of <code>_()</code> that is called <code>lazy_gettext()</code>:</p>
<pre><code class="language-python">from flask_babel import lazy_gettext as _l

class LoginForm(FlaskForm):
    username = StringField(_l('Username'), validators=[DataRequired()])
    # ...
</code></pre>
<p>Here I'm importing this alternative translation function and renaming to to <code>_l()</code> so that it looks similar to the original <code>_()</code>. This new function wraps the text in a special object that triggers the translation to be performed later, when the string is used.</p>
<p>The Flask-Login extension flashes a message any time it redirects the user to the login page. This message is in English and comes from the extension itself. To make sure this message also gets translated, I'm going to override the default message and provide my own, wrapper with the <code>_l()</code> function for lazy processing:</p>
<pre><code class="language-python">login = LoginManager(app)
login.login_view = 'login'
login.login_message = _l('Please log in to access this page.')
</code></pre>
<h2>Marking Texts to Translate In Templates</h2>
<p>In the previous section you've seen how to mark translatable texts in Python source code, but that is only a part of this process, as template files also have text. The <code>_()</code> function is also available in templates, so the process is fairly similar. For example, consider this snippet of HTML from <em>404.html</em>:</p>
<pre><code class="language-html">&lt;h1&gt;File Not Found&lt;/h1&gt;
</code></pre>
<p>The translation enabled version becomes:</p>
<pre><code class="language-html">&lt;h1&gt;{{ _('File Not Found') }}&lt;/h1&gt;
</code></pre>
<p>Note that here in addition to wrapping the text with <code>_()</code>, the <code>{{ ... }}</code> needs to be added, to force the <code>_()</code> to be evaluated instead of being considered a literal in the template.</p>
<p>For more complex phrases that have dynamic components, arguments can also be used:</p>
<pre><code class="language-html">&lt;h1&gt;{{ _('Hi, %(username)s!', username=current_user.username) }}&lt;/h1&gt;
</code></pre>
<p>There is a particularly tricky case in <em>_post.html</em> that took me a while to figure out:</p>
<pre><code>        {% set user_link %}
            &lt;a href=&quot;{{ url_for('user', username=post.author.username) }}&quot;&gt;
                {{ post.author.username }}
            &lt;/a&gt;
        {% endset %}
        {{ _('%(username)s said %(when)s',
            username=user_link, when=moment(post.timestamp).fromNow()) }}
</code></pre>
<p>The problem here is that I wanted the <code>username</code> to be a link that points to the profile page of the user, not just the name, so I had to create an intermediate variable called <code>user_link</code> using the <code>set</code> and <code>endset</code> template directives, and then pass that as an argument to the translation function.</p>
<p>As I mentioned above, you can <a href="https://github.com/miguelgrinberg/microblog/tree/v0.13">download</a> a version of the application with all the translatable texts in Python source code and templates marked.</p>
<h2>Extracting Text to Translate</h2>
<p>Once you have the application with all the <code>_()</code> and <code>_l()</code> in place, you can use the <code>pybabel</code> command to extract them to a <em>.pot</em> file, which stands for <em>portable object template</em>. This is a text file that includes all the texts that were marked as needing translation. The purpose of this file is to serve as a template to create translation files for each language.</p>
<p>The extraction process needs a small configuration file that tells pybabel what files should be scanned for translatable texts. Below you can see the <em>babel.cfg</em> that I created for this application:</p>
<p class="code_title"><i>babel.cfg</i>: PyBabel configuration file.</p>

<pre><code class="language-python">[python: app/**.py]
[jinja2: app/templates/**.html]
extensions=jinja2.ext.autoescape,jinja2.ext.with_
</code></pre>
<p>The first two lines define the filename patterns for Python and Jinja2 template files respectively. The third line defines two extensions provided by the Jinja2 template engine that help Flask-Babel properly parse template files.</p>
<p>To extract all the texts to the <em>.pot</em> file, you can use the following command:</p>
<pre><code>(venv) $ pybabel extract -F babel.cfg -k _l -o messages.pot .
</code></pre>
<p>The <code>pybabel extract</code> command reads the configuration file given in the <code>-F</code> option, then scans all the code and template files in the directories that match the configured sources, starting from the directory given in the command (the current directory or <code>.</code> in this case). By default, <code>pybabel</code> will look for <code>_()</code> as a text marker, but I have also used the lazy version, which I imported as <code>_l()</code>, so I need to tell the tool to look for those too with the <code>-k _l</code>. The <code>-o</code> option provides the name of the output file.</p>
<p>I should note that the <em>messages.pot</em> file is not a file that needs to be incorporated into the project. This is a file that can be easily regenerated any time it is needed, simply by running the command above again. So there is no need to commit this file to source control.</p>
<h2>Generating a Language Catalog</h2>
<p>The next step in the process is to create a translation for each language that will be supported in addition to the base one, which in this case is English. I said I was going to start by adding Spanish (language code <code>es</code>), so this is the command that does that:</p>
<pre><code>(venv) $ pybabel init -i messages.pot -d app/translations -l es
creating catalog app/translations/es/LC_MESSAGES/messages.po based on messages.pot
</code></pre>
<p>The <code>pybabel init</code> command takes the <em>messages.pot</em> file as input and writes a new language catalog to the directory given in the <code>-d</code> option for the language specified in the <code>-l</code> option. I'm going to be installing all the translations in the <em>app/translations</em> directory, because that is where Flask-Babel will expect translation files to be by default. The command will create a <em>es</em> subdirectory inside this directory for the Spanish data files. In particular, there will be a new file named <em>app/translations/es/LC_MESSAGES/messages.po</em>, that is where the translations need to be made.</p>
<p>If you want to support other languages, just repeat the above command with each of the language codes you want, so that each language gets its own repository with a <em>messages.po</em> file.</p>
<p>This <code>messages.po</code> file that created in each language repository uses a format that is the de facto standard for language translations, the format used by the <a href="http://www.gnu.org/software/gettext/">gettext</a> utility. Here are a few lines from the beginning of the Spanish <em>messages.po</em>:</p>
<pre><code># Spanish translations for PROJECT.
# Copyright (C) 2021 ORGANIZATION
# This file is distributed under the same license as the PROJECT project.
# FIRST AUTHOR &lt;EMAIL@ADDRESS&gt;, 2021.
#
msgid &quot;&quot;
msgstr &quot;&quot;
&quot;Project-Id-Version: PROJECT VERSION\n&quot;
&quot;Report-Msgid-Bugs-To: EMAIL@ADDRESS\n&quot;
&quot;POT-Creation-Date: 2021-06-29 23:23-0700\n&quot;
&quot;PO-Revision-Date: 2021-06-29 23:25-0700\n&quot;
&quot;Last-Translator: FULL NAME &lt;EMAIL@ADDRESS&gt;\n&quot;
&quot;Language: es\n&quot;
&quot;Language-Team: es &lt;LL@li.org&gt;\n&quot;
&quot;Plural-Forms: nplurals=2; plural=(n != 1)\n&quot;
&quot;MIME-Version: 1.0\n&quot;
&quot;Content-Type: text/plain; charset=utf-8\n&quot;
&quot;Content-Transfer-Encoding: 8bit\n&quot;
&quot;Generated-By: Babel 2.5.1\n&quot;

#: app/email.py:21
msgid &quot;[Microblog] Reset Your Password&quot;
msgstr &quot;&quot;

#: app/forms.py:12 app/forms.py:19 app/forms.py:50
msgid &quot;Username&quot;
msgstr &quot;&quot;

#: app/forms.py:13 app/forms.py:21 app/forms.py:43
msgid &quot;Password&quot;
msgstr &quot;&quot;
</code></pre>
<p>If you skip the header, you can see that what follows is a list of strings that were extracted from the <code>_()</code> and <code>_l()</code> calls. For each text, you get a reference to the location of the text in your application. Then the <code>msgid</code> line contains the text in the base language, and the <code>msgstr</code> line that follows contains an empty string. Those empty strings need to be edited to have the version of the text in the target language. </p>
<p>There are many translation applications that work with <code>.po</code> files. If you feel comfortable editing the text file, then that's sufficient, but if you are working with a large project it may be recommended to work with a specialized editor. The most popular translation application is the open-source <a href="http://www.poedit.net/">poedit</a>, which is available for all major operating systems. If you are familiar with vim, then the <a href="https://vim.sourceforge.io/scripts/script.php?script_id=695">po.vim</a> plugin gives some key mappings that make working with these files easier.</p>
<p>Below you can see a portion of the Spanish <em>messages.po</em> after I added the translations:</p>
<pre><code>#: app/email.py:21
msgid &quot;[Microblog] Reset Your Password&quot;
msgstr &quot;[Microblog] Nueva Contraseña&quot;

#: app/forms.py:12 app/forms.py:19 app/forms.py:50
msgid &quot;Username&quot;
msgstr &quot;Nombre de usuario&quot;

#: app/forms.py:13 app/forms.py:21 app/forms.py:43
msgid &quot;Password&quot;
msgstr &quot;Contraseña&quot;
</code></pre>
<p>The <a href="https://github.com/miguelgrinberg/microblog/tree/v0.13">download package</a> for this chapter also contains this file with all the translations in place, so that you don't have to worry about that part for this application.</p>
<p>The <em>messages.po</em> file is a sort of source file for translations. When you want to start using these translated texts, this file needs to be <em>compiled</em> into a format that is efficient to be used by the application at run-time. To compile all the translations for the application, you can use the <code>pybabel compile</code> command as follows:</p>
<pre><code>(venv) $ pybabel compile -d app/translations
compiling catalog app/translations/es/LC_MESSAGES/messages.po to
app/translations/es/LC_MESSAGES/messages.mo
</code></pre>
<p>This operation adds a <em>messages.mo</em> file next to <em>messages.po</em> in each language repository. The <em>.mo</em> file is the file that Flask-Babel will use to load translations for the application.</p>
<p>After you create the <em>messages.mo</em> file for Spanish or any other languages you added to the project, these languages are ready to be used in the application. If you want to see how the application looks in Spanish, you can edit the language configuration in your web browser to have Spanish as the preferred language. For Chrome, this is the Advanced part of the Settings page:</p>
<p><img alt="Chrome Language Options" src="../../../static/images/mega-tutorial/ch14-language-options.png" /></p>
<p>If you prefer not to change your browser settings, the other alternative is to force a language by making the <code>localeselector</code> function always return it. For Spanish, this would be how you would do it:</p>
<p class="code_title"><i>app/__init__.py</i>: Select best language.</p>

<pre><code class="language-python">@babel.localeselector
def get_locale():
    # return request.accept_languages.best_match(app.config['LANGUAGES'])
    return 'es'
</code></pre>
<p>Running the application with the browser configured for Spanish, or the <code>localeselector</code> function returning <code>es</code> will make all the texts appear in Spanish when you use the application. </p>
<h2>Updating the Translations</h2>
<p>One common situation when working with translations is that you may want to start using a translation file even if it is incomplete. That is totally fine, you can compile an incomplete <em>messages.po</em> file and any translations that are available will be used, while any missing ones will use the base language. You can then continue working on the translations and compile again to update the <em>messages.mo</em> file as you make progress.</p>
<p>Another common scenario occurs if you missed some texts when you added the <code>_()</code> wrappers. In this case you are going to see that those texts that you missed are going to remain in English, because Flask-Babel knows nothing about them. In this situation you'll want to add the <code>_()</code> or <code>_l()</code> wrappers when you detect texts that don't have them, and then do an update procedure, which involves two steps:</p>
<pre><code>(venv) $ pybabel extract -F babel.cfg -k _l -o messages.pot .
(venv) $ pybabel update -i messages.pot -d app/translations
</code></pre>
<p>The <code>extract</code> command is identical to the one I issued earlier, but now it will generate a new version of <em>messages.pot</em> with all the previous texts plus anything new that you recently wrapped with <code>_()</code> or <code>_l()</code>. The <code>update</code> call takes the new <code>messages.pot</code> file and merges it into all the <em>messages.po</em> files associated with the project. This is going to be an intelligent merge, in which any existing texts will be left alone, while only entries that were added or removed in <em>messages.pot</em> will be affected.</p>
<p>After the <em>messages.po</em> are updated, you can go ahead and translate any new tests, then compile the messages one more time to make them available to the application.</p>
<h2>Translating Dates and Times</h2>
<p>Now I have a complete Spanish translation for all the texts in Python code and templates, but if you run the application in Spanish and are a good observer, you will notice that there are still a few things that appear in English. I'm referring to the timestamps generated by Flask-Moment and moment.js, which obviously have not been included in the translation effort because none of the texts generated by these packages are part of the source code or templates of the application.</p>
<p>The moment.js library does support localization and internationalization, so all I need to do is configure the proper language. Flask-Babel returns the selected language and locale for a given request via the <code>get_locale()</code> function, so what I'm going to do is add the locale to the <code>g</code> object, so that I can then access it from the base template:</p>
<p class="code_title"><i>app/routes.py</i>: Store selected language in flask.g.</p>

<pre><code class="language-python"># ...
from flask import g
from flask_babel import get_locale

# ...

@app.before_request
def before_request():
    # ...
    g.locale = str(get_locale())
</code></pre>
<p>The <code>get_locale()</code> function from Flask-Babel returns a locale object, but I just want to have the language code, which can be obtained by converting the object to a string. Now that I have <code>g.locale</code>, I can access it from the base template to configure moment.js with the correct language:</p>
<p class="code_title"><i>app/templates/base.html</i>: Set locale for moment.js.</p>

<pre><code class="language-html">...
{% block scripts %}
    {{ super() }}
    {{ moment.include_moment() }}
    {{ moment.lang(g.locale) }}
{% endblock %}
</code></pre>
<p>And now all dates and times should appear in the same language as the text. Below you can see how the application looks in Spanish:</p>
<p><img alt="Microblog in Español" src="../../../static/images/mega-tutorial/ch14-spanish.png" /></p>
<p>At this point, all texts except those that were provided by the user in blog posts or profile descriptions should be translatable into other languages.</p>
<h2>Command-Line Enhancements</h2>
<p>You will probably agree with me that the <code>pybabel</code> commands are a bit long and difficult to remember. I'm going to use this opportunity to show you how you can create custom commands that are integrated with the <code>flask</code> command. So far, you've seen me use <code>flask run</code>, <code>flask shell</code>, and several <code>flask db</code> sub-commands provided by the Flask-Migrate extension. It is actually easy to add application-specific commands to <code>flask</code> as well. So what I'm going to do now is create a few simple commands that trigger the <code>pybabel</code> commands with all the arguments that are specific to this application. The commands that I'm going to add are:</p>
<ul>
<li><code>flask translate init LANG</code> to add a new language</li>
<li><code>flask translate update</code> to update all language repositories</li>
<li><code>flask translate compile</code> to compile all language repositories</li>
</ul>
<p>The <code>babel export</code> step is not going to be a command, because generating the <em>messages.pot</em> file is always a pre-requisite to running either the <code>init</code> or the <code>update</code> commands, so the implementation of these commands will generate the translation template file as a temporary file.</p>
<p>Flask relies on <a href="https://click.palletsprojects.com/">Click</a> for all its command-line operations. Commands like <code>translate</code>, which are a root for several sub-commands are created via the <code>app.cli.group()</code> decorator. I'm going to put these commands in a new module called <em>app/cli.py</em>:</p>
<p class="code_title"><i>app/cli.py</i>: Translate command group.</p>

<pre><code class="language-python">from app import app

@app.cli.group()
def translate():
    &quot;&quot;&quot;Translation and localization commands.&quot;&quot;&quot;
    pass
</code></pre>
<p>The name of the command comes from the name of the decorated function, and the help message comes from the docstring. Since this is a parent command that only exists to provide a base for the sub-commands, the function itself does not need to do anything.</p>
<p>The <code>update</code> and <code>compile</code> are easy to implement, because they do not take any arguments:</p>
<p class="code_title"><i>app/cli.py</i>: Update and compile sub-commands.</p>

<pre><code class="language-python">import os

# ...

@translate.command()
def update():
    &quot;&quot;&quot;Update all languages.&quot;&quot;&quot;
    if os.system('pybabel extract -F babel.cfg -k _l -o messages.pot .'):
        raise RuntimeError('extract command failed')
    if os.system('pybabel update -i messages.pot -d app/translations'):
        raise RuntimeError('update command failed')
    os.remove('messages.pot')

@translate.command()
def compile():
    &quot;&quot;&quot;Compile all languages.&quot;&quot;&quot;
    if os.system('pybabel compile -d app/translations'):
        raise RuntimeError('compile command failed')
</code></pre>
<p>Note how the decorator from these functions is derived from the <code>translate</code> parent function. This may seem confusing, since <code>translate()</code> is a function, but it is the standard way in which Click builds groups of commands. Same as with the <code>translate()</code> function, the docstrings for these functions are used as help message in the <code>--help</code> output.</p>
<p>You can see that for all commands, I run them and make sure that the return value is zero, which implies that the command did not return any error. If the command errors, then I raise a <code>RuntimeError</code>, which will cause the script to stop. The <code>update()</code> function combines the <code>extract</code> and <code>update</code> steps in the same command, and if everything is successful, it deletes the <em>messages.pot</em> file after the update is complete, since this file can be easily regenerated when needed again.</p>
<p>The <code>init</code> command takes the new language code as an argument. Here is the implementation:</p>
<p class="code_title"><i>app/cli.py</i>: Init sub-command.</p>

<pre><code class="language-python">import click

@translate.command()
@click.argument('lang')
def init(lang):
    &quot;&quot;&quot;Initialize a new language.&quot;&quot;&quot;
    if os.system('pybabel extract -F babel.cfg -k _l -o messages.pot .'):
        raise RuntimeError('extract command failed')
    if os.system(
            'pybabel init -i messages.pot -d app/translations -l ' + lang):
        raise RuntimeError('init command failed')
    os.remove('messages.pot')
</code></pre>
<p>This command uses the <code>@click.argument</code> decorator to define the language code. Click passes the value provided in the command to the handler function as an argument, and then I incorporate the argument into the <code>init</code> command.</p>
<p>The final step to enable these commands to work is to import them, so that the commands get registered. I decided to do this in the <em>microblog.py</em> file in the top-level directory:</p>
<p class="code_title"><i>microblog.py</i>: Register command-line commands.</p>

<pre><code class="language-python">from app import cli
</code></pre>
<p>Here the only thing I need to do is import the new <em>cli.py</em> module, there is no need to do anything with it, as the import causes the command decorators to run and register the command.</p>
<p>At this point, running <code>flask --help</code> will list the <code>translate</code> command as an option. And <code>flask translate --help</code> will show the three sub-commands that I defined:</p>
<pre><code>(venv) $ flask translate --help
Usage: flask translate [OPTIONS] COMMAND [ARGS]...

  Translation and localization commands.

Options:
  --help  Show this message and exit.

Commands:
  compile  Compile all languages.
  init     Initialize a new language.
  update   Update all languages.
</code></pre>
<p>So now, the workflow is much simpler and there is no need to remember long and complicated commands. To add a new language, you use:</p>
<pre><code>(venv) $ flask translate init &lt;language-code&gt;
</code></pre>
<p>To update all the languages after making changes to the <code>_()</code> and <code>_l()</code> language markers:</p>
<pre><code>(venv) $ flask translate update
</code></pre>
<p>And to compile all languages after updating the translation files:</p>
<pre><code>(venv) $ flask translate compile
</code></pre></div>

<div class="card patreon-bar">
  <div class="card-body">
    <h5>Become a Patron!</h5>
    <p class="card-text">Hello, and thank you for visiting my blog! If you enjoyed this article, please consider supporting my work on this blog on <a href="https://patreon.com/miguelgrinberg">Patreon</a>!</p>
    <a href="https://patreon.com/miguelgrinberg" alt="Become a Patron!" title="Become a Patron!"><img src="../../../static/patreon-button.png"></a>
  </div>
</div>


<div class="card social-bar">
  <div class="card-body">
    <h5>Share this post:</h5>
      <!-- Sharingbutton Hacker News -->
      <a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018&amp;t=The%20Flask%20Mega-Tutorial%20Part%20XIII%3A%20I18n%20and%20L10n%20%282018%29" target="_blank" rel="noopener" aria-label="Hacker News">
        <div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 140"><path fill-rule="evenodd" d="M60.94 82.314L17 0h20.08l25.85 52.093c.397.927.86 1.888 1.39 2.883.53.994.995 2.02 1.393 3.08.265.4.463.764.596 1.095.13.334.262.63.395.898.662 1.325 1.26 2.618 1.79 3.877.53 1.26.993 2.42 1.39 3.48 1.06-2.254 2.22-4.673 3.48-7.258 1.26-2.585 2.552-5.27 3.877-8.052L103.49 0h18.69L77.84 83.308v53.087h-16.9v-54.08z"></path></svg></div>Hacker News</div>
      </a>

      <!-- Sharingbutton Reddit -->
      <a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018&amp;resubmit=true&amp;title=The%20Flask%20Mega-Tutorial%20Part%20XIII:%20I18n%20and%20L10n%20(2018)" target="_blank" rel="noopener" aria-label="Reddit">
        <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96 0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65 0 3-1.35 3-3s-1.35-3-3-3c-1.38 0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65 0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66 0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64 0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4 0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6 0 .23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1 0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></div>Reddit</div>
      </a>

      <!-- Sharingbutton Twitter -->
      <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=The%20Flask%20Mega-Tutorial%20Part%20XIII%3A%20I18n%20and%20L10n%20%282018%29&amp;url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018" target="_blank" rel="noopener" aria-label="Twitter">
        <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div>Twitter</div>
      </a>

      <!-- Sharingbutton LinkedIn -->
      <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018&amp;title=The%20Flask%20Mega-Tutorial%20Part%20XIII%3A%20I18n%20and%20L10n%20%282018%29&amp;summary=The%20Flask%20Mega-Tutorial%20Part%20XIII%3A%20I18n%20and%20L10n%20%282018%29&amp;source=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018" target="_blank" rel="noopener" aria-label="LinkedIn">
        <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg></div>LinkedIn</div>
      </a>

      <!-- Sharingbutton Facebook -->
      <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018" target="_blank" rel="noopener" aria-label="Facebook">
        <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div>Facebook</div>
      </a>

      <!-- Sharingbutton E-Mail -->
      <a class="resp-sharing-button__link" href="mailto:?subject=The%20Flask%20Mega-Tutorial%20Part%20XIII%3A%20I18n%20and%20L10n%20%282018%29&amp;body=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018" target="_self" rel="noopener" aria-label="E-Mail">
        <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></div>E-Mail</div>
      </a>

  </div>
</div>

<div id="comments" class="post-comment-count">
  
  <a class="btn btn-outline-secondary" href="../../the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018.html#comments">223 comments</a>
  
</div>


<div class="comments">
  <ul>
    
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/c6080959deb1e7dfca15b5cdc91d0e7d?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#26</span> <span class="badge text-bg-warning">Avrohom Goldstein</span> said
    
    <span class="flask-moment" data-timestamp="2018-06-04T18:16:32Z" data-function="fromNow" data-refresh="0" style="display: none">2018-06-04T18:16:32Z</span>
  </p>
  <div>
    <p>Thanks for tour tutorial! It's wonderful!<br>
I also did the "Command-Line Enhancements" part exactly as you explained but when I run "flask translate --help" command it throws following error:</p>
<p>Error: No such command "translate".<br>
I copied your code form goithub, and on pycharm in the <a href="http://microblog.py/" rel="nofollow">microblog.py</a> file, it has a warning unused import statement on "import cli"</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#27</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-06-04T18:24:37Z" data-function="fromNow" data-refresh="0" style="display: none">2018-06-04T18:24:37Z</span>
  </p>
  <div>
    <p>@Avrohom: does the application start if you run "flask run"? If that also fails, then the problem is that you have not set FLASK_APP correctly.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/76f684106f372f2979404bc8e7a689cc?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#28</span> <span class="badge text-bg-warning">Edgar Sánchez Hurtado</span> said
    
    <span class="flask-moment" data-timestamp="2018-06-09T08:27:00Z" data-function="fromNow" data-refresh="0" style="display: none">2018-06-09T08:27:00Z</span>
  </p>
  <div>
    <p>Hi Miguel!</p>
<p>Great tutorial, I'm really enjoying it. I write because I had the same issue as @Sujay and your suggestions at the comment #23 were right. I was missing to set the FLASK_APP variable before running the flask command.</p>
<p>So, for avoiding this to happen again, I edited the "venv/bin/activate" file, adding to the top:</p>
<pre><code>export FLASK_APP=<a href="http://microblog.py/" rel="nofollow">microblog.py</a>
</code></pre>
<p>This way, from now on, any time the virtualenv is activated I'll have already the variable set.</p>
<p>Hope it can be helpful to someone.</p>
<p>Cheers</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/251c6fd869234fe86366ee0bf92a7b15?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#29</span> <span class="badge text-bg-warning">Guy Turner</span> said
    
    <span class="flask-moment" data-timestamp="2018-06-18T09:17:47Z" data-function="fromNow" data-refresh="0" style="display: none">2018-06-18T09:17:47Z</span>
  </p>
  <div>
    <p>Hi Miguel! Great tutorial - I am having issues with the CLI commands. I am on Windows, I have tried running the commands from standard CMD and administrator elevated CMD and I get this error for every command:</p>
<p>extracting messages from app_<em><a href="http://init__.py/" rel="nofollow">init__.py</a><br>
extracting messages from <a href="http://app_mail.py/" rel="nofollow">app_mail.py</a><br>
extracting messages from app\<a href="http://cli.py/" rel="nofollow">cli.py</a><br>
extracting messages from app\<a href="http://email.py/" rel="nofollow">email.py</a><br>
extracting messages from app\<a href="http://errors.py/" rel="nofollow">errors.py</a><br>
extracting messages from app\<a href="http://forms.py/" rel="nofollow">forms.py</a><br>
extracting messages from app\<a href="http://models.py/" rel="nofollow">models.py</a><br>
extracting messages from app\<a href="http://routes.py/" rel="nofollow">routes.py</a><br>
extracting messages from app\templates\404.html (extensions="jinja2.ext.autoescape,jinja2.ext.with</em>")<br>
extracting messages from app\templates\500.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")<br>
extracting messages from app\templates_pager.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")<br>
extracting messages from app\templates_post.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")<br>
extracting messages from app\templates\base.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")<br>
extracting messages from app\templates\edit_post.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")<br>
extracting messages from app\templates\edit_profile.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")<br>
extracting messages from app\templates\index.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")<br>
extracting messages from app\templates\login.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")<br>
extracting messages from app\templates\register.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")<br>
extracting messages from app\templates\reset_password.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")<br>
extracting messages from app\templates\reset_password_request.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")<br>
extracting messages from app\templates\user.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")<br>
extracting messages from app\templates\email\reset_password.html (extensions="jinja2.ext.autoescape,jinja2.ext.with_")<br>
writing PO template file to messages.pot<br>
updating catalog app/translations\es\LC_MESSAGES\messages.po based on messages.pot<br>
updating catalog app/translations\fr\LC_MESSAGES\messages.po based on messages.pot<br>
Traceback (most recent call last):<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\<a href="http://runpy.py/" rel="nofollow">runpy.py</a>", line 193, in _run_module_as_main<br>
    "<strong>main</strong>", mod_spec)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\<a href="http://runpy.py/" rel="nofollow">runpy.py</a>", line 85, in _run_code<br>
    exec(code, run_globals)<br>
  File "C:\Users\userxx\AppData\Local\Programs\Python\Python36\Scripts\<a href="http://pybabel.exe__main__.py/" rel="nofollow">pybabel.exe__main__.py</a>", line 9, in &lt;module&gt;<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\babel\messages\<a href="http://frontend.py/" rel="nofollow">frontend.py</a>", line 911, in main<br>
    return CommandLineInterface().run(sys.argv)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\babel\messages\<a href="http://frontend.py/" rel="nofollow">frontend.py</a>", line 835, in run<br>
    return cmdinst.run()<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\babel\messages\<a href="http://frontend.py/" rel="nofollow">frontend.py</a>", line 728, in run<br>
    with open(filename, 'rb') as infile:<br>
PermissionError: [Errno 13] Permission denied: 'app/translations\fr\LC_MESSAGES\messages.po'<br>
Traceback (most recent call last):<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\<a href="http://runpy.py/" rel="nofollow">runpy.py</a>", line 193, in _run_module_as_main<br>
    "<strong>main</strong>", mod_spec)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\<a href="http://runpy.py/" rel="nofollow">runpy.py</a>", line 85, in _run_code<br>
    exec(code, run_globals)<br>
  File "C:\Users\userxx\AppData\Local\Programs\Python\Python36\Scripts\<a href="http://flask.exe__main__.py/" rel="nofollow">flask.exe__main__.py</a>", line 9, in &lt;module&gt;<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\flask\<a href="http://cli.py/" rel="nofollow">cli.py</a>", line 513, in main<br>
    cli.main(args=args, prog_name=name)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\flask\<a href="http://cli.py/" rel="nofollow">cli.py</a>", line 380, in main<br>
    return AppGroup.main(self, <em>args, </em><em>kwargs)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://core.py/" rel="nofollow">core.py</a>", line 697, in main<br>
    rv = self.invoke(ctx)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://core.py/" rel="nofollow">core.py</a>", line 1066, in invoke<br>
    return _process_result(sub_ctx.command.invoke(sub_ctx))<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://core.py/" rel="nofollow">core.py</a>", line 1066, in invoke<br>
    return _process_result(sub_ctx.command.invoke(sub_ctx))<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://core.py/" rel="nofollow">core.py</a>", line 895, in invoke<br>
    return ctx.invoke(self.callback, </em><em>ctx.params)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://core.py/" rel="nofollow">core.py</a>", line 535, in invoke<br>
    return callback(</em>args, <strong>kwargs)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://decorators.py/" rel="nofollow">decorators.py</a>", line 17, in new_func<br>
    return f(get_current_context(), *args, </strong>kwargs)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\flask\<a href="http://cli.py/" rel="nofollow">cli.py</a>", line 257, in decorator<br>
    return __ctx.invoke(f, <em>args, </em><em>kwargs)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://core.py/" rel="nofollow">core.py</a>", line 535, in invoke<br>
    return callback(</em>args, **kwargs)<br>
  File "B:\directoryxx\app\<a href="http://cli.py/" rel="nofollow">cli.py</a>", line 15, in update<br>
    raise RuntimeError('update failed')<br>
RuntimeError: update failed</p>
<p>B:\directoryxx&gt;flask translate compile<br>
compiling catalog app/translations\es\LC_MESSAGES\messages.po to app/translations\es\LC_MESSAGES\<a href="http://messages.mo/" rel="nofollow">messages.mo</a><br>
Traceback (most recent call last):<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\<a href="http://runpy.py/" rel="nofollow">runpy.py</a>", line 193, in _run_module_as_main<br>
    "<strong>main</strong>", mod_spec)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\<a href="http://runpy.py/" rel="nofollow">runpy.py</a>", line 85, in _run_code<br>
    exec(code, run_globals)<br>
  File "C:\Users\userxx\AppData\Local\Programs\Python\Python36\Scripts\<a href="http://pybabel.exe__main__.py/" rel="nofollow">pybabel.exe__main__.py</a>", line 9, in &lt;module&gt;<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\babel\messages\<a href="http://frontend.py/" rel="nofollow">frontend.py</a>", line 911, in main<br>
    return CommandLineInterface().run(sys.argv)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\babel\messages\<a href="http://frontend.py/" rel="nofollow">frontend.py</a>", line 835, in run<br>
    return cmdinst.run()<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\babel\messages\<a href="http://frontend.py/" rel="nofollow">frontend.py</a>", line 185, in run<br>
    self._run_domain(domain)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\babel\messages\<a href="http://frontend.py/" rel="nofollow">frontend.py</a>", line 223, in _run_domain<br>
    with open(po_file, 'rb') as infile:<br>
PermissionError: [Errno 13] Permission denied: 'app/translations\fr\LC_MESSAGES\messages.po'<br>
Traceback (most recent call last):<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\<a href="http://runpy.py/" rel="nofollow">runpy.py</a>", line 193, in _run_module_as_main<br>
    "<strong>main</strong>", mod_spec)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\<a href="http://runpy.py/" rel="nofollow">runpy.py</a>", line 85, in _run_code<br>
    exec(code, run_globals)<br>
  File "C:\Users\userxx\AppData\Local\Programs\Python\Python36\Scripts\<a href="http://flask.exe__main__.py/" rel="nofollow">flask.exe__main__.py</a>", line 9, in &lt;module&gt;<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\flask\<a href="http://cli.py/" rel="nofollow">cli.py</a>", line 513, in main<br>
    cli.main(args=args, prog_name=name)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\flask\<a href="http://cli.py/" rel="nofollow">cli.py</a>", line 380, in main<br>
    return AppGroup.main(self, <em>args, </em><em>kwargs)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://core.py/" rel="nofollow">core.py</a>", line 697, in main<br>
    rv = self.invoke(ctx)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://core.py/" rel="nofollow">core.py</a>", line 1066, in invoke<br>
    return _process_result(sub_ctx.command.invoke(sub_ctx))<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://core.py/" rel="nofollow">core.py</a>", line 1066, in invoke<br>
    return _process_result(sub_ctx.command.invoke(sub_ctx))<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://core.py/" rel="nofollow">core.py</a>", line 895, in invoke<br>
    return ctx.invoke(self.callback, </em><em>ctx.params)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://core.py/" rel="nofollow">core.py</a>", line 535, in invoke<br>
    return callback(</em>args, <strong>kwargs)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://decorators.py/" rel="nofollow">decorators.py</a>", line 17, in new_func<br>
    return f(get_current_context(), *args, </strong>kwargs)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\flask\<a href="http://cli.py/" rel="nofollow">cli.py</a>", line 257, in decorator<br>
    return __ctx.invoke(f, <em>args, </em><em>kwargs)<br>
  File "c:\users\userxx\appdata\local\programs\python\python36\lib\site-packages\click\<a href="http://core.py/" rel="nofollow">core.py</a>", line 535, in invoke<br>
    return callback(</em>args, **kwargs)<br>
  File "B:\directoryxx\app\<a href="http://cli.py/" rel="nofollow">cli.py</a>", line 23, in compile<br>
    raise RuntimeError('compile failed')<br>
RuntimeError: compile failed</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#30</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-06-18T14:26:59Z" data-function="fromNow" data-refresh="0" style="display: none">2018-06-18T14:26:59Z</span>
  </p>
  <div>
    <p>@Guy: I'll test this on a Windows machine. The error that you get is a permissions error, pybabel claims it cannot write the French catalog file at app\translations\fr\LC_MESSAGES\messages.po. Can you access this path from the command prompt?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/f629a21d4c21fb551ecea1191d3a0537?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#31</span> <span class="badge text-bg-warning">Kungreye</span> said
    
    <span class="flask-moment" data-timestamp="2018-06-21T07:10:45Z" data-function="fromNow" data-refresh="0" style="display: none">2018-06-21T07:10:45Z</span>
  </p>
  <div>
    <p>Hi, Miguel. Thank you for this great tutorial~<br>
Everything works pretty well, except the dates &amp; times.<br>
I cannot figure out the reason, since I configured as your instruction.  After that, all related texts are translated to Chinese (zh) as expected, but the dates &amp; times remain unchanged.</p>
&lt;h1&gt;app/<a href="http://routes.py/" rel="nofollow">routes.py</a>&lt;/h1&gt;
<p>@app.before_request<br>
def before_request():<br>
    # ...<br>
    g.locale = str(get_locale())</p>
&lt;h1&gt;app/templates/base.html&lt;/h1&gt;
<p>{% block scripts %}<br>
    {{ super() }}<br>
    {{ moment.include_moment() }}<br>
    {{ moment.lang(g.locale) }}<br>
{% endblock %}</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#32</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-06-21T18:46:50Z" data-function="fromNow" data-refresh="0" style="display: none">2018-06-21T18:46:50Z</span>
  </p>
  <div>
    <p>@Kungreye: have you confirmed that "g.locale" is set to "zh"? Are there any error messages in the browser's console?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/f629a21d4c21fb551ecea1191d3a0537?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#33</span> <span class="badge text-bg-warning">Kungreye</span> said
    
    <span class="flask-moment" data-timestamp="2018-06-22T05:50:47Z" data-function="fromNow" data-refresh="0" style="display: none">2018-06-22T05:50:47Z</span>
  </p>
  <div>
    <p>Really thanks for your reply, Miguel.<br>
The fact is that Moment.js locale support 3 Chinese formats (i.e. zh-cn for China mainland, zh-hk for HongKong, zh-tw for Taiwan). <br>
Since I use simplified Chinese, I will go with zh-cn.<br>
I tested moment.js and found that  'zh-cn', 'zh_cn', 'zh-CN' and 'zh_CN' are all acceptable.<br>
So, one of above four is expected from g.locale.  </p>
<p>Chrome preference setting provides Chinese(Simplified) , the language code being  'zh-CN'.  So I just set chrome to be (checked by chrome dev tools):<br>
     &gt;  Accept-Language: zh-CN,zh;q=0.9,en;q=0.8<br>
(Remark: zh is automatically added by chrome, as second choice.)</p>
<p>Accordingly, I set <a href="http://config.py/" rel="nofollow">config.py</a> like this :<br>
     &gt;  LANGUAGES = ['en', 'zh_CN']    # also no hyphen for flask-babel.</p>
<p>Like I said, starting the app, I get everything right, except the dates &amp; times.</p>
<p>As your advice, I checked the g.locale, and surprisingly found: <br>
     &gt;  'g.locale = zh_Hans_CN'</p>
<p>Then, I checked the 'messages.po'  in  app/translations/zh_CN/LC_MESSAGES:</p>
&lt;h1&gt;Chinese (Simplified, China) translations for PROJECT.&lt;/h1&gt;
&lt;h1&gt;Copyright (C) 2018 ORGANIZATION&lt;/h1&gt;
&lt;h1&gt;This file is distributed under the same license as the PROJECT project.&lt;/h1&gt;
&lt;h1&gt;FIRST AUTHOR <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#69;&#77;&#65;&#73;&#76;&#64;&#65;&#68;&#68;&#82;&#69;&#83;&#83;" rel="nofollow">&amp;#69;&amp;#77;&amp;#65;&amp;#73;&amp;#76;&amp;#64;&amp;#65;&amp;#68;&amp;#68;&amp;#82;&amp;#69;&amp;#83;&amp;#83;</a>, 2018.&lt;/h1&gt;
&lt;h1&gt;&lt;/h1&gt;
<p>msgid ""<br>
msgstr ""<br>
"Project-Id-Version: PROJECT VERSION\n"<br>
"Report-Msgid-Bugs-To: EMAIL@ADDRESS\n"<br>
"POT-Creation-Date: 2018-06-21 17:53+0800\n"<br>
"PO-Revision-Date: 2018-06-21 17:03+0800\n"<br>
"Last-Translator: \n"<br>
"Language: zh_CN\n"<br>
"Language-Team: zh_Hans_CN <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#76;&#76;&#64;&#108;&#105;&#46;&#111;&#114;&#103;" rel="nofollow">&amp;#76;&amp;#76;&amp;#64;&amp;#108;&amp;#105;&amp;#46;&amp;#111;&amp;#114;&amp;#103;</a>\n"<br>
"Plural-Forms: nplurals=1; plural=0\n"<br>
"MIME-Version: 1.0\n"<br>
"Content-Type: text/plain; charset=utf-8\n"<br>
"Content-Transfer-Encoding: 8bit\n"<br>
"Generated-By: Babel 2.6.0\n"</p>
<p>I don't quite understand why the zh_Hans_CN (language team) was assigned to g.locale, instead of zh_CN (language).</p>
<p>When I manually changed the g.locale to 'zh_CN'  in  <a href="http://routes.py/" rel="nofollow">routes.py</a>:<br>
    &gt; g.locale = 'zh_CN'                     # or  'zh-CN' / 'zh-cn' / 'zh_cn'<br>
Then the dates &amp; times are good.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#34</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-06-22T06:36:13Z" data-function="fromNow" data-refresh="0" style="display: none">2018-06-22T06:36:13Z</span>
  </p>
  <div>
    <p>@Kungreye: I did not know this, but it looks like the language code for simplified Chinese is zh-Hans-CN. Is there any chance that your web browser is reporting that language code? In that case, you should create your translation files under that language code and then I think everything should work.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/f629a21d4c21fb551ecea1191d3a0537?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#35</span> <span class="badge text-bg-warning">Kungreye</span> said
    
    <span class="flask-moment" data-timestamp="2018-06-22T09:08:13Z" data-function="fromNow" data-refresh="0" style="display: none">2018-06-22T09:08:13Z</span>
  </p>
  <div>
    <p>You are right, Miguel. <br>
I just came to know Chinese languages involves numerous codes.....</p>
<p>Everything goes well after I modified as this: </p>
<blockquote>
<p>g.locale = 'zh-cn' if str(get_locale()).startswith('zh') else str(get_locale())</p>
</blockquote>
<p>Really thank you for your patience &amp; time, Miguel.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/99d873e52f18daab920d3bb772776565?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#36</span> <span class="badge text-bg-warning">Chet</span> said
    
    <span class="flask-moment" data-timestamp="2018-06-26T01:22:37Z" data-function="fromNow" data-refresh="0" style="display: none">2018-06-26T01:22:37Z</span>
  </p>
  <div>
    <p>this happen to me too...<br>
Error: No such command "translate".</p>
<p>and i don't know how to fix yet,  i use Windows</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#37</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-06-27T15:08:08Z" data-function="fromNow" data-refresh="0" style="display: none">2018-06-27T15:08:08Z</span>
  </p>
  <div>
    <p>@Chet: make sure your FLASK_APP variable is correctly set, as shown in Chapter 1.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/924f1661d9f5a06f3eae01c41700abda?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#38</span> <span class="badge text-bg-warning">miss pie</span> said
    
    <span class="flask-moment" data-timestamp="2018-08-25T12:45:33Z" data-function="fromNow" data-refresh="0" style="display: none">2018-08-25T12:45:33Z</span>
  </p>
  <div>
    <p>I followed another tutorial first and found your tutorial about translations (Chapter 13: I18n and L10n).</p>
<p>I implemented your examples with another tutorial and everything works fine. When switching through browser settings i get text in another language. However, i miss a general translation button switch for users.<br>
You don't cover that in your tutorials? i quickly looked at the next chapter (ajax - live translation) and couldn't find that there either.</p>
<p>Please advice. I am trying to make a multi lingual website with flask/python.<br>
(i am a newby)</p>
<p>Thanks in advance!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#39</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-08-25T19:08:01Z" data-function="fromNow" data-refresh="0" style="display: none">2018-08-25T19:08:01Z</span>
  </p>
  <div>
    <p>@miss: what do you mean by "general translation button"? If you want the user to pick a language, you can implement that with a web form. This tutorial uses the language information provided by the browser to select a language, but you should be able to offer the selection to the user without having to make a lot of changes.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/5ec4ea533f6841508734b5433178c8ef?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#40</span> <span class="badge text-bg-warning">Oleg Kovalenko</span> said
    
    <span class="flask-moment" data-timestamp="2018-09-08T18:49:17Z" data-function="fromNow" data-refresh="0" style="display: none">2018-09-08T18:49:17Z</span>
  </p>
  <div>
    <p>Hi Miguel,</p>
<p>Have you seen other solutions for language translations where the source and template strings don't have to be marked by _() and _l()? Perhaps something in your Flask O'Reilly book? It feels like littering the source with those functions isn't the way to go. If you know of any, could you point me in the direction of a more organized solution?</p>
<p>Thanks,<br>
Oleg</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#41</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-09-13T20:59:03Z" data-function="fromNow" data-refresh="0" style="display: none">2018-09-13T20:59:03Z</span>
  </p>
  <div>
    <p>@Oleg: marking text for translation is the standard way to do this in pretty much any programming language. I don't know of an automatic way of extracting texts, sorry.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/009bd03c9f3bcfe55d056a6ee83beff0?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#42</span> <span class="badge text-bg-warning">Jay Jethva</span> said
    
    <span class="flask-moment" data-timestamp="2018-09-23T19:58:07Z" data-function="fromNow" data-refresh="0" style="display: none">2018-09-23T19:58:07Z</span>
  </p>
  <div>
    <p>Bienvenidos a esta plataforma de desarrollo web! </p>
<p>Error: the translation service is not configured.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#43</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-09-25T18:04:19Z" data-function="fromNow" data-refresh="0" style="display: none">2018-09-25T18:04:19Z</span>
  </p>
  <div>
    <p>@Jay: You did not configure your translation service key.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/55c0e7a3c3c6ec61d11ffd132e54ae31?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#44</span> <span class="badge text-bg-warning">Jonas</span> said
    
    <span class="flask-moment" data-timestamp="2018-09-26T18:00:59Z" data-function="fromNow" data-refresh="0" style="display: none">2018-09-26T18:00:59Z</span>
  </p>
  <div>
    <p>Hi Miguel, thank you for this nice article!<br>
I added support for english [en] to my page. If I set up the language setting in firefox like this:<br>
[en-us][de][en]<br>
Firefox will load the german version.<br>
When I exchange [en] and [de] it loads the english version. Is this intended or am I doing something wrong?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#45</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-09-27T10:07:13Z" data-function="fromNow" data-refresh="0" style="display: none">2018-09-27T10:07:13Z</span>
  </p>
  <div>
    <p>@Jonas: Basically with this configuration you are saying that your first preference is US English, followed by German, followed by generic English. Do you have a translation for US English? I suspect you only have generic English, so for that reason German is picked first.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/83601d44993da43cf18bf27c98cdc3d9?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#46</span> <span class="badge text-bg-warning">Krzysztof</span> said
    
    <span class="flask-moment" data-timestamp="2018-10-07T01:36:12Z" data-function="fromNow" data-refresh="0" style="display: none">2018-10-07T01:36:12Z</span>
  </p>
  <div>
    <p>Hello Miguel,<br>
I managed to integrate the localisation support, but I seem to fail at integrating command-line enhancements.<br>
Due to the fact that I have the blog hosted on pythonanywhere there seem to be some extra steps that would be required to add these new commands to the command line. I tried importing cli to the wsgi file, but it didn't help ("imported but unused").<br>
Do you happen to have an idea what needs to be done to solve the issue?<br>
Best Regards,<br>
Chris</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#47</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-10-07T07:44:24Z" data-function="fromNow" data-refresh="0" style="display: none">2018-10-07T07:44:24Z</span>
  </p>
  <div>
    <p>@Krzysztof: I'm not very familiar with PythonAnywhere, but my understanding is that it gives you a terminal where you can run "flask shell", "flask run", etc. correct? If that is true, then I don't see how your own commands would not work.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/7e0ab3d77008ef410d7fc6ba72b6498f?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#48</span> <span class="badge text-bg-warning">Sean</span> said
    
    <span class="flask-moment" data-timestamp="2018-10-16T09:14:54Z" data-function="fromNow" data-refresh="0" style="display: none">2018-10-16T09:14:54Z</span>
  </p>
  <div>
    <p>Hi Miguel,</p>
<p>Thanks for the excellent tutorial.</p>
<p>I have a weird problem: everthing works well except that it's still in English.<br>
After I found this issue on my own version, I tried using yours. <br>
The steps were:<br>
  1. Download the zip file and unzip it.<br>
  2. Start a new terminal session and Go to the microblog-0.13 folder:<br>
      cd Downloads/microblog-0.13/<br>
  3. nano .flaskenv<br>
      (insert "FLASK_APP=<a href="http://microblog.py/" rel="nofollow">microblog.py</a>" and save it)<br>
  4. Use the vitual enviroment set for microblog that includes flask and relative extensions:<br>
      pyenv local venv<br>
  5. Upgrade database:<br>
      flask db upgrade<br>
  6. open app/<strong>init</strong>.py<br>
      modify the get_locale() function, force it to return 'es'</p>
<pre><code>  @babel.localeselector
  def get_locale():
      return 'es'
      # return request.accept_languages.best_match(app.config['LANGUAGES'])
</code></pre>
<ol>
<li>Run the app:<br>
      flask run</li>
<li>Go to Chrome:<br>
      http://localhost:5000<br>
      play around, try different features</li>
<li>Only time become espanol.<br>
      for example on the explore page I see:<br>
               Hi, susan!<br>
               Say something<br>
               -------------------------------<br>
               -                                        -<br>
               -------------------------------<br>
               submit<pre><code>       sean said hace 4 minutos 
       It is a wonderful day!
</code></pre>
</li>
</ol>
<p>It feels like the app did not figure out it should've used the translation file.<br>
Hope you have some ideas about the possible cause of this problem.</p>
<p>Sincerely,<br>
Sean(Zhiheng)</p>
&lt;h1&gt;Below are the commands I use in Terminal:&lt;/h1&gt;
<p>Last login: Tue Oct 16 16:51:01 on ttys002<br>
Zhihengs-MBP:~ Zhiheng$ cd Downloads/microblog-0.13/<br>
Zhihengs-MBP:microblog-0.13 Zhiheng$ nano .flaskenv<br>
Zhihengs-MBP:microblog-0.13 Zhiheng$ pyenv local venv<br>
Zhihengs-MBP:microblog-0.13 Zhiheng$ pyenv version<br>
venv (set by /Users/Zhiheng/Downloads/microblog-0.13/.python-version)<br>
Zhihengs-MBP:microblog-0.13 Zhiheng$ pip freeze <br>
alembic==1.0.0<br>
appnope==0.1.0<br>
Babel==2.6.0<br>
backcall==0.1.0<br>
bleach==3.0.2<br>
blinker==1.4<br>
certifi==2018.8.24<br>
chardet==3.0.4<br>
Click==7.0<br>
decorator==4.3.0<br>
defusedxml==0.5.0<br>
dominate==2.3.4<br>
entrypoints==0.2.3<br>
Flask==1.0.2<br>
Flask-Babel==0.11.2<br>
Flask-Bootstrap==3.3.7.1<br>
Flask-Login==0.4.1<br>
Flask-Mail==0.9.1<br>
Flask-Migrate==2.2.1<br>
Flask-Moment==0.6.0<br>
Flask-SQLAlchemy==2.3.2<br>
Flask-WTF==0.14.2<br>
idna==2.7<br>
ipykernel==5.1.0<br>
ipython==7.0.1<br>
ipython-genutils==0.2.0<br>
ipywidgets==7.4.2<br>
itsdangerous==0.24<br>
jedi==0.13.1<br>
Jinja2==2.10<br>
jsonschema==2.6.0<br>
jupyter==1.0.0<br>
jupyter-client==5.2.3<br>
jupyter-console==6.0.0<br>
jupyter-core==4.4.0<br>
Mako==1.0.7<br>
MarkupSafe==1.0<br>
mistune==0.8.4<br>
nbconvert==5.4.0<br>
nbformat==4.4.0<br>
notebook==5.7.0<br>
pandocfilters==1.4.2<br>
parso==0.3.1<br>
pexpect==4.6.0<br>
pickleshare==0.7.5<br>
pkginfo==1.4.2<br>
prometheus-client==0.4.1<br>
prompt-toolkit==2.0.5<br>
ptyprocess==0.6.0<br>
Pygments==2.2.0<br>
PyJWT==1.6.4<br>
python-dateutil==2.7.3<br>
python-dotenv==0.9.1<br>
python-editor==1.0.3<br>
pytz==2018.5<br>
pyzmq==17.1.2<br>
qtconsole==4.4.1<br>
requests==2.19.1<br>
requests-toolbelt==0.8.0<br>
Send2Trash==1.5.0<br>
simplegeneric==0.8.1<br>
six==1.11.0<br>
SQLAlchemy==1.2.12<br>
terminado==0.8.1<br>
testpath==0.4.2<br>
tornado==5.1.1<br>
tqdm==4.23.4<br>
traitlets==4.3.2<br>
twine==1.11.0<br>
urllib3==1.23<br>
visitor==0.1.3<br>
wcwidth==0.1.7<br>
webencodings==0.5.1<br>
Werkzeug==0.14.1<br>
widgetsnbextension==3.4.2<br>
WTForms==2.2.1<br>
Zhihengs-MBP:microblog-0.13 Zhiheng$ flask db upgrade<br>
[2018-10-16 16:53:36,576] INFO in <strong>init</strong>: Microblog startup<br>
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.<br>
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.<br>
INFO  [alembic.runtime.migration] Running upgrade  -&gt; e517276bb1c2, users table<br>
INFO  [alembic.runtime.migration] Running upgrade e517276bb1c2 -&gt; 780739b227a7, posts table<br>
INFO  [alembic.runtime.migration] Running upgrade 780739b227a7 -&gt; 37f06a334dbf, new fields in user model<br>
INFO  [alembic.runtime.migration] Running upgrade 37f06a334dbf -&gt; ae346256b650, followers<br>
Zhihengs-MBP:microblog-0.13 Zhiheng$ flask run<br>
 * Serving Flask app "<a href="http://microblog.py/" rel="nofollow">microblog.py</a>"<br>
 * Environment: production<br>
   WARNING: Do not use the development server in a production environment.<br>
   Use a production WSGI server instead.<br>
 * Debug mode: off<br>
[2018-10-16 16:57:42,023] INFO in <strong>init</strong>: Microblog startup<br>
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)<br>
127.0.0.1 - - [16/Oct/2018 16:57:50] "GET / HTTP/1.1" 302 -</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#49</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-10-16T22:27:06Z" data-function="fromNow" data-refresh="0" style="display: none">2018-10-16T22:27:06Z</span>
  </p>
  <div>
    <p>@Sean: did you compile the Spanish translation?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/7e0ab3d77008ef410d7fc6ba72b6498f?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#50</span> <span class="badge text-bg-warning">Sean</span> said
    
    <span class="flask-moment" data-timestamp="2018-10-17T13:12:25Z" data-function="fromNow" data-refresh="0" style="display: none">2018-10-17T13:12:25Z</span>
  </p>
  <div>
    <p>Thanks for the reply!<br>
  Yeah, you are right. The espanol translation works well after I compile it!</p>
<p>I just try someting else(following similar procedures):<br>
  1. Download the zip file and unzip it.<br>
  2. Start a new terminal session and Go to the microblog-0.13 folder:<br>
      cd Downloads/microblog-0.13/<br>
  3. nano .flaskenv<br>
      (insert "FLASK_APP=<a href="http://microblog.py/" rel="nofollow">microblog.py</a>" and save it)<br>
  4. Use the vitual enviroment set for microblog that includes flask and relative extensions:<br>
      pyenv local venv<br>
  5. Upgrade database:<br>
      flask db upgrade<br>
  6. pybabel extract -F babel.cfg -k _l -o messages.pot .</p>
<p>======= Here is the weird part ======<br>
  7. pybabel init -i messages.pot -d app/translations -l zh_CN<br>
  8. pybabel init -i messages.pot -d app/translations -l en_CA<br>
  9. Go and apply same modification to the following two files:<br>
        app/translations/en_CA/LC_MESSAGES/messages.po<br>
        app/translations/zh_CN/LC_MESSAGES/messages.po<br>
  11. pybabel compile -d app/translations<br>
  12. open app/<strong>init</strong>.py<br>
      modify the get_locale() function, force it to return 'zh_CN'<br>
  13. flask run <br>
      (Then I found no translation to Chinese)<br>
  14. repeat step 12, this time modify the get_locale() function, force it to return <br>
      'en_CA'<br>
  14. flask run<br>
      (Then the texts are properly translated to Chinese)</p>
<p>Then I figured out there might be something wrong with the Flask-Babel Chinese part.</p>
<p>After that I tried 'zh', that worked fine! <br>
  I guess open source package sometimes do suprise us with small bugs.  :)</p>
  </div>
</div>
    </li>
    
  </ul>
</div>

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item"><a class="page-link" href="1.html#comments">&laquo;&laquo;</a></li>
    <li class="page-item"><a class="page-link" href="1.html#comments">&laquo;</a></li>
    <li class="page-item"><a class="page-link" href="3.html#comments">&raquo;</a></li>
    <li class="page-item"><a class="page-link" href="0.html#comments">&raquo;&raquo;</a></li>
  </ul>
</nav>



<div id="comment-form">
  <h3>Leave a Comment</h3>

  
  
  

  
<form action="#comment-form" method="post">
  <input id="url" name="url" type="hidden" value="">
<input id="csrf_token" name="csrf_token" type="hidden" value="IjQyYjY5YzZlNTcyYjFkMTVlZGRkOWJjYjA3ZmFlYWFiNTg3YmU5ODki.ZxdyQg.YFMrShKkQH0hsMmxts7pW7yUIj8">
    
  <div class="mb-3">
    <label class="form-label" for="name">Name</label>
    <div class="input-group has-validation">
      <input class="form-control" id="name" name="name" required type="text" value="">
    </div>
  </div>

    
    
  <div class="mb-3">
    <label class="form-label" for="email">Email</label>
    <div class="input-group has-validation">
      <input class="form-control" id="email" name="email" required type="text" value="">
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="comment">Comment</label>
    <div class="input-group has-validation">
      <textarea class="form-control" id="comment" name="comment" required>
</textarea>
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="captcha">Captcha</label>
    <div class="input-group has-validation">
      
<script src='https://www.google.com/recaptcha/api.js' async defer></script>
<div class="g-recaptcha" data-sitekey="6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S"></div>

    </div>
  </div>

    
  <input class="btn btn-primary mb-3" id="submit" name="submit" type="submit" value="Submit">

      
</form>

</div>


</div>

      </div>
    </div>
    
    <div class="col-md-4">
      <div id="sidebar">
        
          
  



<div class="card">
  
  
  <div class="card-header">Flask Web Development, 2nd Edition</div>
  <a class="card-book-cover" href="https://amzn.to/3lE2mok">
    <img src="../../../static/flask2e-book-cover-small.png" alt="Flask Web Development, 2nd Edition">
  </a>
  <div class="card-body">
    <p class="card-text">If you want to learn modern web development techniques with Python and Flask, you may find the second edition of my <a href="https://amzn.to/3lE2mok">O'Reilly book</a> useful.</p>
  </div>
  <div class="card-body">
    <a class="card-link" href="https://amzn.to/3lE2mok">Click here to get this Book!</a><br />
  </div>

  
</div>
        
        <div class="card">
  <div class="card-header">About Miguel</div>
  <div class="card-body">
    <img style="float: right; margin: 0px 8px 8px 0px; padding: 4px; border: 1px solid #ccc;" src="../../../static/miguel.jpg" />
    <p class="card-text">Welcome to my blog!</p>
    <p class="card-text">I'm a software engineer and technical writer, currently living in Drogheda, Ireland.</p>
    <p class="card-text">You can also find me on <a href="https://twitter.com/miguelgrinberg">Twitter</a>, <a href="https://mstdn.social/@miguelgrinberg">Mastodon</a>, <a href="https://github.com/miguelgrinberg">Github</a>, <a href="http://www.linkedin.com/in/miguelgrinberg">LinkedIn</a>, <a href="https://youtube.com/miguelgrinberg">YouTube</a>, <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a> and <a href="https://patreon.com/miguelgrinberg">Patreon</a>.</p>
    <p class="card-text">Thank you for visiting!</p>
  </div>
</div>
        
        <div class="card" id="categories">
  <div class="card-header">Categories</div>
  <div class="card-body">
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AI/feed"><img src="../../../static/rss-small.png" title="AI RSS Feed" label="AI RSS Feed" alt="AI RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AI" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AI" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AWS/feed"><img src="../../../static/rss-small.png" title="AWS RSS Feed" label="AWS RSS Feed" alt="AWS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AWS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AWS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Arduino/feed"><img src="../../../static/rss-small.png" title="Arduino RSS Feed" label="Arduino RSS Feed" alt="Arduino RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Arduino" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Arduino" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Authentication/feed"><img src="../../../static/rss-small.png" title="Authentication RSS Feed" label="Authentication RSS Feed" alt="Authentication RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Authentication" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Authentication" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Blog/feed"><img src="../../../static/rss-small.png" title="Blog RSS Feed" label="Blog RSS Feed" alt="Blog RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Blog" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Blog" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/C++/feed"><img src="../../../static/rss-small.png" title="C++ RSS Feed" label="C++ RSS Feed" alt="C++ RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/C++" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="C++" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/CSS/feed"><img src="../../../static/rss-small.png" title="CSS RSS Feed" label="CSS RSS Feed" alt="CSS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/CSS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="CSS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Cloud/feed"><img src="../../../static/rss-small.png" title="Cloud RSS Feed" label="Cloud RSS Feed" alt="Cloud RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Cloud" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Cloud" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Database/feed"><img src="../../../static/rss-small.png" title="Database RSS Feed" label="Database RSS Feed" alt="Database RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Database" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Database" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Docker/feed"><img src="../../../static/rss-small.png" title="Docker RSS Feed" label="Docker RSS Feed" alt="Docker RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Docker" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Docker" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Filmmaking/feed"><img src="../../../static/rss-small.png" title="Filmmaking RSS Feed" label="Filmmaking RSS Feed" alt="Filmmaking RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Filmmaking" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Filmmaking" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Flask/feed"><img src="../../../static/rss-small.png" title="Flask RSS Feed" label="Flask RSS Feed" alt="Flask RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" /> <small><em>126</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Games/feed"><img src="../../../static/rss-small.png" title="Games RSS Feed" label="Games RSS Feed" alt="Games RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Games" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Games" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Heroku/feed"><img src="../../../static/rss-small.png" title="Heroku RSS Feed" label="Heroku RSS Feed" alt="Heroku RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Heroku" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Heroku" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/IoT/feed"><img src="../../../static/rss-small.png" title="IoT RSS Feed" label="IoT RSS Feed" alt="IoT RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/IoT" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="IoT" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/JavaScript/feed"><img src="../../../static/rss-small.png" title="JavaScript RSS Feed" label="JavaScript RSS Feed" alt="JavaScript RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/JavaScript" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="JavaScript" /> <small><em>35</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/MicroPython/feed"><img src="../../../static/rss-small.png" title="MicroPython RSS Feed" label="MicroPython RSS Feed" alt="MicroPython RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/MicroPython" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="MicroPython" /> <small><em>9</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microdot/feed"><img src="../../../static/rss-small.png" title="Microdot RSS Feed" label="Microdot RSS Feed" alt="Microdot RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microdot" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microdot" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microservices/feed"><img src="../../../static/rss-small.png" title="Microservices RSS Feed" label="Microservices RSS Feed" alt="Microservices RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microservices" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microservices" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Movie Reviews/feed"><img src="../../../static/rss-small.png" title="Movie Reviews RSS Feed" label="Movie Reviews RSS Feed" alt="Movie Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Movie Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Movie Reviews" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/OpenStack/feed"><img src="../../../static/rss-small.png" title="OpenStack RSS Feed" label="OpenStack RSS Feed" alt="OpenStack RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/OpenStack" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="OpenStack" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Personal/feed"><img src="../../../static/rss-small.png" title="Personal RSS Feed" label="Personal RSS Feed" alt="Personal RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Personal" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Personal" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Photography/feed"><img src="../../../static/rss-small.png" title="Photography RSS Feed" label="Photography RSS Feed" alt="Photography RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Photography" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Photography" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Product Reviews/feed"><img src="../../../static/rss-small.png" title="Product Reviews RSS Feed" label="Product Reviews RSS Feed" alt="Product Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Product Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Product Reviews" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Programming/feed"><img src="../../../static/rss-small.png" title="Programming RSS Feed" label="Programming RSS Feed" alt="Programming RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" /> <small><em>187</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Project Management/feed"><img src="../../../static/rss-small.png" title="Project Management RSS Feed" label="Project Management RSS Feed" alt="Project Management RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Project Management" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Project Management" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Python/feed"><img src="../../../static/rss-small.png" title="Python RSS Feed" label="Python RSS Feed" alt="Python RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" /> <small><em>169</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/REST/feed"><img src="../../../static/rss-small.png" title="REST RSS Feed" label="REST RSS Feed" alt="REST RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/REST" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="REST" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Rackspace/feed"><img src="../../../static/rss-small.png" title="Rackspace RSS Feed" label="Rackspace RSS Feed" alt="Rackspace RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Rackspace" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Rackspace" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Raspberry Pi/feed"><img src="../../../static/rss-small.png" title="Raspberry Pi RSS Feed" label="Raspberry Pi RSS Feed" alt="Raspberry Pi RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Raspberry Pi" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Raspberry Pi" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/React/feed"><img src="../../../static/rss-small.png" title="React RSS Feed" label="React RSS Feed" alt="React RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/React" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="React" /> <small><em>18</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Robotics/feed"><img src="../../../static/rss-small.png" title="Robotics RSS Feed" label="Robotics RSS Feed" alt="Robotics RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Robotics" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Robotics" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Security/feed"><img src="../../../static/rss-small.png" title="Security RSS Feed" label="Security RSS Feed" alt="Security RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Security" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Security" /> <small><em>12</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Video/feed"><img src="../../../static/rss-small.png" title="Video RSS Feed" label="Video RSS Feed" alt="Video RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Video" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Video" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/WebSocket/feed"><img src="../../../static/rss-small.png" title="WebSocket RSS Feed" label="WebSocket RSS Feed" alt="WebSocket RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/WebSocket" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="WebSocket" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Webcast/feed"><img src="../../../static/rss-small.png" title="Webcast RSS Feed" label="Webcast RSS Feed" alt="Webcast RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Webcast" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Webcast" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Windows/feed"><img src="../../../static/rss-small.png" title="Windows RSS Feed" label="Windows RSS Feed" alt="Windows RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Windows" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Windows" /> <small><em>1</em></small>
      </form>
    </div>
    
  </div>
</div>
        
      </div>
    </div>
    
  </div>
  <div id="footer">
    
    <p>&copy; 2012-<script type="text/javascript">document.write(new Date().getFullYear());</script> by Miguel Grinberg. All rights reserved. <a href="mailto:webmaster _at_ miguelgrinberg _dot_ com">Questions?</a></p>
  </div>
</div>

  
    <script src="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../../static/prettify.js"></script>
  <script src="../../../../cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment-with-locales.min.js" integrity="sha512-42PE0rd+wZ2hNXftlM78BSehIGzezNeQuzihiBCvUEB3CVxHvsShF86wBWwQORNxNINlBPuq7rG4WWhNiTVHFg==" crossorigin="anonymous"></script>

<script>
moment.locale("en");
function flask_moment_render(elem) {{
    const timestamp = moment(elem.dataset.timestamp);
    const func = elem.dataset.function;
    const format = elem.dataset.format;
    const timestamp2 = elem.dataset.timestamp2;
    const no_suffix = elem.dataset.nosuffix;
    const units = elem.dataset.units;
    let args = [];
    if (format)
        args.push(format);
    if (timestamp2)
        args.push(moment(timestamp2));
    if (no_suffix)
        args.push(no_suffix);
    if (units)
        args.push(units);
    elem.textContent = timestamp[func].apply(timestamp, args);
    elem.classList.remove('flask-moment');
    elem.style.display = "";
}}
function flask_moment_render_all() {{
    const moments = document.querySelectorAll('.flask-moment');
    moments.forEach(function(moment) {{
        flask_moment_render(moment);
        const refresh = moment.dataset.refresh;
        if (refresh && refresh > 0) {{
            (function(elem, interval) {{
                setInterval(function() {{
                    flask_moment_render(elem);
                }}, interval);
            }})(moment, refresh);
        }}
    }})
}}
document.addEventListener("DOMContentLoaded", flask_moment_render_all);
</script>

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-20EHZP9GRZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-20EHZP9GRZ');
  </script>
  
  <script type="text/javascript">
    function setThemeUI() {
      document.getElementById('select-theme-auto').classList.remove('active');
      document.getElementById('select-theme-light').classList.remove('active');
      document.getElementById('select-theme-dark').classList.remove('active');
      const theme = getPreferredTheme();
      const actualTheme = document.documentElement.getAttribute('data-bs-theme', 'light');
      document.getElementById('select-theme-' + theme).classList.add('active');
      document.getElementById('current-theme').href.baseVal = `#icon-theme-${actualTheme}`;
    };

    function updateTheme(theme) {
      if (theme === 'auto') {
        localStorage.removeItem('theme')
      }
      else {
        localStorage.setItem('theme', theme)
      }
      setTheme(getPreferredTheme());
    }

    setThemeUI();

    const darkModePreference = window.matchMedia("(prefers-color-scheme: dark)");
    darkModePreference.addEventListener("change", e => {
      if (getPreferredTheme() === 'auto') {
        setTheme('auto');
      }
    });

    document.addEventListener("DOMContentLoaded", () => {
      // add prettyprint class to all <pre><code></code></pre> blocks
      let prettify = false;
      document.querySelectorAll('div.post-body pre code').forEach((code) => {
        code.parentNode.classList.add('prettyprint');
        prettify = true;
      });
      prettyPrint();
    });
  </script>

  </body>

<!-- Mirrored from blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018/page/2 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 09:40:01 GMT -->
</html>