<!doctype html>
<html lang="en">
  
<!-- Mirrored from blog.miguelgrinberg.com/post/the-react-mega-tutorial-chapter-5-connecting-to-a-back-end/page/1 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 08:49:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
  <script type="text/javascript">
    function getPreferredTheme() {
      const storedTheme = localStorage.getItem('theme')
      if (storedTheme) {
        return storedTheme
      }
      return 'auto';
    }

    function setTheme(theme) {
      if (theme === 'auto') {
        theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
      }
      document.documentElement.setAttribute('data-bs-theme', theme);
    };

    setTheme(getPreferredTheme());
  </script>
  
    <title>
  
    The React Mega-Tutorial, Chapter 5: Connecting to a Back End - miguelgrinberg.com
  
</title>
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="description" content="miguelgrinberg.com">
  <meta name="copyright" content="Copyright (c) 2012-2024 Miguel Grinberg">
  <meta name="author" content="Miguel Grinberg">
  
  <meta name="keywords" content="javascript, react, jsx, rest, fetch, async">
  
  
  <link rel="canonical" href="../../the-react-mega-tutorial-chapter-5-connecting-to-a-back-end.html">
  

  
    <link href="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&amp;display=swap" rel="stylesheet">

  <link href="../../../static/tomorrow.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/tomorrow-night.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/social.css" rel="stylesheet" type="text/css" />
  <link href="../../../static/style_20231230.css" rel="stylesheet" type="text/css" />

  <link rel="shortcut icon" href="https://blog.miguelgrinberg.com/static/favicon.ico">
  <link rel="alternate" type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed" title="miguelgrinberg.com RSS feed">

    <meta property="og:title" content="The React Mega-Tutorial, Chapter 5: Connecting to a Back End">
    <meta property="og:description" content="In this chapter you are going to learn how the React application can communicate with a back end application to request data. While doing this, you will learn how to use the two most important React…">
    <meta property="og:image" content="https://blog.miguelgrinberg.com/static/cards/the-react-mega-tutorial-chapter-5-connecting-to-a-back-end.jpg">
    <meta property="og:url" content="https://blog.miguelgrinberg.com/post/the-react-mega-tutorial-chapter-5-connecting-to-a-back-end">
    <meta name="twitter:title" content="The React Mega-Tutorial, Chapter 5: Connecting to a Back End">
    <meta name="twitter:description" content="In this chapter you are going to learn how the React application can communicate with a back end application to request data. While doing this, you will learn how to use the two most important React…">
    <meta name="twitter:image" content="https://blog.miguelgrinberg.com/static/cards/the-react-mega-tutorial-chapter-5-connecting-to-a-back-end.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@miguelgrinberg">

  </head>
  <body>
    <svg style="display: none" version="2.0">
      <defs>
        <symbol id="icon-theme-auto" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-circle-half" viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 0 8 1zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16"/>
        </symbol>
        <symbol id="icon-theme-light" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-brightness-high-fill" viewBox="0 0 16 16">
          <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </symbol>
        <symbol id="icon-theme-dark" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-moon-stars-fill" viewBox="0 0 16 16">
          <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278"/>
          <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
        </symbol>
      </defs>
    </svg>
<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="https://blog.miguelgrinberg.com/index">miguelgrinberg.com</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" aria-current="page" href="https://blog.miguelgrinberg.com/index">Home</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../my-courses-and-books.html">My Courses and Books</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../hire-me.html">Consulting</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../about-me.html">About Me</a></li>
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <svg width="20" height="20" version="2.0"><use id="current-theme" href="#icon-theme-light"></svg>
          </a>
          <ul class="dropdown-menu">
            <li>
              <a id="select-theme-light" class="dropdown-item" href="javascript:updateTheme('light')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-light"></svg>&nbsp; Light Mode
              </a>
            </li>
            <li>
              <a id="select-theme-dark" class="dropdown-item" href="javascript:updateTheme('dark')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-dark"></svg>&nbsp; Dark Mode
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a id="select-theme-auto" class="dropdown-item" href="javascript:updateTheme('auto')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-auto"></svg>&nbsp; System Default
              </a>
            </li>
          </ul>
        </li>
        
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item social-icons">
          <a type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed"><img src="../../../static/social/rss.png" alt="RSS Feed" title="RSS Feed" /></a>
          <a href="https://twitter.com/miguelgrinberg"><img src="../../../static/social/twitter.png" alt="Twitter" title="Twitter" /></a>
          <a rel="me" href="https://mstdn.social/@miguelgrinberg"><img src="../../../static/social/mastodon.png" alt="Mastodon" title="Mastodon" /></a>
          <a href="http://github.com/miguelgrinberg"><img src="../../../static/social/github.png" alt="GitHub" title="GitHub" /></a>
          <a href="https://youtube.com/miguelgrinberg"><img src="../../../static/social/youtube.png" alt="YouTube" title="YouTube" /></a>
          <a href="http://www.linkedin.com/in/miguelgrinberg"><img src="../../../static/social/linkedin.png" alt="LinkedIn" title="LinkedIn" /></a>
          <a href="https://patreon.com/miguelgrinberg"><img src="../../../static/social/patreon.png" alt="Patreon" title="Patreon" /></a>
          <!--<a href="https://www.facebook.com/miguelgrinbergblog"><img src="/static/social/facebook.png" alt="Facebook" title="Facebook" /></a>-->
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
  <div class="row">
    <div class="col-md-8">
      <div id="main">
        
        
        
        
        

<div class="post">

<div class="post-header">
  <h1><a href="../../the-react-mega-tutorial-chapter-5-connecting-to-a-back-end.html">The React Mega-Tutorial, Chapter 5: Connecting to a Back End</a></h1>
  <h2>
    Posted by
    <form action="https://blog.miguelgrinberg.com/author/Miguel Grinberg" method="POST">
      <input type="submit" class="btn btn-danger btn-sm" value="Miguel Grinberg" />
    </form>
    on
    <button class="btn btn-secondary btn-sm" disabled><span class="flask-moment" data-timestamp="2022-06-02T18:25:35Z" data-function="format" data-format="LL" data-refresh="0" style="display: none">2022-06-02T18:25:35Z</span></button>
    under
    
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/JavaScript" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="JavaScript" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/React" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="React" />
      </form>
    
    
  </h2>
</div>
<div class="post-body"><p>In this chapter you are going to learn how the React application can communicate with a back end application to request data. While doing this, you will learn how to use the two most important React hooks: <code>useState()</code> and <code>useEffect()</code>.</p>
<p>The complete course, including videos for every chapter is available to order from my <a href="https://courses.miguelgrinberg.com/p/react-mega-tutorial">courses site</a>. Ebook and paperback versions of this course are also available from <a href="https://www.amazon.com/dp/B09YPBXMMY/ref=nosim?tag=thirdwish-20">Amazon</a>. Thank you for your support!</p>
<p>For your reference, here is the complete list of articles in this series:</p>
<ul>
<li><a href="introducing-the-react-mega-tutorial.html">Introducing the React Mega-Tutorial</a></li>
<li><a href="the-react-mega-tutorial-chapter-1-modern-javascript.html">Chapter 1: Modern JavaScript</a></li>
<li><a href="the-react-mega-tutorial-chapter-2-hello-react.html">Chapter 2: Hello, React!</a></li>
<li><a href="the-react-mega-tutorial-chapter-3-working-with-components.html">Chapter 3: Working with Components</a></li>
<li><a href="the-react-mega-tutorial-chapter-4-routing-and-page-navigation.html">Chapter 4: Routing and Page Navigation</a></li>
<li><a href="the-react-mega-tutorial-chapter-5-connecting-to-a-back-end.html">Chapter 5: Connecting to a Back End</a> (this article)</li>
<li><a href="the-react-mega-tutorial-chapter-6-building-an-api-client.html">Chapter 6: Building an API Client</a></li>
<li><a href="the-react-mega-tutorial-chapter-7-forms-and-validation.html">Chapter 7: Forms and Validation</a></li>
<li><a href="the-react-mega-tutorial-chapter-8-authentication.html">Chapter 8: Authentication</a></li>
<li><a href="the-react-mega-tutorial-chapter-9-application-features.html">Chapter 9: Application Features</a></li>
<li><a href="the-react-mega-tutorial-chapter-10-memoization.html">Chapter 10: Memoization</a></li>
<li><a href="the-react-mega-tutorial-chapter-11-automated-testing.html">Chapter 11: Automated Testing</a></li>
<li><a href="the-react-mega-tutorial-chapter-12-production-builds.html">Chapter 12: Production Builds</a></li>
</ul>
<h2>Running the Microblog API Back End</h2>
<p>Starting in this chapter, you will need to run the project's companion back end application. This is an open source application called <a href="https://github.com/miguelgrinberg/microblog-api">Microblog API</a> that provides all the storage and authentication functionality needed by the React front end you are building.</p>
<p>Microblog API has a <a href="https://github.com/miguelgrinberg/microblog-api/blob/main/README.md">read me page</a> that you can consult for detailed installation instructions, but the following sections cover the basic installation steps for three different installation methods.</p>
<h3>Getting an Email Server</h3>
<p>The Microblog API service needs access to an email server, to be used in a later chapter while implementing the reset password flow, which requires the server to send emails.</p>
<p>If you don't have an email service that you can use, my recommendation is that you open a <a href="https://sendgrid.com/">SendGrid</a> account. The free tier of this service includes 100 emails per day, which is more than enough for the needs of this project.</p>
<p>To configure the email service in Microblog API, you will need to provide values for the several configuration variables:</p>
<ul>
<li><code>MAIL_SERVER</code>: The email server to use when sending emails.</li>
<li><code>MAIL_PORT</code>: The port in which the email server listens for connections.</li>
<li><code>MAIL_USE_TLS</code>: Set to any non-empty string to use an encrypted connection.</li>
<li><code>MAIL_USERNAME</code>: The username for the email sender's account.</li>
<li><code>MAIL_PASSWORD</code>: The password for the email sender's account.</li>
<li><code>MAIL_DEFAULT_SENDER</code>: The email address that appears in all emails sent by the application as the sender.</li>
</ul>
<p>If you decide to use SendGrid, open an account, and then <a href="https://docs.sendgrid.com/ui/account-and-settings/api-keys#creating-an-api-key">create an API key</a>. The email settings for a SendGrid account are as follows:</p>
<pre><code class="language-bash">MAIL_SERVER=smtp.sendgrid.net
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=apikey    # &lt;-- this is the literal word &quot;apikey&quot;
MAIL_PASSWORD=          # &lt;-- your SendGrid API key here
MAIL_DEFAULT_SENDER=    # &lt;-- the sender email address you'd like to use
</code></pre>
<p>As noted above in comments, the <code>MAIL_PASSWORD</code> variable needs to be set to your SendGrid API key. The <code>MAIL_DEFAULT_SENDER</code> can be set to any email address. This address is going to be in the <code>From</code> field of all emails sent by the service.</p>
<h3>Installing the Back End</h3>
<p>In this section, three methods of installation are described:</p>
<ol>
<li>Run on your computer with <a href="https://www.docker.com/">Docker</a></li>
<li>Run on your computer with <a href="https://www.python.org/">Python</a></li>
<li>Deploy to a free or paid <a href="https://www.heroku.com/">Heroku</a> account</li>
</ol>
<p>Which is the best method? If you are familiar with Docker containers, then use option 1. If you are familiar with setting up and running Python applications on your computer, then option 2 should be relatively easy for you to implement, but if you don't want to complicate yourself with running a service on your computer, then Heroku might be the best option for you. You can review the following sections to learn what's involved in each of the methods if you need more information to decide.</p>
<h3>Running the Back End on Docker</h3>
<p>If you are interested in running the back end service as a Docker container, you need to have <a href="https://www.docker.com/why-docker">Docker</a> and <a href="https://git-scm.com/">git</a> installed.</p>
<p>Open a new terminal window and find a suitable parent directory that is outside the React project directory. Clone the Microblog API GitHub repository to download the project to your computer:</p>
<pre><code class="language-bash">git clone https://github.com/miguelgrinberg/microblog-api
cd microblog-api
</code></pre>
<p>Create a configuration file with the name <em>.env</em>. An example is shown below, assuming you are using a SendGrid account as email server. Make sure you enter the appropriate email server details that apply to you.</p>
<pre><code class="language-bash">DISABLE_AUTH=true
MAIL_SERVER=smtp.sendgrid.net
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=apikey
MAIL_PASSWORD=                 # &lt;-- your SendGrid API key
MAIL_DEFAULT_SENDER=           # &lt;-- any email address
</code></pre>
<p>It is important that the <code>DISABLE_AUTH</code> variable is set to <code>true</code> at this time, to remove authentication. You will enable authentication support in a later chapter.</p>
<p>Start the back end with <a href="https://docs.docker.com/compose/">Docker Compose</a> as follows:</p>
<pre><code class="language-bash">docker-compose up -d
</code></pre>
<p>Once the service is up and running, run the next two commands to populate the database used by the service with some randomly generated data:</p>
<pre><code class="language-bash">docker-compose run --rm microblog-api bash -c &quot;flask fake users 10&quot;
docker-compose run --rm microblog-api bash -c &quot;flask fake posts 100&quot;
</code></pre>
<p>To check that the service is running correctly, navigate to the <em>http://localhost:5000</em> URL on your web browser. This should open the live API documentation site.</p>
<p>On some computers, port 5000 might be in used by another service. If that is your situation, you can specify a different port by adding a <code>MICROBLOG_API_PORT</code> variable to the <em>.env</em> file. The following example configures the service to run on port 4000:</p>
<pre><code class="language-bash">MICROBLOG_API_PORT=4000
</code></pre>
<h3>Running the Back End with Python</h3>
<p>If you are familiar with running Python applications, you can just install and run the application directly on your computer. For this you need to have a recent Python 3 interpreter and <a href="https://git-scm.com/">git</a> installed.</p>
<p>Open a new terminal window, find a location outside the React project's directory, and clone the GitHub repository for Microblog API there:</p>
<pre><code class="language-bash">git clone https://github.com/miguelgrinberg/microblog-api
cd microblog-api
</code></pre>
<p>As with Docker, you need to create a configuration file with the name <em>.env</em>. Below you can see an example configuration file that assumes you are using a SendGrid account as email server.</p>
<pre><code class="language-bash">DISABLE_AUTH=true
MAIL_SERVER=smtp.sendgrid.net
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=apikey
MAIL_PASSWORD=                 # &lt;-- your SendGrid API key
MAIL_DEFAULT_SENDER=           # &lt;-- any email address
</code></pre>
<p>It is very important that the <code>DISABLE_AUTH</code> variable in this configuration file is set to <code>true</code> at this time, to allow this service to work without authentication. You will enable authentication later, when implementing user logins.</p>
<p>Create a Python virtual environment and install the project's dependencies in it:</p>
<pre><code class="language-bash">python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
</code></pre>
<p>Initialize the service's database and add some random content to it with the following commands, which must be executed while the virtual environment is activated:</p>
<pre><code class="language-bash">flask db upgrade
flask fake users 10
flask fake posts 100
</code></pre>
<p>To start the service type the following command in your terminal:</p>
<pre><code class="language-bash">flask run
</code></pre>
<p>With the service running, navigate to <em>http://localhost:5000</em> and make sure the live API documentation site opens.</p>
<p>If you need to run the service on a different port, add the <code>--port</code> option to the run command. For example, to use port 4000, the command is:</p>
<pre><code class="language-bash">flask run --port=4000
</code></pre>
<h3>Deploying the Back End to Heroku</h3>
<p>If you want to deploy to the <a href="https://www.heroku.com/">Heroku</a> service, first make sure you have an account on this service. A free account is sufficient for the needs of this project.</p>
<p>The <a href="https://github.com/miguelgrinberg/microblog-api/blob/main/README.md">read me</a> page for the Microblog API project has a "Deploy to Heroku" button. Click this button to configure the deployment.</p>
<p>In the "App name" field you have to enter a name for the deployed back end application. You will need to find a name that hasn't been used by any other Heroku customer, so it may take a few tries until you find a unique name that is accepted.</p>
<p>For the "Choose a region" dropdown you can pick a region that is closest to where you are located, or you can leave the default selection.</p>
<p>In the <code>DISABLE_AUTH</code> field, enter the word <code>true</code>. This is going to deploy the service with authentication disabled. Authentication is covered in a later chapter, for now you will need to have the service running without authentication.</p>
<p>The next set of fields are for the email settings. Above you can find the settings you have to use if you followed my recommendation of using a SendGrid account. If you use a different email provider, configure it as required by your service.</p>
<p>You can leave any additional fields set to their default values.</p>
<p>When you are done with the configuration, click the "Deploy app" button. The deployment should only take a minute or two. When the application is deployed, you should see all green check marks, as shown in <a href="#fig5-1">Figure 5.1</a>.</p>
<div id="fig5-1"></div>
<p><center><img alt="Figure 5.1: A completed Heroku deployment" src="../../../static/images/react-mega-tutorial/05-heroku.png" /></center></p>
<p>The deployed application can be accessed at the URL <em>https://APPNAME.herokuapp.com</em>, where <em>APPNAME</em> is the application name that you entered in the configuration form. For example, if you deployed the application with the name "susan-microblog-api", then the base URL for the application is <em>https://susan-microblog-api/herokuapp.com</em>.</p>
<p>To make sure the application has been deployed successfully, you can open the base URL of your deployment in your browser. This should open the live documentation page for the service.</p>
<h2>Using State Variables</h2>
<p>The <code>Posts</code> component renders fake blog posts that were manually entered into the code early in the life of the project. This was useful because it made it possible to make progress with other parts of the project, without having to complicate things by involving the back end from the very start. Now it is finally time to remove the fake posts and render content returned by the server.</p>
<p>Doing this presents some challenges. For performance reasons, React requires that component functions render themselves to JSX quickly. In particular, it is not allowed for the render function to send a request out to the server asking for data and blocking the render while waiting for a response, as this would cause the whole application to freeze and appear unresponsive to the user.</p>
<p>How can the data be requested then? The short answer is that this is done as a <em>side effect</em>, but you will learn what this means in the next section. For now let's just say that the component has to schedule the request to run as a background task, so that the render process isn't held back.</p>
<p>The process of rendering data obtained from the server takes a few steps:</p>
<ol>
<li>The component's render function is invoked. Within this function, the request to the server is scheduled as a background operation (called a side effect, in React jargon). The component function must return quickly and without blocking, so at this point it renders without any data, usually showing a spinner image or "loading" message.</li>
<li>The background task that was scheduled to request the data runs, and at some point a response from the server is received. The background task notifies React that some new data has arrived and is ready for rendering.</li>
<li>React calls the component's render function a second time, and the component re-renders itself with the data that was received.</li>
</ol>
<p>After you think about this process, you will likely wonder how do the background data retrieval function, React and the rendering component communicate and coordinate to perform the three steps outlined above.</p>
<p>The React feature that makes this multistep render process possible is called a <em>state variable</em>.</p>
<p>The <code>useState()</code> hook function from React is used to create state variables. Hooks are special functions that have names that start with the word <code>use</code>. These functions can only be called from component functions or from other hooks. Calling a hook in any other context is not allowed and will be reported as an error when the application is built.</p>
<p>Here is how a <code>posts</code> state variable to hold a list of blog posts could be allocated inside the <code>Posts</code> component:</p>
<pre><code class="language-javascript">const [posts, setPosts] = useState();
</code></pre>
<p>If an argument is passed to <code>useState()</code>, then this becomes the initial value for the state variable. This can be a primitive value such as a string or a number, it can also be an array or an object, and it can also be set to <code>null</code> or <code>undefined</code>. If the argument is omitted, then the state variable is initialized with a value of <code>undefined</code>.</p>
<p>The return value from the hook is an array with two elements, which in the above example are assigned to two constants using a destructuring assignment.</p>
<p>The first element of the returned array is the current value of the state variable. Going back to the three rendering steps above, when the component renders for the first time in step 1, this would be the initial value assigned to the state variable, which in this case is <code>undefined</code>.</p>
<p>The second element of the array is a <em>setter</em> function for the state variable. This function must be used to update the value of the state variable. This will be done in the background task when the data is received. Calling the setter function with a new value is what allows React to trigger the render that occurs in step 3 above.</p>
<p>When the component renders a second time in step 3, the <code>posts</code> constant returned by <code>useState()</code> is going to have the value that was passed to the setter function.</p>
<p>The first step in the migration to use real data in the <code>Posts</code> component is to replace the <code>posts</code> constant and the fake blog posts with a state variable of the same name.</p>
<p class="code_title"><em>src/components/Posts.js</em>: Add a <code>posts</code> state variable</p>

<pre><code class="language-jsx">import { useState } from 'react';
import Spinner from 'react-bootstrap/Spinner';

export default function Posts() {
  const [posts, setPosts] = useState();

  // TODO: add a side effect function to request posts here

  return (
    &lt;&gt;
      {posts === undefined ?
        &lt;Spinner animation=&quot;border&quot; /&gt;
      :
        &lt;&gt;
          ... // &lt;-- no changes to blog post JSX
        &lt;/&gt;
      }
    &lt;/&gt;
  );
}
</code></pre>
<p>The first line imports the <code>useState()</code> hook from the React library. The <a href="https://react-bootstrap.github.io/docs/components/spinners/">Spinner</a> component imported in the second line comes with React-Bootstrap.</p>
<p>The state variable is created in the first line of the component function. The comment that follows is a placeholder for the side effect function, which will be added in the next section.</p>
<p>The <code>return</code> statement that looped through the blog posts has been expanded. At the top level there is a conditional that checks if the <code>posts</code> state variable is set to <code>undefined</code>, and in that case a spinner component is returned. This implements step 1 of the render process described earlier in this section, when the data from the server isn't available yet.</p>
<p>If <code>posts</code> has a value other than <code>undefined</code>, then it means that this is the second render, so in that case the previous loop logic is used to render the data obtained from the server.</p>
<p><a href="#fig5-2">Figure 5.2</a> shows how the application looks with these last changes.</p>
<div id="fig5-2"></div>
<p><center><img alt="Figure 5.2: A spinner while the component's state variable is undefined" src="../../../static/images/react-mega-tutorial/05-spinner.png" /></center></p>
<h2>Side Effect Functions</h2>
<p>In this section you are going to send a request to the back end to obtain remote data, which will be rendered to the page with the state variable logic added in the previous section. There is a bit of preparation required before the request can be made.</p>
<h3>Configuring the Back End Root URL</h3>
<p>Before the front end can make a request to the server, it needs to know what is the root URL of your back end. Depending on your back end installation method here is how you can determine this URL:</p>
<ul>
<li>If you are running the back end on a local Docker, then your root URL is <em>http://localhost:5000</em>. If the Docker host is remote, then change <code>localhost</code> to the IP address or hostname of your Docker host. When using a custom port, change the <code>5000</code> to your chosen port number.</li>
<li>If you are running the Python application directly on your computer, then your root URL is also <em>http://localhost:5000</em>. Once again, be sure to change the <code>5000</code> to the correct number if you are using a custom port.</li>
<li>If you are running the back end on Heroku, then your root URL is <em>https://APPNAME.herokuapp.com</em>, where <code>APPNAME</code> is the application name that you selected when you deployed the service. If you can't remember the name, you can visit your <a href="https://dashboard.heroku.com/apps">Heroku dashboard</a> to look it up.</li>
</ul>
<p>To check that you have the correct root URL for your back end, type this URL in your web browser. If the URL is correct, the browser should automatically redirect to <em>/docs</em> and show you the API documentation site. You can see how this looks in <a href="#fig5-3">Figure 5.3</a>.</p>
<div id="fig5-3"></div>
<p><center><img alt="Figure 5.3: Microblog API documentation site" src="../../../static/images/react-mega-tutorial/05-apidocs.png" /></center></p>
<p>The most convenient way to incorporate the back end URL into the front end project is through an environment variable. Applications generated by Create React App have <a href="https://create-react-app.dev/docs/adding-custom-environment-variables/">environment variable support</a>, either directly from the shell or through environment files.</p>
<p>Create an environment file named <em>.env</em> (note the leading dot) in the top-level directory of your React project, and enter the following line in it, editing the URL to be the correct one for your back end installation:</p>
<pre><code class="language-bash">REACT_APP_BASE_API_URL=http://localhost:5000
</code></pre>
<p>Do not include a trailing slash when you enter the back end URL.</p>
<p>Environment variables that are meant to be imported into the React application must have a name that starts with <code>REACT_APP_</code>. This ensures that any other variables that are in your environment, some of which can be sensitive, are not leaked to the front end by mistake.</p>
<p>Save the <em>.env</em> file with the new variable. Then stop the <code>npm start</code> process with Ctrl-C and restart it, so that the environment file is imported. The Create React App build will make the variable accessible anywhere in the application as <code>process.env.REACT_APP_BASE_API_URL</code>.</p>
<h3>Using the API Documentation Site</h3>
<p>Open the Microblog API documentation site once again, by typing its root URL in a browser. Find the "Endpoints" section in the left sidebar, and open the "posts" subsection to see all the endpoints related to blog posts. Click on the endpoint labeled "Retrieve the user's post feed".</p>
<p>The documentation page for the endpoint shows how to make this request. Because the back end is deployed without authentication support, you can ignore the security aspects for now. When running without authentication, all requests are automatically authenticated to the first user in the system.</p>
<p>From this page you can learn that the HTTP method for this request is <code>GET</code>, and that the URL path to attach after the root server URL is <em>/api/feed</em>. There are some query parameters related to pagination, but they are all optional, so there is no need to worry about those for now.</p>
<p>The "Responses" section shows the structure of the data that is returned by the request, which has <code>data</code> and <code>pagination</code> top-level sections.</p>
<p>On the right side of the page there is a web form, where you can enter input arguments for the request and send a test request out to the server. The only input argument this endpoint requires is the authentication token, but it is currently not checked, so you can click the "Send API Request" button with all the input fields blank and see an example response from this endpoint. This will allow you to familiarize yourself with a real response, which should include some randomly generated users and blog posts.</p>
<h3>Sending a Request with <code>fetch()</code></h3>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch">fetch()</a> function, available in all modern web browsers, is the simplest way to send HTTP requests to a server. Another popular HTTP client used in many React applications is <a href="https://github.com/axios/axios">axios</a>. For this application <code>fetch()</code> will be used.</p>
<p><code>GET</code> requests that don't require authentication or other input arguments can be sent just by calling <code>fetch()</code> with the URL of the target endpoint as an argument. For example:</p>
<pre><code class="language-javascript">const BASE_API_URL = process.env.REACT_APP_BASE_API_URL;
const response = await fetch(BASE_API_URL + '/api/feed');
</code></pre>
<p>The <code>fetch()</code> function uses promises, so it needs to be awaited when you are in a function declared as <code>async</code>.</p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">Response</a> object returned by <code>fetch()</code> provides many attributes and methods to work with the HTTP response. A very useful attribute is <code>response.ok</code>, which is <code>true</code> when the request returned a success status code. For a <a href="https://www.json.org/json-en.html">JSON</a> API, the <code>response.json()</code> method parses the data in the body of the response and returns it as a JavaScript object or array:</p>
<pre><code class="language-javascript">const results = await response.json();
if (response.ok) {
  console.log(results.data);
  console.log(results.pagination);
}
</code></pre>
<p>In this example, the <code>response.json()</code> method (which also returns a promise) is awaited, and then if the request was successful, the <code>data</code> and <code>pagination</code> keys of the JSON payload are printed to the console.</p>
<h3>Creating a Side Effect Function</h3>
<p>In React, side effect functions are created with the <code>useEffect()</code> hook function inside the component's render function. The first argument to <code>useEffect()</code> is a function with the code that needs to run in the background. The second argument is an array of dependencies that determine when the effect needs to run.</p>
<p>Understanding how to use the second argument to <code>useEffect()</code> is often difficult when learning React. A simple rule to remember, is that when this argument is set to an empty array, the side effect function runs once when the component is first rendered and never again.</p>
<p>A common mistake is to forget to include the second argument. This is interpreted by React as instructions to run the side effect function every single time the component renders, which is rarely necessary.</p>
<p>Later you will see that there are cases that require specific values for this array, but it is best to get used to set this argument to an empty array and then changing it only when necessary.</p>
<p>The listing below shows the updated <code>Posts</code> component, with the side effect function in place.</p>
<p class="code_title"><em>src/components/Posts.js</em>: Load blog posts as a side effect</p>

<pre><code class="language-jsx">import { useState, useEffect } from 'react';
import Spinner from 'react-bootstrap/Spinner';

const BASE_API_URL = process.env.REACT_APP_BASE_API_URL;

export default function Posts() {
  const [posts, setPosts] = useState();

  useEffect(() =&gt; {
    (async () =&gt; {
      const response = await fetch(BASE_API_URL + '/api/feed');
      if (response.ok) {
        const results = await response.json();
        setPosts(results.data);
      }
      else {
        setPosts(null);
      }
    })();
  }, []);

  return (
    &lt;&gt;
      {posts === undefined ?
        &lt;Spinner animation=&quot;border&quot; /&gt;
      :
        &lt;&gt;
          {posts === null ?
             &lt;p&gt;Could not retrieve blog posts.&lt;/p&gt;
          :
            &lt;&gt;
              ... // &lt;-- no changes to blog post JSX
            &lt;/&gt;
          }
        &lt;/&gt;
      }
    &lt;/&gt;
  );
}
</code></pre>
<p>The side effect function is defined after the <code>posts</code> state variable, so that it can access the <code>setPosts()</code> setter function to update the list of posts.</p>
<p>React requires that the function that is given as the argument to <code>useEffect()</code> is not async. A commonly used trick to enable the use of <code>async</code> and <code>await</code> in side effect functions is to create an inner async function and immediately call it. This pattern is commonly referred as an <a href="https://developer.mozilla.org/en-US/docs/Glossary/IIFE">Immediately Invoked Function Expression (IIFE)</a>. To help you understand this, here is how this inner async function looks, isolated from the rest of the code:</p>
<pre><code class="language-javascript">(async () =&gt; {
  // await can be used here
})();
</code></pre>
<p>Note how the arrow function is defined within parenthesis, and the <code>()</code> at the end invokes it.</p>
<p>The logic in the side effect function uses <code>fetch()</code> to retrieve the user's post feed from the server. If the request succeeds, then the list of posts is set in the <code>posts</code> state variable through the <code>setPosts()</code> setter function.</p>
<p>When the state variable changes, React will trigger a new render of the component, and this time the loop section of the JSX will be used.</p>
<p>To make this component robust, it is also necessary to handle the case of the request failing. In the side effect function, the value of the <code>posts</code> state variable is set to <code>null</code> when <code>response.ok</code> is false.</p>
<p>As discussed above, the second argument to <code>useEffect()</code> is set to <code>[]</code>, to indicate that the function given in the first argument should only run when the initial render occurs. In this first render, the component will render itself with the spinner.</p>
<p>The JSX contents of this component have been expanded to also handle the case of <code>posts</code> being <code>null</code>, which is handled by rendering an error message. In a later chapter you will learn how to create global error alerts, which is better than having them in every component that uses the API.</p>
<p><a href="#fig5-4">Figure 5.4</a> shows actual blog posts returned by the server rendered on the page. If you are wondering why the content does not make any sense, remember that during installation, the back end's database was filled with randomly generated content.</p>
<div id="fig5-4"></div>
<p><center><img alt="Figure 5.4: Blog posts rendered on the feed page" src="../../../static/images/react-mega-tutorial/05-fetch.png" /></center></p>
<h2>Rendering Blog Posts</h2>
<p>Displaying more content makes it obvious that the render code for posts is extremely plain and needs an improvement. The code for the <code>Posts</code> component has grown as a result of adding the state variable and the side effect function, so this is a good opportunity to refactor it, by moving the JSX loop that renders a single blog post into a separate component, which can be called <code>Post</code>.</p>
<p>Here is <code>Posts</code> after the blog post rendering code was refactored:</p>
<p class="code_title"><em>src/components/Posts.js</em>: Simplified <code>Posts</code> component</p>

<pre><code class="language-jsx">import { useState, useEffect } from 'react';
import Spinner from 'react-bootstrap/Spinner';
import Post from './Post';

const BASE_API_URL = process.env.REACT_APP_BASE_API_URL;

export default function Posts() {
  // &lt;-- no changes to state variable and side effect function

  return (
    &lt;&gt;
      {posts === undefined ?
        &lt;Spinner animation=&quot;border&quot; /&gt;
      :
        &lt;&gt;
          {posts === null ?
             &lt;p&gt;Could not retrieve blog posts.&lt;/p&gt;
          :
            &lt;&gt;
              {posts.length === 0 ?
                &lt;p&gt;There are no blog posts.&lt;/p&gt;
              :
                posts.map(post =&gt; &lt;Post key={post.id} post={post} /&gt;)
              }
            &lt;/&gt;
          }
        &lt;/&gt;
      }
    &lt;/&gt;
  );
}
</code></pre>
<p>The loop in <code>Posts</code> is now a single line that references <code>Post</code> for each blog post. Something to remember when refactoring loops is that the required <code>key</code> attribute must always be in the source file that has the loop. React will not see it if it is moved into the child component.</p>
<p>The application is now broken, because <code>Posts</code> imports the <code>Post</code> component, which doesn't exist yet. The code for <code>Post</code>, with several render improvements, is shown below.</p>
<p class="code_title"><em>src/components/Post.js</em>: Styled blog posts</p>

<pre><code class="language-jsx">import Stack from 'react-bootstrap/Stack';
import Image from 'react-bootstrap/Image';
import { Link } from 'react-router-dom';

export default function Post({ post }) {
  return (
    &lt;Stack direction=&quot;horizontal&quot; gap={3} className=&quot;Post&quot;&gt;
      &lt;Image src={post.author.avatar_url + '&amp;s=48'}
             alt={post.author.username} roundedCircle /&gt;
      &lt;div&gt;
        &lt;p&gt;
          &lt;Link to={'/user/' + post.author.username}&gt;
            {post.author.username}
          &lt;/Link&gt;
          &amp;nbsp;&amp;mdash;&amp;nbsp;
          {post.timestamp}:
        &lt;/p&gt;
        &lt;p&gt;{post.text}&lt;/p&gt;
      &lt;/div&gt;
    &lt;/Stack&gt;
  );
}
</code></pre>
<p>The new render code isn't very long, but there are a lot of changes from the previous version.</p>
<p>In the previous render logic, a post was rendered as a <code>&lt;p&gt;</code> element. This is not a good top-level element, because it makes it harder to also render the user's avatar image.</p>
<p>The new layout uses a horizontal <code>Stack</code> as the main component. The <code>gap</code> attribute of the stack adds a margin around each child. As with other top-level components, a class name of <code>Post</code> is added to facilitate CSS styling.</p>
<p>The first child in the stack is the <a href="https://react-bootstrap.github.io/docs/components/images/">Image</a> component from React-Bootstrap, which is used to render the user's avatar image URL that is returned by the server. The server works with <a href="https://en.gravatar.com/">Gravatar</a> URLs, which accept a <code>s</code> parameter in the query string to request a specific image size, set to 48 pixels in this instance. The <code>roundCircle</code> attribute makes the images round instead of square, which gives the avatar a nice touch. Microblog API returns Gravatar images that generate a geometric design for any email addresses that do not have a registered avatar. You can visit <a href="https://en.gravatar.com/">Gravatar</a> to register an avatar for your email address.</p>
<p>The second component in this stack is the body of the post, which uses a <code>&lt;div&gt;</code> element as parent, with two <code>&lt;p&gt;</code> paragraphs inside for the post header and body respectively. The header uses a <code>Link</code> component from React-Router for the author's username. The link points to the <em>/user/{username}</em> user profile placeholder page created in <a href="../../the-react-mega-tutorial-chapter-4-routing-and-page-navigation.html">Chapter 4</a>.</p>
<h3>Post Styling Improvements</h3>
<p>The body of the post is rendered directly inside the second <code>&lt;p&gt;</code>. The resulting page needed a few minor CSS adjustments to look its best. Below are the CSS definitions added to <em>index.css</em>.</p>
<p class="code_title"><em>src/index.css</em>: Styles for blog posts</p>

<pre><code class="language-css">... // &lt;-- no changes to existing styles

.Content {
  margin-top: 10px;
}

.Post {
  align-items: start;
  padding-top: 5px;
  border-bottom: 1px solid #eee;
}

.Post:hover {
  background-color: #f8f8f8;
}

.Post a {
  color: #14c;
  text-decoration: none;
}

.Post a:visited {
  color: #14c;
}
</code></pre>
<p>In addition to some small spacing and alignment fixes, the CSS above changes the color and style of the username links, adds a border line between blog posts, and changes the background color of the post under the mouse pointer.</p>
<h2>Displaying Relative Times</h2>
<p>While the new <code>Post</code> component nicely formats blog posts on the page, the one part in which it is still lacking is in how the time of the post is presented. Microblog API returns all timestamps as strings that follow the <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> specification, which is a widely accepted format for machine-to-machine communication of dates and times. But this format is not the best for use by humans.</p>
<p>In this type of application, what works best is to show the time of a post in relative terms, such as "yesterday" or "3 hours ago". In this section you'll add a <code>TimeAgo</code> component that takes a timestamp in ISO 8601 format as a prop, and renders it to the page as a relative time. First update the <code>Post</code> component to use <code>TimeAgo</code>.</p>
<p class="code_title"><em>src/components/Post.js</em>: Relative time for blog posts</p>

<pre><code class="language-jsx">import Stack from 'react-bootstrap/Stack';
import Image from 'react-bootstrap/Image';
import { Link } from 'react-router-dom';
import TimeAgo from './TimeAgo';

export default function Post({ post }) {
  return (
    &lt;Stack direction=&quot;horizontal&quot; gap={3} className=&quot;Post&quot;&gt;
      &lt;Image src={post.author.avatar_url + '&amp;s=48'}
             alt={post.author.username} roundedCircle /&gt;
      &lt;div&gt;
        &lt;p&gt;
          &lt;Link to={'/user/' + post.author.username}&gt;
            {post.author.username}
          &lt;/Link&gt;
          &amp;nbsp;&amp;mdash;&amp;nbsp;
          &lt;TimeAgo isoDate={post.timestamp} /&gt;:
        &lt;/p&gt;
        &lt;p&gt;{post.text}&lt;/p&gt;
      &lt;/div&gt;
    &lt;/Stack&gt;
  );
}
</code></pre>
<p>With the above change the application is once again temporarily broken, this time due to the reference to a nonexistent <code>TimeAgo</code> component.</p>
<p>The following listing shows the general structure that will be used for this component, with placeholders for the actual logic.</p>
<p class="code_title"><em>src/components/TimeAgo.js</em>: Render relative times</p>

<pre><code class="language-jsx">import { useState, useEffect } from 'react';

const secondsTable = [
  ['year', 60 * 60 * 24 * 365],
  ['month', 60 * 60 * 24 * 30],
  ['week', 60 * 60 * 24 * 7],
  ['day', 60 * 60 * 24],
  ['hour', 60 * 60],
  ['minute', 60],
];
const rtf = new Intl.RelativeTimeFormat(undefined, {numeric: 'auto'});

function getTimeAgo(date) {
  // TODO
}

export default function TimeAgo({ isoDate }) {
  // TODO
}
</code></pre>
<p>The component is going to use the <code>useState()</code> and <code>useEffect()</code> hooks, this time for a purpose that is not related to loading remote resources from the network.</p>
<p>The <code>secondsTable</code> array has the number of seconds in a year, a month, a week, a day, an hour, and a minute. These numbers are going to be useful in determining which of these units is the best to use in the relative time.</p>
<p>The <code>rtf</code> constant is an instance of the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/RelativeTimeFormat">Intl.RelativeTimeFormat</a> class, which is going to generate the actual text of the relative time. This class is not well known, but is available in all modern browsers.</p>
<p>The <code>getTimeAgo()</code> helper function accepts a <code>Date</code> object and finds the best relative units to use to render it. The function is defined outside the <code>TimeAgo</code> component because it is a standalone function that does not need to be different for each instantiation of the component, and it also does not need to change when the component re-renders.</p>
<p>The implementation of the <code>getTimeAgo()</code> function is shown below.</p>
<p class="code_title"><em>src/components/TimeAgo.js</em>: getTimeAgo() function</p>

<pre><code class="language-jsx">function getTimeAgo(date) {
  const seconds = Math.round((date.getTime() - new Date().getTime()) / 1000);
  const absSeconds = Math.abs(seconds);
  let bestUnit, bestTime, bestInterval;
  for (let [unit, unitSeconds] of secondsTable) {
    if (absSeconds &gt;= unitSeconds) {
      bestUnit = unit;
      bestTime = Math.round(seconds / unitSeconds);
      bestInterval = Math.min(unitSeconds / 2, 60 * 60 * 24);
      break;
    }
  };
  if (!bestUnit) {
    bestUnit = 'second';
    bestTime = parseInt(seconds / 10) * 10;
    bestInterval = 10;
  }
  return [bestTime, bestUnit, bestInterval];
}
</code></pre>
<p>This function starts by calculating the number of seconds between the <code>date</code> argument and current time. For dates that are in the past, the result of this calculation is going to be negative, so for that reason the <code>absSeconds</code> constant stores the positive number of seconds.</p>
<p>A for-loop then iterates over the elements of <code>secondsTable</code>, to find the first unit (from largest to smallest) that is smaller than <code>absSeconds</code>, as this is the best relative unit to use. If a unit is found, then the function stores three related values to it:</p>
<ul>
<li><code>bestUnit</code> is the unit that was determined to be the best to use.</li>
<li><code>bestTime</code> is the amount of time, in the selected units, rounded to the nearest integer.</li>
<li><code>bestInterval</code> is the interval at which the relative time needs to be updated. Since all amounts are rounded, there is no reason to update more often than at half of the selected time unit. Because the <code>setInterval()</code> function does not work well with very large numbers, the longest interval that is used is 24 hours.</li>
</ul>
<p>If none of the units in <code>secondsTable</code> is selected, it means that the time that needs to be rendered is less than a minute old. In this case the units are set to <code>'second'</code>, but to avoid refreshing the time every second an interval of 10 seconds is used instead.</p>
<p>The return value of the function is an array with the amount of time, the unit, and the interval selected.</p>
<p>The implementation of the <code>TimeAgo</code> component is shown next.</p>
<p class="code_title"><em>src/components/TimeAgo.js</em>: TimeAgo component</p>

<pre><code class="language-jsx">export default function TimeAgo({ isoDate }) {
  const date = new Date(Date.parse(isoDate));
  const [time, unit, interval] = getTimeAgo(date);
  const [, setUpdate] = useState(0);

  useEffect(() =&gt; {
    const timerId = setInterval(
      () =&gt; setUpdate(update =&gt; update + 1),
      interval * 1000
    );
    return () =&gt; clearInterval(timerId);
  }, [interval]);

  return (
    &lt;span title={date.toString()}&gt;{rtf.format(time, unit)}&lt;/span&gt;
  );
}
</code></pre>
<p>Thanks to moving some logic to the <code>getTimeAgo()</code> helper function, this component is quite short, but there are several important React tricks hidden in this component that are worth discussing in detail.</p>
<p>The component first creates a <code>Date</code> object, by parsing the <code>isoDate</code> prop, which is the string representation of the post's date in ISO 8601 format. The <code>getTimeAgo()</code> function is called with this date to obtain the time, the units and the interval to use when rendering.</p>
<p>Let's ignore the state variable and the side effect function for a moment and look at the rendered JSX first. The component renders the timestamp as a <code>&lt;span&gt;</code> element. The text of the element is generated with the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/RelativeTimeFormat/format">rtf.format()</a> function, provided by the browser. This function takes the time and the units, and generates locale friendly text for that amount time. For example, when <code>time = -1</code> and <code>unit = 'day'</code>, this function might return the word <code>'yesterday'</code> for a browser configured for English.</p>
<p>The <code>&lt;span&gt;</code> element also has a <code>title</code> attribute, which renders the date with its default string representation. Browsers create a tooltip with the content of this attribute, which can be viewed by hovering the mouse over the text of the element.</p>
<p>You now know how the relative times can be rendered, but in addition to rendering them it would be nice if they automatically updated as time passes. The state variable and side effect function take care of this.</p>
<p>The usage of <code>useState()</code> in this component is different from the previous one, because only the setter function is stored. This usage solves a very specific need that this component has, which is to force itself to re-render even though none of the inputs ever change. React only re-renders components when their props or state variables change, so the only way to force a re-render is to create a dummy state variable that is not used anywhere, but is changed when a re-render is needed.</p>
<p>The <code>useEffect()</code> hook is used to create a side effect function, as before. The function creates an interval timer that runs at the interval returned in the third array element of the <code>getTimeAgo()</code> helper function.</p>
<p>The interval function calls the <code>setUpdate()</code> setter function of the state variable. Previously you've seen that state variable setter functions take the new value of the variable as an argument. An alternative form for the setter that is useful when the current value of the state variable is unknown or out of scope, is to pass a function. With this usage, React calls the function, passing the current value of the variable as an argument, and the function must return the updated value. Since this state variable is only needed to cause an update, any value that is different from the current one works. In this component the value of the state variable is incremented by one every time an update needs to be triggered.</p>
<p>This side effect function returns a function as a result, as opposite to the one in the <code>Posts</code> component, which does not return anything. Sometimes, side effect functions allocate resources, such as the interval timer here, and these resources need to be released when the component is removed from the page, to avoid resource leaks. When a side effect function returns a function, React calls this function to allow the component to perform any necessary clean up tasks. For this component, the side effect clean up function cancels the interval timer.</p>
<p>The second argument to <code>useEffect()</code> is also different in this side effect. You've seen that a side effect function that has an empty dependency array runs only during the first render of the component. Using the "10 minutes ago" example discussed above, this initial run of the side effect function would set up an interval timer than runs every 30 seconds. The interval timer is useful to keep the timestamp updated, but eventually one of these re-renders will change the units from minutes to hours, and at that point having an interval timer every 30 seconds makes no sense anymore, as it would be better to reduce the frequency to every 30 minutes. By adding <code>interval</code> to the dependency array of the side effect, the component is asking React to run the side effect function not only during the first render, but also during any renders in which the value of <code>interval</code> changes from its previous value.</p>
<p>Side effect dependencies are hard to think about. To help you understand the sequence of events in the life of this component, here is an example description of renders and side effect runs:</p>
<ul>
<li>Let's assume the initial render happens 10 minutes and 20 seconds after the time passed to <code>isoDate</code>. The component rounds this down and renders "10 minutes ago". Since this is the first render, the side effect function runs and starts an interval timer that forces a re-render every 30 seconds.</li>
<li>30 seconds later, the value of <code>isoDate</code> is now 10 minutes and 50 seconds ago. The component re-renders as "11 minutes ago". The interval is still 30 seconds, so the side effect does not run this time.</li>
<li>Another 30 seconds pass, and <code>isoDate</code> is now 11 minutes and 20 seconds ago. The component renders "11 minutes ago" again and the side effect function does not run.</li>
<li>The interval timer continues to run every 30 seconds, updating the rendered text as necessary, and without running the side effect function.</li>
<li>After approximately 50 minutes of refreshes every 30 seconds, the component's re-render will render itself as "1 hour ago". The value of the <code>interval</code> variable in this run of the component's render function is going to be 1800, which is equivalent to 30 minutes. In all previous renders, <code>interval</code> was 30, so this time the value has changed. Since this value is a dependency of the side effect function, React calls the cleanup function set during the initial render, which destroys the 30-second timer, and then launches the side effect function a second time. The side effect function now starts a new 30-minute interval timer.</li>
<li>From now on the component re-renders every 30 minutes. If the application is left running long enough, eventually the interval will change to half a day, at which point the side effect function will run again to start an updated interval timer.</li>
</ul>
<p><a href="#fig5-5">Figure 5.5</a> shows how blog posts look after all the improvements.</p>
<div id="fig5-5"></div>
<p><center><img alt="Figure 5.5: Blog posts rendered with improved styling" src="../../../static/images/react-mega-tutorial/05-styledposts.png" /></center></p>
<h2>Chapter Summary</h2>
<ul>
<li>Use environment variables that start with the <code>REACT_APP_</code> prefix in a <em>.env</em> file to provide configuration values such as the base URL of the back end.</li>
<li>Render functions need to run and return quickly to prevent the application from becoming unresponsive.</li>
<li>Use state variables to store data that needs to be retrieved asynchronously, or that can change throughout the life of the component.</li>
<li>Use side effect functions to perform network or other asynchronous operations that update state variables. React will automatically re-render a component when any of its state variables change.</li>
<li>For state variables associated with data loaded from the network, it is often useful to define specific values that indicate that the data is being retrieved, and also that the data retrieval has failed.</li>
<li>A dummy write-only state variable can be used to force a component to re-render when none of its inputs have changed.</li>
<li>A side effect function can return a cleanup function that React calls as needed to prevent memory and resource leaks.</li>
</ul></div>

<div class="card patreon-bar">
  <div class="card-body">
    <h5>Become a Patron!</h5>
    <p class="card-text">Hello, and thank you for visiting my blog! If you enjoyed this article, please consider supporting my work on this blog on <a href="https://patreon.com/miguelgrinberg">Patreon</a>!</p>
    <a href="https://patreon.com/miguelgrinberg" alt="Become a Patron!" title="Become a Patron!"><img src="../../../static/patreon-button.png"></a>
  </div>
</div>


<div class="card social-bar">
  <div class="card-body">
    <h5>Share this post:</h5>
      <!-- Sharingbutton Hacker News -->
      <a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=https%3A//blog.miguelgrinberg.com/post/the-react-mega-tutorial-chapter-5-connecting-to-a-back-end&amp;t=The%20React%20Mega-Tutorial%2C%20Chapter%205%3A%20Connecting%20to%20a%20Back%20End" target="_blank" rel="noopener" aria-label="Hacker News">
        <div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 140"><path fill-rule="evenodd" d="M60.94 82.314L17 0h20.08l25.85 52.093c.397.927.86 1.888 1.39 2.883.53.994.995 2.02 1.393 3.08.265.4.463.764.596 1.095.13.334.262.63.395.898.662 1.325 1.26 2.618 1.79 3.877.53 1.26.993 2.42 1.39 3.48 1.06-2.254 2.22-4.673 3.48-7.258 1.26-2.585 2.552-5.27 3.877-8.052L103.49 0h18.69L77.84 83.308v53.087h-16.9v-54.08z"></path></svg></div>Hacker News</div>
      </a>

      <!-- Sharingbutton Reddit -->
      <a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3A//blog.miguelgrinberg.com/post/the-react-mega-tutorial-chapter-5-connecting-to-a-back-end&amp;resubmit=true&amp;title=The%20React%20Mega-Tutorial,%20Chapter%205:%20Connecting%20to%20a%20Back%20End" target="_blank" rel="noopener" aria-label="Reddit">
        <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96 0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65 0 3-1.35 3-3s-1.35-3-3-3c-1.38 0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65 0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66 0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64 0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4 0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6 0 .23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1 0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></div>Reddit</div>
      </a>

      <!-- Sharingbutton Twitter -->
      <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=The%20React%20Mega-Tutorial%2C%20Chapter%205%3A%20Connecting%20to%20a%20Back%20End&amp;url=https%3A//blog.miguelgrinberg.com/post/the-react-mega-tutorial-chapter-5-connecting-to-a-back-end" target="_blank" rel="noopener" aria-label="Twitter">
        <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div>Twitter</div>
      </a>

      <!-- Sharingbutton LinkedIn -->
      <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A//blog.miguelgrinberg.com/post/the-react-mega-tutorial-chapter-5-connecting-to-a-back-end&amp;title=The%20React%20Mega-Tutorial%2C%20Chapter%205%3A%20Connecting%20to%20a%20Back%20End&amp;summary=The%20React%20Mega-Tutorial%2C%20Chapter%205%3A%20Connecting%20to%20a%20Back%20End&amp;source=https%3A//blog.miguelgrinberg.com/post/the-react-mega-tutorial-chapter-5-connecting-to-a-back-end" target="_blank" rel="noopener" aria-label="LinkedIn">
        <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg></div>LinkedIn</div>
      </a>

      <!-- Sharingbutton Facebook -->
      <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3A//blog.miguelgrinberg.com/post/the-react-mega-tutorial-chapter-5-connecting-to-a-back-end" target="_blank" rel="noopener" aria-label="Facebook">
        <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div>Facebook</div>
      </a>

      <!-- Sharingbutton E-Mail -->
      <a class="resp-sharing-button__link" href="mailto:?subject=The%20React%20Mega-Tutorial%2C%20Chapter%205%3A%20Connecting%20to%20a%20Back%20End&amp;body=https%3A//blog.miguelgrinberg.com/post/the-react-mega-tutorial-chapter-5-connecting-to-a-back-end" target="_self" rel="noopener" aria-label="E-Mail">
        <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></div>E-Mail</div>
      </a>

  </div>
</div>

<div id="comments" class="post-comment-count">
  
  <a class="btn btn-outline-secondary" href="../../the-react-mega-tutorial-chapter-5-connecting-to-a-back-end.html#comments">40 comments</a>
  
</div>


<div class="comments">
  <ul>
    
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/845ec0aba0dc151cd86641c5ca7397f0?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#1</span> <span class="badge text-bg-warning">Zack</span> said
    
    <span class="flask-moment" data-timestamp="2022-08-09T22:27:17Z" data-function="fromNow" data-refresh="0" style="display: none">2022-08-09T22:27:17Z</span>
  </p>
  <div>
    <p>I followed the instructions precisely (I think) but when I attempted to run the "docker-compose up" it errors out with "microblog-api-microblog-api-1  | exec ./<a href="http://boot.sh/" rel="nofollow">boot.sh</a>: no such file or directory" on repeat.</p>
<p>any suggestions?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#2</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2022-08-10T09:51:33Z" data-function="fromNow" data-refresh="0" style="display: none">2022-08-10T09:51:33Z</span>
  </p>
  <div>
    <p>@Zack: Do you have the <a href="http://boot.sh/" rel="nofollow">boot.sh</a> file in your Microblog-API directory? Is it being copied to the Docker image in the Dockerfile? This should all happen, unless you have made modifications to the project after cloning it from GitHub.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/845ec0aba0dc151cd86641c5ca7397f0?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#3</span> <span class="badge text-bg-warning">Zack</span> said
    
    <span class="flask-moment" data-timestamp="2022-08-10T14:03:38Z" data-function="fromNow" data-refresh="0" style="display: none">2022-08-10T14:03:38Z</span>
  </p>
  <div>
    <p>@Miguel Yes, it's all there, and according to the build log in the terminal it's copying. I tried cloning the repo to a different directory and tried again and encountered the same error. I've used Docker a decent amount and haven't ever had anything like this happen. I tried rebuilding other projects of mine to see if it was an error with Docker and those worked just fine. I assume this is an issue with my computer otherwise you would have run into it before, so I'll keep looking.</p>
<p>here is the build log if that's helpful:</p>
<pre><code>$ docker-compose build --no-cache
[+] Building 12.4s (12/12) FINISHED
 =&gt; [internal] load build definition from Dockerfile                                                                                                                                                                                                         0.0s
 =&gt; =&gt; transferring dockerfile: 297B                                                                                                                                                                                                                         0.0s 
 =&gt; [internal] load .dockerignore                                                                                                                                                                                                                            0.0s 
 =&gt; =&gt; transferring context: 2B                                                                                                                                                                                                                              0.0s 
 =&gt; [internal] load metadata for <a href="http://docker.io/library/python:3.10-slim" rel="nofollow">docker.io/library/python:3.10-slim</a>                                                                                                                                                                                          0.9s 
 =&gt; [auth] library/python:pull token for <a href="http://registry-1.docker.io/" rel="nofollow">registry-1.docker.io</a>                                                                                                                                                                                                0.0s
 =&gt; [internal] load build context                                                                                                                                                                                                                            0.0s
 =&gt; =&gt; transferring context: 58.01kB                                                                                                                                                                                                                         0.0s 
 =&gt; CACHED [1/6] FROM <a href="http://docker.io/library/python:3.10-slim@sha256:2124d4f8ccbd537500de16660a876263949ed9a9627cfb6141f418d36f008e9e" rel="nofollow">docker.io/library/python:3.10-slim@sha256:2124d4f8ccbd537500de16660a876263949ed9a9627cfb6141f418d36f008e9e</a>                                                                                                                             0.0s 
 =&gt; [2/6] COPY requirements.txt ./                                                                                                                                                                                                                           0.0s 
 =&gt; [3/6] RUN pip install -r requirements.txt                                                                                                                                                                                                               10.7s 
 =&gt; [4/6] COPY api api                                                                                                                                                                                                                                       0.0s
 =&gt; [5/6] COPY migrations migrations                                                                                                                                                                                                                         0.0s
 =&gt; [6/6] COPY <a href="http://microblog.py/" rel="nofollow">microblog.py</a> <a href="http://config.py/" rel="nofollow">config.py</a> <a href="http://boot.sh/" rel="nofollow">boot.sh</a> ./                                                                                                                                                                                                             0.1s
 =&gt; exporting to image                                                                                                                                                                                                                                       0.5s
 =&gt; =&gt; exporting layers                                                                                                                                                                                                                                      0.4s
 =&gt; =&gt; writing image sha...(cut by me)                                                                                                                                                                 0.0s
 =&gt; =&gt; naming to <a href="http://docker.io/library/microblog-api" rel="nofollow">docker.io/library/microblog-api</a>   
</code></pre>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/845ec0aba0dc151cd86641c5ca7397f0?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#4</span> <span class="badge text-bg-warning">Zack</span> said
    
    <span class="flask-moment" data-timestamp="2022-08-10T14:16:23Z" data-function="fromNow" data-refresh="0" style="display: none">2022-08-10T14:16:23Z</span>
  </p>
  <div>
    <p>Update. I edited the Dockerfile and removed the CMD with ENTRYPOINT ["tail", "-f", "/dev/null"] just to keep it running.<br>
I then entered the container with docker exec -it microblog-api-microblog-api-1 bash<br>
inside of the container I did this:</p>
<p>root@e2d669a41809:/# ls<br>
api  boot     <a href="http://config.py/" rel="nofollow">config.py</a>  dev  home  lib64  <a href="http://microblog.py/" rel="nofollow">microblog.py</a>  mnt  proc              root  sbin  sys  usr<br>
bin  <a href="http://boot.sh/" rel="nofollow">boot.sh</a>  data       etc  lib   media  migrations    opt  requirements.txt  run   srv   tmp  var<br>
root@3b2e2774f906:/# ./<a href="http://boot.sh/" rel="nofollow">boot.sh</a><br>
bash: ./<a href="http://boot.sh/" rel="nofollow">boot.sh</a>: /bin/sh^M: bad interpreter: No such file or directory<br>
root@3b2e2774f906:/# <a href="http://boot.sh/" rel="nofollow">boot.sh</a><br>
bash: <a href="http://boot.sh/" rel="nofollow">boot.sh</a>: command not found</p>
<p>I'm not an expert with linux so maybe there's something obvious there that I'm missing. However it looks like it's copying over but just not seeing it for some reason?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/845ec0aba0dc151cd86641c5ca7397f0?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#5</span> <span class="badge text-bg-warning">Zack</span> said
    
    <span class="flask-moment" data-timestamp="2022-08-10T14:44:51Z" data-function="fromNow" data-refresh="0" style="display: none">2022-08-10T14:44:51Z</span>
  </p>
  <div>
    <p>Figured out the issue. It's because I'm running on a windows machine. and the windows line endings were getting in the way on the <a href="http://boot.sh/" rel="nofollow">boot.sh</a> file. To fix this one needs to add "--config core.autocrlf=input" to the end of their git clone cmd to convert the clone to Unix line endings.  The full command would be "git clone <a href="https://github.com/miguelgrinberg/microblog-api" rel="nofollow">https://github.com/miguelgrinberg/microblog-api</a> --config core.autocrlf=input" </p>
<p>Since no one has encountered this before I guess I'm the only weirdo who develops on a windows machine.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#6</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2022-08-10T15:56:01Z" data-function="fromNow" data-refresh="0" style="display: none">2022-08-10T15:56:01Z</span>
  </p>
  <div>
    <p>@Zack: Nice debugging work, this is actually super useful. I'm guessing you are doing this from a Microsoft Windows computer? The <a href="http://boot.sh/" rel="nofollow">boot.sh</a> file has Windows-style CRLF line endings (note the <code>^M</code> in the error message). It should have UNIX-style LF line endings to work properly inside the container.</p>
<p>The command to disable line ending conversion in git is: <code>git config --global core.autocrlf false</code>. If you run this, then clone the repository again, you should have the UNIX line-endings for all files. I need to see if there is a way to configure this option in the repository, so that it overrides your local settings. If that is possible, I'll add it to the repo so that a local configuration fix isn't necessary.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/845ec0aba0dc151cd86641c5ca7397f0?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#7</span> <span class="badge text-bg-warning">Zack</span> said
    
    <span class="flask-moment" data-timestamp="2022-08-10T17:50:46Z" data-function="fromNow" data-refresh="0" style="display: none">2022-08-10T17:50:46Z</span>
  </p>
  <div>
    <p>Happy to help!</p>
<p>I have to say this feels pretty awesome. I've followed your guides for a while, your Flask Mega-tutorial basically got me into web-dev. When anyone asks me for help with Flask I point them toward you. Contributing in a small way while following this to round out my Full-stack knowledge is very gratifying.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/435dfa69c3227ac8c886b43da711cbba?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#8</span> <span class="badge text-bg-warning">Bayer</span> said
    
    <span class="flask-moment" data-timestamp="2022-09-12T07:49:36Z" data-function="fromNow" data-refresh="0" style="display: none">2022-09-12T07:49:36Z</span>
  </p>
  <div>
    <p>Hello! </p>
<p>I was getting the following error when running <code>docker-compose up -d</code></p>
<p>ERROR: The Compose file './docker-compose.yml' is invalid because:<br>
services.microblog-api.volumes contains an invalid type, it should be a string</p>
<p>Found a fix in this thread:  <a href="https://stackoverflow.com/questions/43628804/invalid-type-in-docker-compose-volume" rel="nofollow">https://stackoverflow.com/questions/43628804/invalid-type-in-docker-compose-volume</a> </p>
<p>Apparently "Version 3.2 is required for the extended notation:" </p>
<p>Hope this can help anyone else that runs into this error.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/42381e80298b8e724d0bbbd595ec5a8f?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#9</span> <span class="badge text-bg-warning">Luke</span> said
    
    <span class="flask-moment" data-timestamp="2022-10-14T17:55:49Z" data-function="fromNow" data-refresh="0" style="display: none">2022-10-14T17:55:49Z</span>
  </p>
  <div>
    <p>Hello,</p>
<p>Great tutorial except places where you put "// &lt;-- no changes to blog post JSX" - This makes it really hard to find what I missed.  I've spent more time trying to figure out how my Posts.js should look in this chapter than I have reading the whole book.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#10</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2022-10-14T22:19:36Z" data-function="fromNow" data-refresh="0" style="display: none">2022-10-14T22:19:36Z</span>
  </p>
  <div>
    <p>@Luke: I don't understand why this is a problem, can you provide more details? The parts that are suppressed in these listings are the parts that have not changed. If you want to see a detail of the exact changes, then I provide the GitHub diff reports for all chapters (details in the book's Preface).</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/4d3d01a5c7e709a0a3ee9f50f0cc99b4?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#11</span> <span class="badge text-bg-warning">Ben</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-14T02:55:48Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-14T02:55:48Z</span>
  </p>
  <div>
    <p>Thanks for putting this together, it's very helpful. </p>
<p>I haven't yet been able to get the fetch to work due to a CORS error. I believe I followed each step in the tutorial and I set up the flask server by running <code>flask run</code>. I can view the documentation site for the flask server. I think I've found a way around this but haven't tested it yet and just putting feedback here in case you wanted to improve the tutorial.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#12</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-14T11:36:07Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-14T11:36:07Z</span>
  </p>
  <div>
    <p>@Ben: You need to show me the output of your server, and the error(s) that you get in the client. Saying that you get a "CORS error" is too vague, as there are many types of errors related to CORS.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/c4a43aa58028e9b10968e6b44aadbb73?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#13</span> <span class="badge text-bg-warning">Peter</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-15T05:08:22Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-15T05:08:22Z</span>
  </p>
  <div>
    <p>I'm having the same or similar problem to @Ben.<br>
Here is what is being returned at the browser console:</p>
<p>Access to fetch at 'http://localhost:5000/api/feed' from origin 'http://127.0.0.1:3000' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.<br>
Posts.js:11          GET http://localhost:5000/api/feed net::ERR_FAILED 403<br>
(anonymous) @ Posts.js:11<br>
(anonymous) @ Posts.js:19<br>
commitHookEffectListMount @ react-dom.development.js:23150<br>
commitPassiveMountOnFiber @ react-dom.development.js:24926<br>
commitPassiveMountEffects_complete @ react-dom.development.js:24891<br>
commitPassiveMountEffects_begin @ react-dom.development.js:24878<br>
commitPassiveMountEffects @ react-dom.development.js:24866<br>
flushPassiveEffectsImpl @ react-dom.development.js:27039<br>
flushPassiveEffects @ react-dom.development.js:26984<br>
(anonymous) @ react-dom.development.js:26769<br>
workLoop @ scheduler.development.js:266<br>
flushWork @ scheduler.development.js:239<br>
performWorkUntilDeadline @ scheduler.development.js:533<br>
Posts.js:11                  Uncaught (in promise) TypeError: Failed to fetch<br>
    at Posts.js:11:1<br>
    at Posts.js:19:1<br>
    at commitHookEffectListMount (react-dom.development.js:23150:1)<br>
    at commitPassiveMountOnFiber (react-dom.development.js:24926:1)<br>
    at commitPassiveMountEffects_complete (react-dom.development.js:24891:1)<br>
    at commitPassiveMountEffects_begin (react-dom.development.js:24878:1)<br>
    at commitPassiveMountEffects (react-dom.development.js:24866:1)<br>
    at flushPassiveEffectsImpl (react-dom.development.js:27039:1)<br>
    at flushPassiveEffects (react-dom.development.js:26984:1)<br>
    at react-dom.development.js:26769:1</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/7d7301880c10dbeeedca81584471d6bc?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#14</span> <span class="badge text-bg-warning">Ben</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-15T08:54:00Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-15T08:54:00Z</span>
  </p>
  <div>
    <p>Thanks Miguel, I’ll paste any errors here in the future. I left my computer and restarted the python and js processes when I returned and the error disappeared. I can’t reproduce it anymore.</p>
<p>Appreciate the help and prompt reply regardless.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#15</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-15T10:35:22Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-15T10:35:22Z</span>
  </p>
  <div>
    <p>@Peter: Your request is returning a 403 status code. This is strange, because the <code>/api/feed</code> endpoint does not include 403 as one of the possible responses. Are you running Microblog-API in its original form, or have you made modifications? Can you provide the server log as well, please?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/c4a43aa58028e9b10968e6b44aadbb73?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#16</span> <span class="badge text-bg-warning">Peter</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-16T00:59:59Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-16T00:59:59Z</span>
  </p>
  <div>
    <p>The Microblog-API is coming straight pout of the box  ie.git clone <a href="https://github.com/miguelgrinberg/microblog-api" rel="nofollow">https://github.com/miguelgrinberg/microblog-api</a>.</p>
<p>there is nothing in the log.<br>
doing a curl to the api generates "127.0.0.1 - - [16/Nov/2022 11:54:09] "GET /apispec.json HTTP/1.1" 200 -"</p>
<p>the browser console gives:<br>
Access to fetch at 'http://localhost:5000/api/feed' from origin 'http://localhost:3000' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.<br>
Posts.js:11          GET http://localhost:5000/api/feed net::ERR_FAILED 403<br>
(anonymous) @ Posts.js:11<br>
(anonymous) @ Posts.js:19<br>
commitHookEffectListMount @ react-dom.development.js:23150<br>
commitPassiveMountOnFiber @ react-dom.development.js:24926<br>
commitPassiveMountEffects_complete @ react-dom.development.js:24891<br>
commitPassiveMountEffects_begin @ react-dom.development.js:24878<br>
commitPassiveMountEffects @ react-dom.development.js:24866<br>
flushPassiveEffectsImpl @ react-dom.development.js:27039<br>
flushPassiveEffects @ react-dom.development.js:26984<br>
(anonymous) @ react-dom.development.js:26769<br>
workLoop @ scheduler.development.js:266<br>
flushWork @ scheduler.development.js:239<br>
performWorkUntilDeadline @ scheduler.development.js:533<br>
localhost/:1 Access to fetch at 'http://localhost:5000/api/feed' from origin 'http://localhost:3000' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.<br>
Posts.js:11          GET http://localhost:5000/api/feed net::ERR_FAILED 403<br>
(anonymous) @ Posts.js:11<br>
(anonymous) @ Posts.js:19<br>
commitHookEffectListMount @ react-dom.development.js:23150<br>
invokePassiveEffectMountInDEV @ react-dom.development.js:25154<br>
invokeEffectsInDev @ react-dom.development.js:27351<br>
commitDoubleInvokeEffectsInDEV @ react-dom.development.js:27330<br>
flushPassiveEffectsImpl @ react-dom.development.js:27056<br>
flushPassiveEffects @ react-dom.development.js:26984<br>
(anonymous) @ react-dom.development.js:26769<br>
workLoop @ scheduler.development.js:266<br>
flushWork @ scheduler.development.js:239<br>
performWorkUntilDeadline @ scheduler.development.js:533<br>
Posts.js:11                  Uncaught (in promise) TypeError: Failed to fetch<br>
    at Posts.js:11:1<br>
    at Posts.js:19:1<br>
    at commitHookEffectListMount (react-dom.development.js:23150:1)<br>
    at commitPassiveMountOnFiber (react-dom.development.js:24926:1)<br>
    at commitPassiveMountEffects_complete (react-dom.development.js:24891:1)<br>
    at commitPassiveMountEffects_begin (react-dom.development.js:24878:1)<br>
    at commitPassiveMountEffects (react-dom.development.js:24866:1)<br>
    at flushPassiveEffectsImpl (react-dom.development.js:27039:1)<br>
    at flushPassiveEffects (react-dom.development.js:26984:1)<br>
    at react-dom.development.js:26769:1<br>
(anonymous) @ Posts.js:11<br>
(anonymous) @ Posts.js:19<br>
commitHookEffectListMount @ react-dom.development.js:23150<br>
commitPassiveMountOnFiber @ react-dom.development.js:24926<br>
commitPassiveMountEffects_complete @ react-dom.development.js:24891<br>
commitPassiveMountEffects_begin @ react-dom.development.js:24878<br>
commitPassiveMountEffects @ react-dom.development.js:24866<br>
flushPassiveEffectsImpl @ react-dom.development.js:27039<br>
flushPassiveEffects @ react-dom.development.js:26984<br>
(anonymous) @ react-dom.development.js:26769<br>
workLoop @ scheduler.development.js:266<br>
flushWork @ scheduler.development.js:239<br>
performWorkUntilDeadline @ scheduler.development.js:533<br>
await in performWorkUntilDeadline (async)<br>
(anonymous) @ Posts.js:19<br>
commitHookEffectListMount @ react-dom.development.js:23150<br>
commitPassiveMountOnFiber @ react-dom.development.js:24926<br>
commitPassiveMountEffects_complete @ react-dom.development.js:24891<br>
commitPassiveMountEffects_begin @ react-dom.development.js:24878<br>
commitPassiveMountEffects @ react-dom.development.js:24866<br>
flushPassiveEffectsImpl @ react-dom.development.js:27039<br>
flushPassiveEffects @ react-dom.development.js:26984<br>
(anonymous) @ react-dom.development.js:26769<br>
workLoop @ scheduler.development.js:266<br>
flushWork @ scheduler.development.js:239<br>
performWorkUntilDeadline @ scheduler.development.js:533<br>
Posts.js:11                  Uncaught (in promise) TypeError: Failed to fetch<br>
    at Posts.js:11:1<br>
    at Posts.js:19:1<br>
    at commitHookEffectListMount (react-dom.development.js:23150:1)<br>
    at invokePassiveEffectMountInDEV (react-dom.development.js:25154:1)<br>
    at invokeEffectsInDev (react-dom.development.js:27351:1)<br>
    at commitDoubleInvokeEffectsInDEV (react-dom.development.js:27330:1)<br>
    at flushPassiveEffectsImpl (react-dom.development.js:27056:1)<br>
    at flushPassiveEffects (react-dom.development.js:26984:1)<br>
    at react-dom.development.js:26769:1<br>
    at workLoop (scheduler.development.js:266:1)</p>
<p>I will roll the project back to Chapter 4 and try it again.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#17</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-16T10:44:16Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-16T10:44:16Z</span>
  </p>
  <div>
    <p>@Peter: Okay, so let's look at this in detail, because what you are saying does not agree with what you are showing me in the logs. Specifically the "there is nothing in the log" part is not possible. The error message shows that the client sent a request to <code>/api/feed</code>, and that this request was responded with a 403 status code. If this does not appear in the server log, then that means that the request is not being handled by Microblog API, but instead by some other server that you may have running on your computer.</p>
<p>Are you doing this on macOS by any chance? Have you read the Troubleshooting section in the Microblog API readme file? <a href="https://github.com/miguelgrinberg/microblog-api#troubleshooting" rel="nofollow">https://github.com/miguelgrinberg/microblog-api#troubleshooting</a></p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/c4a43aa58028e9b10968e6b44aadbb73?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#18</span> <span class="badge text-bg-warning">Peter</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-16T23:27:40Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-16T23:27:40Z</span>
  </p>
  <div>
    <p>Curious!<br>
I changed localhost:5000  to 127.0.0.1:5000 in the .env file and everything works as expected.<br>
Yes, I am running MacOS (ventura) and port 500  works fine but I will change it to 4000 just in case.<br>
and previously, nothing was appearing in the logs( I was carefully watching them).</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/4d3d01a5c7e709a0a3ee9f50f0cc99b4?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#19</span> <span class="badge text-bg-warning">Ben</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-17T11:19:54Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-17T11:19:54Z</span>
  </p>
  <div>
    <p>I had the same experience as Peter. I had the issue re-occur when I re-cloned the project from a later lesson.</p>
<p>This is the error from the js console. From the python process, there are no logs other than what appears when you start the flask server.</p>
<p>Access to fetch at 'http://localhost:5000/api/me' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.<br>
MicroblogApiClient.js:34          GET http://localhost:5000/api/me net::ERR_FAILED</p>
<p>I then changed the variable value to http://127.0.0.1:5000, saved the file and ran npm start and I don't get this CORS error.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#20</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-17T11:24:22Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-17T11:24:22Z</span>
  </p>
  <div>
    <p>@Ben: Also on macOS? As I referenced above, port 5000 might be in use, so you should follow one of the options indicated in the readme file of the project. Switching to an IP address is a workaournd that may or may not continue working in the future, depending on what Apple decides to do with their Airplay service. Best to change to another port number and avoid any risks in the future.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/4d3d01a5c7e709a0a3ee9f50f0cc99b4?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#21</span> <span class="badge text-bg-warning">Ben</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-17T12:04:38Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-17T12:04:38Z</span>
  </p>
  <div>
    <p>Yes I am on Mac and your suggestion resolved the issue. I changed the port to 4000 for the flask app by running</p>
<p>flask run --port 4000</p>
<p>and added MICROBLOG_API_PORT=4000 to the .env file in the flask project. I then edited the .env file in the react project to be:</p>
<p>REACT_APP_BASE_API_URL=http://localhost:4000</p>
<p>Thanks Miguel. This course is amazing. I usually don't subscribe for online courses, but this will be the exception.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/5235532dc32807477202018839582e3a?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#22</span> <span class="badge text-bg-warning">Jeremy</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-18T18:18:36Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-18T18:18:36Z</span>
  </p>
  <div>
    <p>Hey Miguel, <br>
I love this tutorial! Its been fantastic, though I just hit my first snag. In playing with the first endpoint (/api/feed) I'm getting an unauthorized 401 error, so naturally no data is being returned to the app. I'm using the Flask version of the Microblog API on port 5000, and even in the docs, when clicking the "Send API Request" button, I get the same error. Any idea what could be preventing? Your tutorial mentioned a checkbox for Auth token, but I didn't see any place for that to enable/disable. </p>
<p>flask console --&gt; <br>
127.0.0.1 - - [18/Nov/2022 11:46:46] "GET /apispec.json HTTP/1.1" 200 -<br>
127.0.0.1 - - [18/Nov/2022 11:58:53] "GET /api/feed HTTP/1.1" 401 -<br>
127.0.0.1 - - [18/Nov/2022 11:58:53] "GET /api/feed HTTP/1.1" 401 -<br>
127.0.0.1 - - [18/Nov/2022 11:59:05] "GET /api/feed HTTP/1.1" 401 -<br>
127.0.0.1 - - [18/Nov/2022 11:59:05] "GET /api/feed HTTP/1.1" 401 -</p>
<p>app response in browser --&gt;<br>
{<br>
  "code": 401, <br>
  "description": "The server could not verify that you are authorized to access the URL requested. You either supplied the wrong credentials (e.g. a bad password), or your browser doesn't understand how to supply the credentials required.", <br>
  "message": "Unauthorized"<br>
}</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#23</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-18T18:45:06Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-18T18:45:06Z</span>
  </p>
  <div>
    <p>@Jeremy: the installation instructions for Microblog API in this chapter instruct you to disable authentication initially. Have you done that? Authentication is a complex topic that is covered later in the tutorial, for now you have to use the API with authentication disabled.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/5235532dc32807477202018839582e3a?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#24</span> <span class="badge text-bg-warning">Jeremy</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-18T22:13:09Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-18T22:13:09Z</span>
  </p>
  <div>
    <p>My apologies, I see that step above in the online text. I was reading thru the book which didnt have the step (yeah I prefer the book to refer back to later ;) ). I also have your Flask Web App book, too. Got it working!</p>
<p>Thanks again for the quick response and great tutorial!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#25</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2022-11-19T00:00:35Z" data-function="fromNow" data-refresh="0" style="display: none">2022-11-19T00:00:35Z</span>
  </p>
  <div>
    <p>@Jeremy: Glad you got this to work, but note that the book does have this. The text here and in the book is the same, save for minor fixes that I may have applied after you bought your copy.</p>
  </div>
</div>
    </li>
    
  </ul>
</div>

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item disabled"><a class="page-link" href="1.html#comments">&laquo;&laquo;</a></li>
    <li class="page-item disabled"><a class="page-link" href="0.html#comments">&laquo;</a></li>
    <li class="page-item"><a class="page-link" href="2.html#comments">&raquo;</a></li>
    <li class="page-item"><a class="page-link" href="0.html#comments">&raquo;&raquo;</a></li>
  </ul>
</nav>



<div id="comment-form">
  <h3>Leave a Comment</h3>

  
  
  

  
<form action="#comment-form" method="post">
  <input id="url" name="url" type="hidden" value="">
<input id="csrf_token" name="csrf_token" type="hidden" value="IjQyYjY5YzZlNTcyYjFkMTVlZGRkOWJjYjA3ZmFlYWFiNTg3YmU5ODki.ZxdmwQ.DuwIgtPzQpPGugLFNNdiA185hY8">
    
  <div class="mb-3">
    <label class="form-label" for="name">Name</label>
    <div class="input-group has-validation">
      <input class="form-control" id="name" name="name" required type="text" value="">
    </div>
  </div>

    
    
  <div class="mb-3">
    <label class="form-label" for="email">Email</label>
    <div class="input-group has-validation">
      <input class="form-control" id="email" name="email" required type="text" value="">
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="comment">Comment</label>
    <div class="input-group has-validation">
      <textarea class="form-control" id="comment" name="comment" required>
</textarea>
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="captcha">Captcha</label>
    <div class="input-group has-validation">
      
<script src='https://www.google.com/recaptcha/api.js' async defer></script>
<div class="g-recaptcha" data-sitekey="6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S"></div>

    </div>
  </div>

    
  <input class="btn btn-primary mb-3" id="submit" name="submit" type="submit" value="Submit">

      
</form>

</div>


</div>

      </div>
    </div>
    
    <div class="col-md-4">
      <div id="sidebar">
        
          
  



<div class="card">
  
  
  
  
  <div class="card-header">The React Mega-Tutorial</div>
  <a class="card-book-cover" href="https://amzn.to/3LK7Skg">
    <img src="../../../static/react-book-small.png">
  </a>
  <div class="card-body">
    <p class="card-text">If you would you like to support my <a href="../../introducing-the-react-mega-tutorial.html">React Mega-Tutorial series</a> on this blog and as a reward have access to the complete tutorial in book and/or video formats, you can now order it from my <a href="https://courses.miguelgrinberg.com/p/react-mega-tutorial">Courses</a> site or from <a href="https://amzn.to/3LK7Skg">Amazon</a>.</p>
  </div>
  <div class="card-body">
    <a class="card-link" href="https://amzn.to/3LK7Skg">Click here to get the Book!</a><br />
    <a class="card-link" href="https://courses.miguelgrinberg.com/p/react-mega-tutorial">Click here to get the Video Course!</a>
  </div>

  
</div>
        
        <div class="card">
  <div class="card-header">About Miguel</div>
  <div class="card-body">
    <img style="float: right; margin: 0px 8px 8px 0px; padding: 4px; border: 1px solid #ccc;" src="../../../static/miguel.jpg" />
    <p class="card-text">Welcome to my blog!</p>
    <p class="card-text">I'm a software engineer and technical writer, currently living in Drogheda, Ireland.</p>
    <p class="card-text">You can also find me on <a href="https://twitter.com/miguelgrinberg">Twitter</a>, <a href="https://mstdn.social/@miguelgrinberg">Mastodon</a>, <a href="https://github.com/miguelgrinberg">Github</a>, <a href="http://www.linkedin.com/in/miguelgrinberg">LinkedIn</a>, <a href="https://youtube.com/miguelgrinberg">YouTube</a>, <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a> and <a href="https://patreon.com/miguelgrinberg">Patreon</a>.</p>
    <p class="card-text">Thank you for visiting!</p>
  </div>
</div>
        
        <div class="card" id="categories">
  <div class="card-header">Categories</div>
  <div class="card-body">
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AI/feed"><img src="../../../static/rss-small.png" title="AI RSS Feed" label="AI RSS Feed" alt="AI RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AI" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AI" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AWS/feed"><img src="../../../static/rss-small.png" title="AWS RSS Feed" label="AWS RSS Feed" alt="AWS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AWS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AWS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Arduino/feed"><img src="../../../static/rss-small.png" title="Arduino RSS Feed" label="Arduino RSS Feed" alt="Arduino RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Arduino" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Arduino" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Authentication/feed"><img src="../../../static/rss-small.png" title="Authentication RSS Feed" label="Authentication RSS Feed" alt="Authentication RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Authentication" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Authentication" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Blog/feed"><img src="../../../static/rss-small.png" title="Blog RSS Feed" label="Blog RSS Feed" alt="Blog RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Blog" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Blog" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/C++/feed"><img src="../../../static/rss-small.png" title="C++ RSS Feed" label="C++ RSS Feed" alt="C++ RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/C++" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="C++" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/CSS/feed"><img src="../../../static/rss-small.png" title="CSS RSS Feed" label="CSS RSS Feed" alt="CSS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/CSS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="CSS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Cloud/feed"><img src="../../../static/rss-small.png" title="Cloud RSS Feed" label="Cloud RSS Feed" alt="Cloud RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Cloud" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Cloud" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Database/feed"><img src="../../../static/rss-small.png" title="Database RSS Feed" label="Database RSS Feed" alt="Database RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Database" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Database" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Docker/feed"><img src="../../../static/rss-small.png" title="Docker RSS Feed" label="Docker RSS Feed" alt="Docker RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Docker" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Docker" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Filmmaking/feed"><img src="../../../static/rss-small.png" title="Filmmaking RSS Feed" label="Filmmaking RSS Feed" alt="Filmmaking RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Filmmaking" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Filmmaking" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Flask/feed"><img src="../../../static/rss-small.png" title="Flask RSS Feed" label="Flask RSS Feed" alt="Flask RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" /> <small><em>126</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Games/feed"><img src="../../../static/rss-small.png" title="Games RSS Feed" label="Games RSS Feed" alt="Games RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Games" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Games" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Heroku/feed"><img src="../../../static/rss-small.png" title="Heroku RSS Feed" label="Heroku RSS Feed" alt="Heroku RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Heroku" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Heroku" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/IoT/feed"><img src="../../../static/rss-small.png" title="IoT RSS Feed" label="IoT RSS Feed" alt="IoT RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/IoT" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="IoT" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/JavaScript/feed"><img src="../../../static/rss-small.png" title="JavaScript RSS Feed" label="JavaScript RSS Feed" alt="JavaScript RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/JavaScript" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="JavaScript" /> <small><em>35</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/MicroPython/feed"><img src="../../../static/rss-small.png" title="MicroPython RSS Feed" label="MicroPython RSS Feed" alt="MicroPython RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/MicroPython" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="MicroPython" /> <small><em>9</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microdot/feed"><img src="../../../static/rss-small.png" title="Microdot RSS Feed" label="Microdot RSS Feed" alt="Microdot RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microdot" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microdot" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microservices/feed"><img src="../../../static/rss-small.png" title="Microservices RSS Feed" label="Microservices RSS Feed" alt="Microservices RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microservices" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microservices" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Movie Reviews/feed"><img src="../../../static/rss-small.png" title="Movie Reviews RSS Feed" label="Movie Reviews RSS Feed" alt="Movie Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Movie Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Movie Reviews" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/OpenStack/feed"><img src="../../../static/rss-small.png" title="OpenStack RSS Feed" label="OpenStack RSS Feed" alt="OpenStack RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/OpenStack" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="OpenStack" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Personal/feed"><img src="../../../static/rss-small.png" title="Personal RSS Feed" label="Personal RSS Feed" alt="Personal RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Personal" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Personal" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Photography/feed"><img src="../../../static/rss-small.png" title="Photography RSS Feed" label="Photography RSS Feed" alt="Photography RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Photography" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Photography" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Product Reviews/feed"><img src="../../../static/rss-small.png" title="Product Reviews RSS Feed" label="Product Reviews RSS Feed" alt="Product Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Product Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Product Reviews" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Programming/feed"><img src="../../../static/rss-small.png" title="Programming RSS Feed" label="Programming RSS Feed" alt="Programming RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" /> <small><em>187</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Project Management/feed"><img src="../../../static/rss-small.png" title="Project Management RSS Feed" label="Project Management RSS Feed" alt="Project Management RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Project Management" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Project Management" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Python/feed"><img src="../../../static/rss-small.png" title="Python RSS Feed" label="Python RSS Feed" alt="Python RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" /> <small><em>169</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/REST/feed"><img src="../../../static/rss-small.png" title="REST RSS Feed" label="REST RSS Feed" alt="REST RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/REST" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="REST" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Rackspace/feed"><img src="../../../static/rss-small.png" title="Rackspace RSS Feed" label="Rackspace RSS Feed" alt="Rackspace RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Rackspace" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Rackspace" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Raspberry Pi/feed"><img src="../../../static/rss-small.png" title="Raspberry Pi RSS Feed" label="Raspberry Pi RSS Feed" alt="Raspberry Pi RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Raspberry Pi" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Raspberry Pi" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/React/feed"><img src="../../../static/rss-small.png" title="React RSS Feed" label="React RSS Feed" alt="React RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/React" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="React" /> <small><em>18</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Robotics/feed"><img src="../../../static/rss-small.png" title="Robotics RSS Feed" label="Robotics RSS Feed" alt="Robotics RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Robotics" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Robotics" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Security/feed"><img src="../../../static/rss-small.png" title="Security RSS Feed" label="Security RSS Feed" alt="Security RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Security" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Security" /> <small><em>12</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Video/feed"><img src="../../../static/rss-small.png" title="Video RSS Feed" label="Video RSS Feed" alt="Video RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Video" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Video" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/WebSocket/feed"><img src="../../../static/rss-small.png" title="WebSocket RSS Feed" label="WebSocket RSS Feed" alt="WebSocket RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/WebSocket" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="WebSocket" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Webcast/feed"><img src="../../../static/rss-small.png" title="Webcast RSS Feed" label="Webcast RSS Feed" alt="Webcast RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Webcast" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Webcast" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Windows/feed"><img src="../../../static/rss-small.png" title="Windows RSS Feed" label="Windows RSS Feed" alt="Windows RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Windows" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Windows" /> <small><em>1</em></small>
      </form>
    </div>
    
  </div>
</div>
        
      </div>
    </div>
    
  </div>
  <div id="footer">
    
    <p>&copy; 2012-<script type="text/javascript">document.write(new Date().getFullYear());</script> by Miguel Grinberg. All rights reserved. <a href="mailto:webmaster _at_ miguelgrinberg _dot_ com">Questions?</a></p>
  </div>
</div>

  
    <script src="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../../static/prettify.js"></script>
  <script src="../../../../cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment-with-locales.min.js" integrity="sha512-42PE0rd+wZ2hNXftlM78BSehIGzezNeQuzihiBCvUEB3CVxHvsShF86wBWwQORNxNINlBPuq7rG4WWhNiTVHFg==" crossorigin="anonymous"></script>

<script>
moment.locale("en");
function flask_moment_render(elem) {{
    const timestamp = moment(elem.dataset.timestamp);
    const func = elem.dataset.function;
    const format = elem.dataset.format;
    const timestamp2 = elem.dataset.timestamp2;
    const no_suffix = elem.dataset.nosuffix;
    const units = elem.dataset.units;
    let args = [];
    if (format)
        args.push(format);
    if (timestamp2)
        args.push(moment(timestamp2));
    if (no_suffix)
        args.push(no_suffix);
    if (units)
        args.push(units);
    elem.textContent = timestamp[func].apply(timestamp, args);
    elem.classList.remove('flask-moment');
    elem.style.display = "";
}}
function flask_moment_render_all() {{
    const moments = document.querySelectorAll('.flask-moment');
    moments.forEach(function(moment) {{
        flask_moment_render(moment);
        const refresh = moment.dataset.refresh;
        if (refresh && refresh > 0) {{
            (function(elem, interval) {{
                setInterval(function() {{
                    flask_moment_render(elem);
                }}, interval);
            }})(moment, refresh);
        }}
    }})
}}
document.addEventListener("DOMContentLoaded", flask_moment_render_all);
</script>

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-20EHZP9GRZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-20EHZP9GRZ');
  </script>
  
  <script type="text/javascript">
    function setThemeUI() {
      document.getElementById('select-theme-auto').classList.remove('active');
      document.getElementById('select-theme-light').classList.remove('active');
      document.getElementById('select-theme-dark').classList.remove('active');
      const theme = getPreferredTheme();
      const actualTheme = document.documentElement.getAttribute('data-bs-theme', 'light');
      document.getElementById('select-theme-' + theme).classList.add('active');
      document.getElementById('current-theme').href.baseVal = `#icon-theme-${actualTheme}`;
    };

    function updateTheme(theme) {
      if (theme === 'auto') {
        localStorage.removeItem('theme')
      }
      else {
        localStorage.setItem('theme', theme)
      }
      setTheme(getPreferredTheme());
    }

    setThemeUI();

    const darkModePreference = window.matchMedia("(prefers-color-scheme: dark)");
    darkModePreference.addEventListener("change", e => {
      if (getPreferredTheme() === 'auto') {
        setTheme('auto');
      }
    });

    document.addEventListener("DOMContentLoaded", () => {
      // add prettyprint class to all <pre><code></code></pre> blocks
      let prettify = false;
      document.querySelectorAll('div.post-body pre code').forEach((code) => {
        code.parentNode.classList.add('prettyprint');
        prettify = true;
      });
      prettyPrint();
    });
  </script>

  </body>

<!-- Mirrored from blog.miguelgrinberg.com/post/the-react-mega-tutorial-chapter-5-connecting-to-a-back-end/page/1 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 08:49:41 GMT -->
</html>