<!doctype html>
<html lang="en">
  
<!-- Mirrored from blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination-2018/page/3 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 08:48:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
  <script type="text/javascript">
    function getPreferredTheme() {
      const storedTheme = localStorage.getItem('theme')
      if (storedTheme) {
        return storedTheme
      }
      return 'auto';
    }

    function setTheme(theme) {
      if (theme === 'auto') {
        theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
      }
      document.documentElement.setAttribute('data-bs-theme', theme);
    };

    setTheme(getPreferredTheme());
  </script>
  
    <title>
  
    The Flask Mega-Tutorial Part IX: Pagination (2018) - miguelgrinberg.com
  
</title>
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="description" content="miguelgrinberg.com">
  <meta name="copyright" content="Copyright (c) 2012-2024 Miguel Grinberg">
  <meta name="author" content="Miguel Grinberg">
  
  <meta name="keywords" content="Flask, Python, Programming, Database, Pagination">
  
  
  <link rel="canonical" href="../../the-flask-mega-tutorial-part-ix-pagination-2018.html">
  

  
    <link href="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&amp;display=swap" rel="stylesheet">

  <link href="../../../static/tomorrow.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/tomorrow-night.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/social.css" rel="stylesheet" type="text/css" />
  <link href="../../../static/style_20231230.css" rel="stylesheet" type="text/css" />

  <link rel="shortcut icon" href="https://blog.miguelgrinberg.com/static/favicon.ico">
  <link rel="alternate" type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed" title="miguelgrinberg.com RSS feed">

    <meta property="og:title" content="The Flask Mega-Tutorial Part IX: Pagination (2018)">
    <meta property="og:description" content="(Great news! There is a new version of this tutorial!)This is the ninth installment of the Flask Mega-Tutorial series, in which I&#39;m going to tell you how to paginate lists of database entries.For…">
    <meta property="og:image" content="https://blog.miguelgrinberg.com/static/cards/the-flask-mega-tutorial-part-ix-pagination-2018.jpg">
    <meta property="og:url" content="https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination-2018">
    <meta name="twitter:title" content="The Flask Mega-Tutorial Part IX: Pagination (2018)">
    <meta name="twitter:description" content="(Great news! There is a new version of this tutorial!)This is the ninth installment of the Flask Mega-Tutorial series, in which I&#39;m going to tell you how to paginate lists of database entries.For…">
    <meta name="twitter:image" content="https://blog.miguelgrinberg.com/static/cards/the-flask-mega-tutorial-part-ix-pagination-2018.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@miguelgrinberg">

  </head>
  <body>
    <svg style="display: none" version="2.0">
      <defs>
        <symbol id="icon-theme-auto" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-circle-half" viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 0 8 1zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16"/>
        </symbol>
        <symbol id="icon-theme-light" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-brightness-high-fill" viewBox="0 0 16 16">
          <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </symbol>
        <symbol id="icon-theme-dark" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-moon-stars-fill" viewBox="0 0 16 16">
          <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278"/>
          <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
        </symbol>
      </defs>
    </svg>
<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="https://blog.miguelgrinberg.com/index">miguelgrinberg.com</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" aria-current="page" href="https://blog.miguelgrinberg.com/index">Home</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../my-courses-and-books.html">My Courses and Books</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../hire-me.html">Consulting</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../about-me.html">About Me</a></li>
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <svg width="20" height="20" version="2.0"><use id="current-theme" href="#icon-theme-light"></svg>
          </a>
          <ul class="dropdown-menu">
            <li>
              <a id="select-theme-light" class="dropdown-item" href="javascript:updateTheme('light')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-light"></svg>&nbsp; Light Mode
              </a>
            </li>
            <li>
              <a id="select-theme-dark" class="dropdown-item" href="javascript:updateTheme('dark')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-dark"></svg>&nbsp; Dark Mode
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a id="select-theme-auto" class="dropdown-item" href="javascript:updateTheme('auto')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-auto"></svg>&nbsp; System Default
              </a>
            </li>
          </ul>
        </li>
        
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item social-icons">
          <a type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed"><img src="../../../static/social/rss.png" alt="RSS Feed" title="RSS Feed" /></a>
          <a href="https://twitter.com/miguelgrinberg"><img src="../../../static/social/twitter.png" alt="Twitter" title="Twitter" /></a>
          <a rel="me" href="https://mstdn.social/@miguelgrinberg"><img src="../../../static/social/mastodon.png" alt="Mastodon" title="Mastodon" /></a>
          <a href="http://github.com/miguelgrinberg"><img src="../../../static/social/github.png" alt="GitHub" title="GitHub" /></a>
          <a href="https://youtube.com/miguelgrinberg"><img src="../../../static/social/youtube.png" alt="YouTube" title="YouTube" /></a>
          <a href="http://www.linkedin.com/in/miguelgrinberg"><img src="../../../static/social/linkedin.png" alt="LinkedIn" title="LinkedIn" /></a>
          <a href="https://patreon.com/miguelgrinberg"><img src="../../../static/social/patreon.png" alt="Patreon" title="Patreon" /></a>
          <!--<a href="https://www.facebook.com/miguelgrinbergblog"><img src="/static/social/facebook.png" alt="Facebook" title="Facebook" /></a>-->
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
  <div class="row">
    <div class="col-md-8">
      <div id="main">
        
        
        
        
        

<div class="post">

<div class="post-header">
  <h1><a href="../../the-flask-mega-tutorial-part-ix-pagination-2018.html">The Flask Mega-Tutorial Part IX: Pagination (2018)</a></h1>
  <h2>
    Posted by
    <form action="https://blog.miguelgrinberg.com/author/Miguel Grinberg" method="POST">
      <input type="submit" class="btn btn-danger btn-sm" value="Miguel Grinberg" />
    </form>
    on
    <button class="btn btn-secondary btn-sm" disabled><span class="flask-moment" data-timestamp="2018-01-30T18:07:32Z" data-function="format" data-format="LL" data-refresh="0" style="display: none">2018-01-30T18:07:32Z</span></button>
    under
    
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Database" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Database" />
      </form>
    
    
  </h2>
</div>
<div class="post-body"><p><em>(Great news! There is a <a href="../../the-flask-mega-tutorial-part-i-hello-world.html">new version of this tutorial</a>!)</em></p>
<p>This is the ninth installment of the Flask Mega-Tutorial series, in which I'm going to tell you how to paginate lists of database entries.</p>
<p>For your reference, below is a list of the articles in this series.</p>
<ul>
<li><a href="../../the-flask-mega-tutorial-part-i-hello-world-2018.html">Chapter 1: Hello, World!</a></li>
<li><a href="../../the-flask-mega-tutorial-part-ii-templates-2018.html">Chapter 2: Templates</a></li>
<li><a href="../../the-flask-mega-tutorial-part-iii-web-forms-2018.html">Chapter 3: Web Forms</a></li>
<li><a href="../../the-flask-mega-tutorial-part-iv-database-2018.html">Chapter 4: Database</a></li>
<li><a href="../../the-flask-mega-tutorial-part-v-user-logins-2018.html">Chapter 5: User Logins</a></li>
<li><a href="../../the-flask-mega-tutorial-part-vi-profile-page-and-avatars-2018.html">Chapter 6: Profile Page and Avatars</a></li>
<li><a href="../../the-flask-mega-tutorial-part-vii-error-handling-2018.html">Chapter 7: Error Handling</a></li>
<li><a href="../../the-flask-mega-tutorial-part-viii-followers-2018.html">Chapter 8: Followers</a></li>
<li><a href="../../the-flask-mega-tutorial-part-ix-pagination-2018.html">Chapter 9: Pagination</a> (this article)</li>
<li><a href="../../the-flask-mega-tutorial-part-x-email-support-2018.html">Chapter 10: Email Support</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xi-facelift-2018.html">Chapter 11: Facelift</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xii-dates-and-times-2018.html">Chapter 12: Dates and Times</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018.html">Chapter 13: I18n and L10n</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xiv-ajax-2018.html">Chapter 14: Ajax</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xv-a-better-application-structure-2018.html">Chapter 15: A Better Application Structure</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xvi-full-text-search-2018.html">Chapter 16: Full-Text Search</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xvii-deployment-on-linux-2018.html">Chapter 17: Deployment on Linux</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xviii-deployment-on-heroku-2018.html">Chapter 18: Deployment on Heroku</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xix-deployment-on-docker-containers-2018.html">Chapter 19: Deployment on Docker Containers</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xx-some-javascript-magic-2018.html">Chapter 20: Some JavaScript Magic</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xxi-user-notifications-2018.html">Chapter 21: User Notifications</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xxii-background-jobs-2018.html">Chapter 22: Background Jobs</a></li>
<li><a href="../../the-flask-mega-tutorial-part-xxiii-application-programming-interfaces-apis-2018.html">Chapter 23: Application Programming Interfaces (APIs)</a></li>
</ul>
<p>In <a href="../../the-flask-mega-tutorial-part-viii-followers-2018.html">Chapter 8</a> I have made several database changes that were necessary to support the "follower" paradigm that is so popular with social networks. With that functionality in place, I'm ready to remove the last piece of scaffolding that I have put in place in the beginning, the fake posts. In this chapter the application will start accepting blog posts from users, and also deliver them in the home and profile pages as a paginated list.</p>
<p><em>The GitHub links for this chapter are: <a href="https://github.com/miguelgrinberg/microblog/tree/v0.9">Browse</a>, <a href="https://github.com/miguelgrinberg/microblog-2018/archive/v0.9.zip">Zip</a>, <a href="https://github.com/miguelgrinberg/microblog/compare/v0.8...v0.9">Diff</a>.</em></p>
<h2>Submission of Blog Posts</h2>
<p>Let's start with something simple. The home page needs to have a form in which users can type new posts. First I create a form class:</p>
<p class="code_title"><i>app/forms.py</i>: Blog submission form.</p>

<pre><code class="language-python">class PostForm(FlaskForm):
    post = TextAreaField('Say something', validators=[
        DataRequired(), Length(min=1, max=140)])
    submit = SubmitField('Submit')
</code></pre>
<p>Next, I can add this form to the template for the main page of the application:</p>
<p class="code_title"><i>app/templates/index.html</i>: Post submission form in index template</p>

<pre><code class="language-html">{% extends &quot;base.html&quot; %}

{% block content %}
    &lt;h1&gt;Hi, {{ current_user.username }}!&lt;/h1&gt;
    &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
        {{ form.hidden_tag() }}
        &lt;p&gt;
            {{ form.post.label }}&lt;br&gt;
            {{ form.post(cols=32, rows=4) }}&lt;br&gt;
            {% for error in form.post.errors %}
            &lt;span style=&quot;color: red;&quot;&gt;[{{ error }}]&lt;/span&gt;
            {% endfor %}
        &lt;/p&gt;
        &lt;p&gt;{{ form.submit() }}&lt;/p&gt;
    &lt;/form&gt;
    {% for post in posts %}
    &lt;p&gt;
    {{ post.author.username }} says: &lt;b&gt;{{ post.body }}&lt;/b&gt;
    &lt;/p&gt;
    {% endfor %}
{% endblock %}
</code></pre>
<p>The changes in this template are similar to how previous forms were handled. The final part is to add the form creation and handling in the view function:</p>
<p class="code_title"><i>app/routes.py</i>: Post submission form in index view function.</p>

<pre><code class="language-python">from app.forms import PostForm
from app.models import Post

@app.route('/', methods=['GET', 'POST'])
@app.route('/index', methods=['GET', 'POST'])
@login_required
def index():
    form = PostForm()
    if form.validate_on_submit():
        post = Post(body=form.post.data, author=current_user)
        db.session.add(post)
        db.session.commit()
        flash('Your post is now live!')
        return redirect(url_for('index'))
    posts = [
        {
            'author': {'username': 'John'},
            'body': 'Beautiful day in Portland!'
        },
        {
            'author': {'username': 'Susan'},
            'body': 'The Avengers movie was so cool!'
        }
    ]
    return render_template(&quot;index.html&quot;, title='Home Page', form=form,
                           posts=posts)
</code></pre>
<p>Let's review the changes in this view function one by one:</p>
<ul>
<li>I'm now importing the <code>Post</code> and <code>PostForm</code> classes</li>
<li>I accept <code>POST</code> requests in both routes associated with the <code>index</code> view function in addition to <code>GET</code> requests, since this view function will now receive form data.</li>
<li>The form processing logic inserts a new <code>Post</code> record into the database.</li>
<li>The template receives the <code>form</code> object as an additional argument, so that it can render the text field.</li>
</ul>
<p>Before I continue, I wanted to mention something important related to processing of web forms. Notice how after I process the form data, I end the request by issuing a redirect to the home page. I could have easily skipped the redirect and allowed the function to continue down into the template rendering part, since this is already the index view function.</p>
<p>So, why the redirect? It is a standard practice to respond to a <code>POST</code> request generated by a web form submission with a redirect. This helps mitigate an annoyance with how the refresh command is implemented in web browsers. All the web browser does when you hit the refresh key is to re-issue the last request. If a <code>POST</code> request with a form submission returns a regular response, then a refresh will re-submit the form. Because this is unexpected, the browser is going to ask the user to confirm the duplicate submission, but most users will not understand what the browser is asking them. But if a <code>POST</code> request is answered with a redirect, the browser is now instructed to send a <code>GET</code> request to grab the page indicated in the redirect, so now the last request is not a <code>POST</code> request anymore, and the refresh command works in a more predictable way.</p>
<p>This simple trick is called the <a href="https://en.wikipedia.org/wiki/Post/Redirect/Get">Post/Redirect/Get</a> pattern. It avoids inserting duplicate posts when a user inadvertently refreshes the page after submitting a web form.</p>
<h2>Displaying Blog Posts</h2>
<p>If you recall, I created a couple of fake blog posts that I've been displaying in the home page for a long time. These fake objects are created explicitly in the <code>index</code> view function as a simple Python list:</p>
<pre><code class="language-python">    posts = [
        { 
            'author': {'username': 'John'}, 
            'body': 'Beautiful day in Portland!' 
        },
        { 
            'author': {'username': 'Susan'}, 
            'body': 'The Avengers movie was so cool!' 
        }
    ]
</code></pre>
<p>But now I have the <code>followed_posts()</code> method in the <code>User</code> model that returns a query for the posts that a given user wants to see. So now I can replace the fake posts with real posts:</p>
<p class="code_title"><i>app/routes.py</i>: Display real posts in home page.</p>

<pre><code class="language-python">@app.route('/', methods=['GET', 'POST'])
@app.route('/index', methods=['GET', 'POST'])
@login_required
def index():
    # ...
    posts = current_user.followed_posts().all()
    return render_template(&quot;index.html&quot;, title='Home Page', form=form,
                           posts=posts)
</code></pre>
<p>The <code>followed_posts</code> method of the <code>User</code> class returns a SQLAlchemy query object that is configured to grab the posts the user is interested in from the database. Calling <code>all()</code> on this query triggers its execution, with the return value being a list with all the results. So I end up with a structure that is very much alike the one with fake posts that I have been using until now. It's so close that the template does not even need to change.</p>
<h2>Making It Easier to Find Users to Follow</h2>
<p>As I'm sure you noticed, the application as it is does not do a great job at letting users find other users to follow. In fact, there is actually no way to see what other users are there at all. I'm going to address that with a few simple changes.</p>
<p>I'm going to create a new page that I'm going to call the "Explore" page. This page will work like the home page, but instead of only showing posts from followed users, it will show a global post stream from all users. Here is the new explore view function:</p>
<p class="code_title"><i>app/routes.py</i>: Explore view function.</p>

<pre><code class="language-python">@app.route('/explore')
@login_required
def explore():
    posts = Post.query.order_by(Post.timestamp.desc()).all()
    return render_template('index.html', title='Explore', posts=posts)
</code></pre>
<p>Did you notice something odd in this view function? The <code>render_template()</code> call references the <em>index.html</em> template, which I'm using in the main page of the application. Since this page is going to be very similar to the main page, I decided to reuse the template. But one difference with the main page is that in the explore page I do not want to have a form to write blog posts, so in this view function I did not include the <code>form</code> argument in the template call.</p>
<p>To prevent the <em>index.html</em> template from crashing when it tries to render a web form that does not exist, I'm going to add a conditional that only renders the form if it is defined:</p>
<p class="code_title"><i>app/templates/index.html</i>: Make the blog post submission form optional.</p>

<pre><code class="language-html">{% extends &quot;base.html&quot; %}

{% block content %}
    &lt;h1&gt;Hi, {{ current_user.username }}!&lt;/h1&gt;
    {% if form %}
    &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
        ...
    &lt;/form&gt;
    {% endif %}
    ...
{% endblock %}
</code></pre>
<p>I'm also going to add a link to this new page in the navigation bar:</p>
<p class="code_title"><i>app/templates/base.html</i>: Link to explore page in navigation bar.</p>

<pre><code class="language-html">        &lt;a href=&quot;{{ url_for('explore') }}&quot;&gt;Explore&lt;/a&gt;
</code></pre>
<p>Remember the <em>_post.html</em> sub-template that I have introduced in <a href="../../the-flask-mega-tutorial-part-vi-profile-page-and-avatars-2018.html">Chapter 6</a> to render blog posts in the user profile page? This was a small template that was included from the user profile page template, and was separate so that it can also be used from other templates. I'm now going to make a small improvement to it, which is to show the username of the blog post author as a link:</p>
<p class="code_title"><i>app/templates/_post.html</i>: Show link to author in blog posts.</p>

<pre><code class="language-html">    &lt;table&gt;
        &lt;tr valign=&quot;top&quot;&gt;
            &lt;td&gt;&lt;img src=&quot;{{ post.author.avatar(36) }}&quot;&gt;&lt;/td&gt;
            &lt;td&gt;
                &lt;a href=&quot;{{ url_for('user', username=post.author.username) }}&quot;&gt;
                    {{ post.author.username }}
                &lt;/a&gt;
                says:&lt;br&gt;{{ post.body }}
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
</code></pre>
<p>I can now use this sub-template to render blog posts in the home and explore pages:</p>
<p class="code_title"><i>app/templates/index.html</i>: Use blog post sub-template.</p>

<pre><code class="language-python">    ...
    {% for post in posts %}
        {% include '_post.html' %}
    {% endfor %}
    ...
</code></pre>
<p>The sub-template expects a variable named <code>post</code> to exist, and that is how the loop variable in the index template is named, so that works perfectly.</p>
<p>With these small changes, the usability of the application has improved considerably. Now a user can visit the explore page to read blog posts from unknown users and based on those posts find new users to follow, which can be done by simply clicking on a username to access the profile page. Amazing, right?</p>
<p>At this point I suggest you try the application once again, so that you experience these last user interface improvements.</p>
<p><img alt="Blog Posts" src="../../../static/images/mega-tutorial/ch09-explore.png" /></p>
<h2>Pagination of Blog Posts</h2>
<p>The application is looking better than ever, but showing all of the followed posts in the home page is going to become a problem sooner rather than later. What happens if a user has a thousand followed posts? Or a million? As you can imagine, managing such a large list of posts will be extremely slow and inefficient.</p>
<p>To address that problem, I'm going to <em>paginate</em> the post list. This means that initially I'm going to show just a limited number of posts at a time, and include links to navigate through the entire list of posts. Flask-SQLAlchemy supports pagination natively with the <code>paginate()</code> query method. If for example, I want to get the first twenty followed posts of the user, I can replace the <code>all()</code> call that terminates the query with:</p>
<pre><code class="language-python">&gt;&gt;&gt; user.followed_posts().paginate(page=1, per_page=20, error_out=False).items
</code></pre>
<p>The <code>paginate</code> method can be called on any query object from Flask-SQLAlchemy. It takes three arguments:</p>
<ul>
<li>the page number, starting from 1</li>
<li>the number of items per page</li>
<li>an error flag. If <code>True</code>, when an out of range page is requested a 404 error will be automatically returned to the client. If <code>False</code>, an empty list will be returned for out of range pages.</li>
</ul>
<p>The return value from <code>paginate</code> is a <code>Pagination</code> object. The <code>items</code> attribute of this object contains the list of items in the requested page. There are other useful things in the <code>Pagination</code> object that I will discuss later.</p>
<p>Now let's think about how I can implement pagination in the <code>index()</code> view function. I can start by adding a configuration item to the application that determines how many items will be displayed per page.</p>
<p class="code_title"><i>config.py</i>: Posts per page configuration.</p>

<pre><code class="language-python">class Config(object):
    # ...
    POSTS_PER_PAGE = 3
</code></pre>
<p>It is a good idea to have these application-wide "knobs" that can change behaviors in the configuration file, because then I can go to a single place to make adjustments. In the final application I will of course use a larger number than three items per page, but for testing it is useful to work with small numbers.</p>
<p>Next, I need to decide how the page number is going to be incorporated into application URLs. A fairly common way is to use a <em>query string</em> argument to specify an optional page number, defaulting to page 1 if it is not given. Here are some example URLs that show how I'm going to implement this:</p>
<ul>
<li>Page 1, implicit: <em>http://localhost:5000/index</em></li>
<li>Page 1, explicit: <em>http://localhost:5000/index?page=1</em></li>
<li>Page 3: <em>http://localhost:5000/index?page=3</em></li>
</ul>
<p>To access arguments given in the query string, I can use the Flask's <code>request.args</code> object. You have seen this already in <a href="../../the-flask-mega-tutorial-part-v-user-logins-2018.html">Chapter 5</a>, where I implemented user login URLs from Flask-Login that can include a <code>next</code> query string argument.</p>
<p>Below you can see how I added pagination to the home and explore view functions:</p>
<p class="code_title"><i>app/routes.py</i>: Followers association table</p>

<pre><code class="language-python">@app.route('/', methods=['GET', 'POST'])
@app.route('/index', methods=['GET', 'POST'])
@login_required
def index():
    # ...
    page = request.args.get('page', 1, type=int)
    posts = current_user.followed_posts().paginate(
        page=page, per_page=app.config['POSTS_PER_PAGE'], error_out=False)
    return render_template('index.html', title='Home', form=form,
                           posts=posts.items)

@app.route('/explore')
@login_required
def explore():
    page = request.args.get('page', 1, type=int)
    posts = Post.query.order_by(Post.timestamp.desc()).paginate(
        page=page, per_page=app.config['POSTS_PER_PAGE'], error_out=False)
    return render_template(&quot;index.html&quot;, title='Explore', posts=posts.items)
</code></pre>
<p>With these changes, the two routes determine the page number to display, either from the <code>page</code> query string argument or a default of 1, and then use the <code>paginate()</code> method to retrieve only the desired page of results. The <code>POSTS_PER_PAGE</code> configuration item that determines the page size is accessed through the <code>app.config</code> object.</p>
<p>Note how easy these changes are, and how little code is affected each time a change is made. I am trying to write each part of the application without making any assumptions about how the other parts work, and this enables me to write modular and robust applications that are easier to extend and to test, and are less likely to fail or have bugs.</p>
<p>Go ahead and try the pagination support. First make sure you have more than three blog posts. This is easier to see in the explore page, which shows posts from all users. You are now going to see just the three most recent posts. If you want to see the next three, type <em>http://localhost:5000/explore?page=2</em> in your browser's address bar.</p>
<h2>Page Navigation</h2>
<p>The next change is to add links at the bottom of the blog post list that allow users to navigate to the next and/or previous pages. Remember that I mentioned that the return value from a <code>paginate()</code> call is an object of a <code>Pagination</code> class from Flask-SQLAlchemy? So far, I have used the <code>items</code> attribute of this object, which contains the list of items retrieved for the selected page. But this object has a few other attributes that are useful when building pagination links:</p>
<ul>
<li><code>has_next</code>: True if there is at least one more page after the current one</li>
<li><code>has_prev</code>: True if there is at least one more page before the current one</li>
<li><code>next_num</code>: page number for the next page</li>
<li><code>prev_num</code>: page number for the previous page</li>
</ul>
<p>With these four elements, I can generate next and previous page links and pass them down to the templates for rendering:</p>
<p class="code_title"><i>app/routes.py</i>: Next and previous page links.</p>

<pre><code class="language-python">@app.route('/', methods=['GET', 'POST'])
@app.route('/index', methods=['GET', 'POST'])
@login_required
def index():
    # ...
    page = request.args.get('page', 1, type=int)
    posts = current_user.followed_posts().paginate(
        page=page, per_page=app.config['POSTS_PER_PAGE'], error_out=False)
    next_url = url_for('index', page=posts.next_num) \
        if posts.has_next else None
    prev_url = url_for('index', page=posts.prev_num) \
        if posts.has_prev else None
    return render_template('index.html', title='Home', form=form,
                           posts=posts.items, next_url=next_url,
                           prev_url=prev_url)

 @app.route('/explore')
 @login_required
 def explore():
    page = request.args.get('page', 1, type=int)
    posts = Post.query.order_by(Post.timestamp.desc()).paginate(
        page=page, per_page=app.config['POSTS_PER_PAGE'], error_out=False)
    next_url = url_for('explore', page=posts.next_num) \
        if posts.has_next else None
    prev_url = url_for('explore', page=posts.prev_num) \
        if posts.has_prev else None
    return render_template(&quot;index.html&quot;, title='Explore', posts=posts.items,
                          next_url=next_url, prev_url=prev_url)
</code></pre>
<p>The <code>next_url</code> and <code>prev_url</code> in these two view functions are going to be set to a URL returned by <code>url_for()</code> only if there is a page in that direction. If the current page is at one of the ends of the collection of posts, then the <code>has_next</code> or <code>has_prev</code> attributes of the <code>Pagination</code> object will be <code>False</code>, and in that case the link in that direction will be set to <code>None</code>. </p>
<p>One interesting aspect of the <code>url_for()</code> function that I haven't discussed before is that you can add any keyword arguments to it, and if the names of those arguments are not referenced in the URL directly, then Flask will include them in the URL as query arguments. </p>
<p>The pagination links are being set to the <em>index.html</em> template, so now let's render them on the page, right below the post list:</p>
<p class="code_title"><i>app/templates/index.html</i>: Render pagination links on the template.</p>

<pre><code class="language-html">    ...
    {% for post in posts %}
        {% include '_post.html' %}
    {% endfor %}
    {% if prev_url %}
    &lt;a href=&quot;{{ prev_url }}&quot;&gt;Newer posts&lt;/a&gt;
    {% endif %}
    {% if next_url %}
    &lt;a href=&quot;{{ next_url }}&quot;&gt;Older posts&lt;/a&gt;
    {% endif %}
    ...
</code></pre>
<p>This change adds two links below the post list on both the index and explore pages. The first link is labeled "Newer posts", and it points to the previous page (keep in mind I'm showing posts sorted by newest first, so the first page is the one with the newest content). The second link is labeled "Older posts" and points to the next page of posts. If any of these two links is <code>None</code>, then it is omitted from the page, through a conditional.</p>
<p><img alt="Pagination" src="../../../static/images/mega-tutorial/ch09-pagination.png" /></p>
<h2>Pagination in the User Profile Page</h2>
<p>The changes for the index page are sufficient for now. However, there is also a list of posts in the user profile page, which shows only posts from the owner of the profile. To be consistent, the user profile page should be changed to match the pagination style of the index page.</p>
<p>I begin by updating the user profile view function, which still had a list of fake post objects in it.</p>
<p class="code_title"><i>app/routes.py</i>: Pagination in the user profile view function.</p>

<pre><code class="language-python">@app.route('/user/&lt;username&gt;')
@login_required
def user(username):
    user = User.query.filter_by(username=username).first_or_404()
    page = request.args.get('page', 1, type=int)
    posts = user.posts.order_by(Post.timestamp.desc()).paginate(
        page=page, per_page=app.config['POSTS_PER_PAGE'], error_out=False)
    next_url = url_for('user', username=user.username, page=posts.next_num) \
        if posts.has_next else None
    prev_url = url_for('user', username=user.username, page=posts.prev_num) \
        if posts.has_prev else None
    form = EmptyForm()
    return render_template('user.html', user=user, posts=posts.items,
                           next_url=next_url, prev_url=prev_url, form=form)
</code></pre>
<p>To get the list of posts from the user, I take advantage of the fact that the <code>user.posts</code> relationship is a query that is already set up by SQLAlchemy as a result of the <code>db.relationship()</code> definition in the <code>User</code> model. I take this query and add a <code>order_by()</code> clause so that I get the newest posts first, and then do the pagination exactly like I did for the posts in the index and explore pages. Note that the pagination links that are generated by the <code>url_for()</code> function need the extra <code>username</code> argument, because they are pointing back at the user profile page, which has this username as a dynamic component of the URL.</p>
<p>Finally, the changes to the <em>user.html</em> template are identical to those I made on the index page:</p>
<p class="code_title"><i>app/templates/user.html</i>: Pagination links in the user profile template.</p>

<pre><code class="language-html">    ...
    {% for post in posts %}
        {% include '_post.html' %}
    {% endfor %}
    {% if prev_url %}
    &lt;a href=&quot;{{ prev_url }}&quot;&gt;Newer posts&lt;/a&gt;
    {% endif %}
    {% if next_url %}
    &lt;a href=&quot;{{ next_url }}&quot;&gt;Older posts&lt;/a&gt;
    {% endif %}
</code></pre>
<p>After you are done experiment with the pagination feature, you can set the <code>POSTS_PER_PAGE</code> configuration item to a more reasonable value:</p>
<p class="code_title"><i>config.py</i>: Posts per page configuration.</p>

<pre><code class="language-python">class Config(object):
    # ...
    POSTS_PER_PAGE = 25
</code></pre></div>

<div class="card patreon-bar">
  <div class="card-body">
    <h5>Become a Patron!</h5>
    <p class="card-text">Hello, and thank you for visiting my blog! If you enjoyed this article, please consider supporting my work on this blog on <a href="https://patreon.com/miguelgrinberg">Patreon</a>!</p>
    <a href="https://patreon.com/miguelgrinberg" alt="Become a Patron!" title="Become a Patron!"><img src="../../../static/patreon-button.png"></a>
  </div>
</div>


<div class="card social-bar">
  <div class="card-body">
    <h5>Share this post:</h5>
      <!-- Sharingbutton Hacker News -->
      <a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination-2018&amp;t=The%20Flask%20Mega-Tutorial%20Part%20IX%3A%20Pagination%20%282018%29" target="_blank" rel="noopener" aria-label="Hacker News">
        <div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 140"><path fill-rule="evenodd" d="M60.94 82.314L17 0h20.08l25.85 52.093c.397.927.86 1.888 1.39 2.883.53.994.995 2.02 1.393 3.08.265.4.463.764.596 1.095.13.334.262.63.395.898.662 1.325 1.26 2.618 1.79 3.877.53 1.26.993 2.42 1.39 3.48 1.06-2.254 2.22-4.673 3.48-7.258 1.26-2.585 2.552-5.27 3.877-8.052L103.49 0h18.69L77.84 83.308v53.087h-16.9v-54.08z"></path></svg></div>Hacker News</div>
      </a>

      <!-- Sharingbutton Reddit -->
      <a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination-2018&amp;resubmit=true&amp;title=The%20Flask%20Mega-Tutorial%20Part%20IX:%20Pagination%20(2018)" target="_blank" rel="noopener" aria-label="Reddit">
        <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96 0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65 0 3-1.35 3-3s-1.35-3-3-3c-1.38 0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65 0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66 0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64 0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4 0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6 0 .23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1 0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></div>Reddit</div>
      </a>

      <!-- Sharingbutton Twitter -->
      <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=The%20Flask%20Mega-Tutorial%20Part%20IX%3A%20Pagination%20%282018%29&amp;url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination-2018" target="_blank" rel="noopener" aria-label="Twitter">
        <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div>Twitter</div>
      </a>

      <!-- Sharingbutton LinkedIn -->
      <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination-2018&amp;title=The%20Flask%20Mega-Tutorial%20Part%20IX%3A%20Pagination%20%282018%29&amp;summary=The%20Flask%20Mega-Tutorial%20Part%20IX%3A%20Pagination%20%282018%29&amp;source=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination-2018" target="_blank" rel="noopener" aria-label="LinkedIn">
        <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg></div>LinkedIn</div>
      </a>

      <!-- Sharingbutton Facebook -->
      <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination-2018" target="_blank" rel="noopener" aria-label="Facebook">
        <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div>Facebook</div>
      </a>

      <!-- Sharingbutton E-Mail -->
      <a class="resp-sharing-button__link" href="mailto:?subject=The%20Flask%20Mega-Tutorial%20Part%20IX%3A%20Pagination%20%282018%29&amp;body=https%3A//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination-2018" target="_self" rel="noopener" aria-label="E-Mail">
        <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></div>E-Mail</div>
      </a>

  </div>
</div>

<div id="comments" class="post-comment-count">
  
  <a class="btn btn-outline-secondary" href="../../the-flask-mega-tutorial-part-ix-pagination-2018.html#comments">145 comments</a>
  
</div>


<div class="comments">
  <ul>
    
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/a5a8a9c26cd7cb846b779dc2b415d041?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#51</span> <span class="badge text-bg-warning">jg1212</span> said
    
    <span class="flask-moment" data-timestamp="2018-12-06T03:33:08Z" data-function="fromNow" data-refresh="0" style="display: none">2018-12-06T03:33:08Z</span>
  </p>
  <div>
    <p>Hi Miguel,<br>
Amazing tutorial.  You are a great teacher.<br>
Not sure if you get to this later in the tutorial, but how would you recommend preventing the following integer overflow attack?<br>
OverflowError: Python int too large to convert to SQLite INTEGER<br>
127.0.0.1 - - [05/Dec/2018 22:31:20] "GET /index?page=9999999999999999999 HTTP/1.1" 500 -<br>
Thanks,<br>
JG</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#52</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-12-06T11:10:03Z" data-function="fromNow" data-refresh="0" style="display: none">2018-12-06T11:10:03Z</span>
  </p>
  <div>
    <p>@ jg1212: Why would this be an attack? All I see is that the client sent a bad argument, and the server errored. The correct error would have been 400, not 500, but other than that I need help in seeing the potential danger. The page number could be validated, the pagination object returned by Flask-SQLAlchemy tells you how many total pages there are.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/951bb9b29b1deab1a15271a5351a90a7?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#53</span> <span class="badge text-bg-warning">Vingoldo Sirimboldi</span> said
    
    <span class="flask-moment" data-timestamp="2018-12-07T14:03:33Z" data-function="fromNow" data-refresh="0" style="display: none">2018-12-07T14:03:33Z</span>
  </p>
  <div>
    <p>Hi Miguel,</p>
<p>Thank you for this amazing tutorial! It is super helpful and well explained!</p>
<p>I have a question regarding simultaneous pagination and query of a database.<br>
I'm trying to build a page that contains a form in order to query data from the database table, like the following:</p>
<p>@app.route('/ciao', methods=['GET', 'POST'])<br>
def ciao():<br>
    form = BlaBlaForm()<br>
    page = request.args.get('page', 1, type=int)<br>
    if form.validate_on_submit():<br>
        ### BUILD query_dict from form fields data<br>
        dbitems = initquery.join(...).filter_by(**query_dict).order_by(...).paginate(page, app.config['CIAO_PER_PAGE'], False)<br>
    else:<br>
        dbitems = Foo.query.join(...).order_by(...).paginate(page, app.config['CMM_PER_PAGE'], False)<br>
    next_url = url_for('ciao', page=dbitems.next_num) if dbitems.has_next else None<br>
    prev_url = url_for('ciao', page=dbitems.prev_num) if dbitems.has_prev else None<br>
    return render_template('ciao.html', form=form, dbitems=dbitems.items, next_url=next_url, prev_url=prev_url, title='CIAO')</p>
<p>The pagination works fine for the first page, however the filter is lost for the following pages. Do you have any suggestions on how to cleverly fix it?</p>
<p>Thank you in advance!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#54</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-12-07T14:13:55Z" data-function="fromNow" data-refresh="0" style="display: none">2018-12-07T14:13:55Z</span>
  </p>
  <div>
    <p>@Vingoldo: you need to preserve the form fields somehow. For example, if you submit the form as a GET request, then the fields will be in the query string of the URL. In that case you can include the fields again in the links to move through the pages.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/5164ea0cf57f101d33b2cde3645c8479?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#55</span> <span class="badge text-bg-warning">Steve Fibich</span> said
    
    <span class="flask-moment" data-timestamp="2018-12-09T18:10:14Z" data-function="fromNow" data-refresh="0" style="display: none">2018-12-09T18:10:14Z</span>
  </p>
  <div>
    <p>I received the following error once I implemented the paginate feature <br>
'Pagination' object is not iterable flask, this tripped me up for a while until I realized you can call the .items method on this object to get an iterable object.  Hope this helps anyone else who has encounters this issue.  Still not to sure why I saw this issue and it looks like no one else has encountered it.  Maybe a newer version of SQL Alchemy.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/9386e3cea7f33db16e8167a66e6ce698?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#56</span> <span class="badge text-bg-warning">wedojava</span> said
    
    <span class="flask-moment" data-timestamp="2018-12-12T03:31:45Z" data-function="fromNow" data-refresh="0" style="display: none">2018-12-12T03:31:45Z</span>
  </p>
  <div>
    <p>Hi Miguel,</p>
<p>Thanks for your helpful tutorial!</p>
<p>I have a question regarding pagination by hard query object.<br>
I'm make a page that contains a form in order to query data from the database table, like the following:</p>
<pre><code>    words_email = [&quot;%&quot; + form.email.data + &quot;%&quot;]
    rule = and_(*[LogImported.sender_address.like(w) for w in words_email])
    logs = LogImported.query.filter(rule)
    pagination = logs.paginate(page, per_page=50, error_out=True)
</code></pre>
<p>then, first request after,I can get the right page,but click any other page number links,will return 404 error.<br>
I tracked,and find out the <code>logs</code> or filter() has something wrong,if I cut filter,it work right.but how to use filter?I think, it must have a right way to paginate hard query result like use filter.</p>
<p>I read your comments before,how can " lazy='dynamic' " use at this case? or, it can not use at this place?</p>
<p>Thanks for your attention,I tried to google and stackoverflow and read documents, but cannot find out the right way to solve it.Except you may help me.</p>
<p>Thank you.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#57</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-12-12T15:22:40Z" data-function="fromNow" data-refresh="0" style="display: none">2018-12-12T15:22:40Z</span>
  </p>
  <div>
    <p>@wedojava: you are asking the pagination to return an error with the "error_out=True' argument. Set it to False if you prefer to receive empty pages.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/9386e3cea7f33db16e8167a66e6ce698?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#58</span> <span class="badge text-bg-warning">wedojava</span> said
    
    <span class="flask-moment" data-timestamp="2018-12-13T04:38:16Z" data-function="fromNow" data-refresh="0" style="display: none">2018-12-13T04:38:16Z</span>
  </p>
  <div>
    <p>yes,I tried this option before,and received empty pages,any pages cannot receive right page.I know why this error happened,I know the number of results are less than the size of the first page.but I don't know how to solve it.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#59</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2018-12-13T12:35:00Z" data-function="fromNow" data-refresh="0" style="display: none">2018-12-13T12:35:00Z</span>
  </p>
  <div>
    <p>@wedojava: what are you trying to solve? If you go beyond the list of results you are either going to get an empty page or a 404, what other way you want that case handled? If you want to prevent this from happening, make sure you don't offer a Next Page link when you are looking at the last page.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/7bc129de5970c69ea89971f49679f5ae?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#60</span> <span class="badge text-bg-warning">M</span> said
    
    <span class="flask-moment" data-timestamp="2019-01-23T05:38:21Z" data-function="fromNow" data-refresh="0" style="display: none">2019-01-23T05:38:21Z</span>
  </p>
  <div>
    <p>Hello Miguel,</p>
<p>After setting up followers and working on pagination I ran into an error. I'm not sure where the problem lies.</p>
<p>This is the error output.</p>
<p>(venv) MacBook-Pro:microblog m$ /Library/Frameworks/Python.framework/Versions/3.7/bin/python3 /Users/m/Development/microblog/<a href="http://test.py/" rel="nofollow">test.py</a><br>
Traceback (most recent call last):<br>
  File "/Users/m/Development/microblog/<a href="http://test.py/" rel="nofollow">test.py</a>", line 3, in &lt;module&gt;<br>
    from app import app, db<br>
  File "/Users/m/Development/microblog/app/<strong>init</strong>.py", line 13, in &lt;module&gt;<br>
    from app import errors, models, routes<br>
  File "/Users/m/Development/microblog/app/<a href="http://errors.py/" rel="nofollow">errors.py</a>", line 2, in &lt;module&gt;<br>
    from app import app, db<br>
ImportError: cannot import name 'app' from 'app' (/Users/m/Development/microblog/app/<strong>init</strong>.py)</p>
<p>I have read online the it could be calling something before its been initialized or that its a circular import but I am at a loss.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#61</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2019-01-23T13:31:18Z" data-function="fromNow" data-refresh="0" style="display: none">2019-01-23T13:31:18Z</span>
  </p>
  <div>
    <p>@M: Yes, the circular import is clearly seen in your stack trace: <a href="http://test.py/" rel="nofollow">test.py</a> imports app and db from the app package. The app package's <strong>init</strong>.py module imports <a href="http://errors.py/" rel="nofollow">errors.py</a>, and <a href="http://errors.py/" rel="nofollow">errors.py</a> imports once again app and db.</p>
<p>The solution is to move the "from app import errors, models, routes" line in app/<strong>init</strong>.py down in the file, in a place after both app and db have been defined.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/ad4d13c0ffa370087f1cff35eea9d017?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#62</span> <span class="badge text-bg-warning">JOHN</span> said
    
    <span class="flask-moment" data-timestamp="2019-02-16T10:02:49Z" data-function="fromNow" data-refresh="0" style="display: none">2019-02-16T10:02:49Z</span>
  </p>
  <div>
    <p>@miguelgrinberg Good work on ur flask mega tutorials. I am currently on The Flask Mega-Tutorial Part IX: Pagination, I encountered a problem that i can't solve. I compare my codes with yours and everything seem to be ok. Sorry I'm telling u about this on twitter<br>
This is the error message:</p>
<p>[2019-02-16 10:42:57,732] ERROR in app: Exception on / [GET]<br>
Traceback (most recent call last):<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\engine\<a href="http://base.py/" rel="nofollow">base.py</a>", line 1236, in _execute_context<br>
    cursor, statement, parameters, context<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\engine\<a href="http://default.py/" rel="nofollow">default.py</a>", line 536, in do_execute<br>
    cursor.execute(statement, parameters)<br>
sqlite3.OperationalError: no such column: post.timestamp</p>
<p>The above exception was the direct cause of the following exception:</p>
<p>Traceback (most recent call last):<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\flask\<a href="http://app.py/" rel="nofollow">app.py</a>", line 2292, in wsgi_app<br>
    response = self.full_dispatch_request()<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\flask\<a href="http://app.py/" rel="nofollow">app.py</a>", line 1815, in full_dispatch_request<br>
    rv = self.handle_user_exception(e)<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\flask\<a href="http://app.py/" rel="nofollow">app.py</a>", line 1718, in handle_user_exception<br>
    reraise(exc_type, exc_value, tb)<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\<a href="http://flask_compat.py/" rel="nofollow">flask_compat.py</a>", line 35, in reraise<br>
    raise value<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\flask\<a href="http://app.py/" rel="nofollow">app.py</a>", line 1813, in full_dispatch_request<br>
    rv = self.dispatch_request()<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\flask\<a href="http://app.py/" rel="nofollow">app.py</a>", line 1799, in dispatch_request<br>
    return self.view_functions<a href="__req.html" rel="nofollow">rule.endpoint</a><br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\flask_login\<a href="http://utils.py/" rel="nofollow">utils.py</a>", line 261, in decorated_view<br>
    return func(<em>args, </em>*kwargs)<br>
  File "C:\Users\philejohn\EveryFlask\app\<a href="http://routes.py/" rel="nofollow">routes.py</a>", line 30, in index<br>
    posts = current_user.followed_posts().all()<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\orm\<a href="http://query.py/" rel="nofollow">query.py</a>", line 2925, in all<br>
    return list(self)<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\orm\<a href="http://query.py/" rel="nofollow">query.py</a>", line 3081, in <strong>iter</strong><br>
    return self._execute_and_instances(context)<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\orm\<a href="http://query.py/" rel="nofollow">query.py</a>", line 3106, in _execute_and_instances<br>
    result = conn.execute(querycontext.statement, self._params)<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\engine\<a href="http://base.py/" rel="nofollow">base.py</a>", line 980, in execute<br>
    return meth(self, multiparams, params)<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\sql\<a href="http://elements.py/" rel="nofollow">elements.py</a>", line 273, in _execute_on_connection<br>
    return connection._execute_clauseelement(self, multiparams, params)<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\engine\<a href="http://base.py/" rel="nofollow">base.py</a>", line 1099, in _execute_clauseelement<br>
    distilled_params,<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\engine\<a href="http://base.py/" rel="nofollow">base.py</a>", line 1240, in _execute_context<br>
    e, statement, parameters, cursor, context<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\engine\<a href="http://base.py/" rel="nofollow">base.py</a>", line 1458, in _handle_dbapi_exception<br>
    util.raise_from_cause(sqlalchemy_exception, exc_info)<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\util\<a href="http://compat.py/" rel="nofollow">compat.py</a>", line 296, in raise_from_cause<br>
    reraise(type(exception), exception, tb=exc_tb, cause=cause)<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\util\<a href="http://compat.py/" rel="nofollow">compat.py</a>", line 276, in reraise<br>
    raise value.with_traceback(tb)<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\engine\<a href="http://base.py/" rel="nofollow">base.py</a>", line 1236, in _execute_context<br>
    cursor, statement, parameters, context<br>
  File "c:\users\philejohn\everyflask\venv\lib\site-packages\sqlalchemy\engine\<a href="http://default.py/" rel="nofollow">default.py</a>", line 536, in do_execute<br>
    cursor.execute(statement, parameters)<br>
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: post.timestamp [SQL: 'SELECT anon_1.post_id AS anon_1_post_id, anon_1.post_body AS anon_1_post_body, anon_1.post_timestamp AS anon_1_post_timestamp, anon_1.post_user_id AS anon_1_post_user_id \nFROM (SELECT <a href="http://post.id/" rel="nofollow">post.id</a> AS post_id, post.body AS post_body, post.timestamp<br>
AS post_timestamp, post.user_id AS post_user_id \nFROM post JOIN followers ON followers.followed_id = post.user_id \nWHERE followers.follower_id = ? UNION SELECT <a href="http://post.id/" rel="nofollow">post.id</a> AS post_id, post.body AS post_body, post.timestamp AS post_timestamp, post.user_id AS post_user_id \nFROM post \nWHERE post.user_id = ?) AS anon_1 ORDER BY anon_1.post_timestamp DESC'] [parameters: (7, 7)] (Background on this error at: <a href="http://sqlalche.me/e/e3q8" rel="nofollow">http://sqlalche.me/e/e3q8</a>)<br>
127.0.0.1 - - [16/Feb/2019 10:43:00] "GET / HTTP/1.1" 500 -</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#63</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2019-02-16T19:39:21Z" data-function="fromNow" data-refresh="0" style="display: none">2019-02-16T19:39:21Z</span>
  </p>
  <div>
    <p>@JOHN: the stack trace is long, but you have to identify what the error is. In your case, the error message is "no such column: post.timestamp". It means that your database does not have the timestamp column defined for the posts table.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/19b55bddb9ea3f1a9f19a17fcae1e53a?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#64</span> <span class="badge text-bg-warning">Danyel</span> said
    
    <span class="flask-moment" data-timestamp="2019-03-05T09:58:50Z" data-function="fromNow" data-refresh="0" style="display: none">2019-03-05T09:58:50Z</span>
  </p>
  <div>
    <p>Hi Miguel!<br>
When I try to explore last page of blog post's I get:</p>
<p>File "...\blog\app\templates_post.html", line 3, in top-level template code<br>
    &lt;td&gt;&lt;img src="{{ post.author.avatar(36) }}"&gt;&lt;/td&gt;<br>
jinja2.exceptions.UndefinedError: 'None' has no attribute 'avatar'<br>
127.0.0.1 - - [05/Mar/2019 12:46:34] "GET /explore?page=4 HTTP/1.1" 500 -</p>
<p>Is it right to fix it something like this(to pass "None"):</p>
<p>{% if post.author %}<br>
            &lt;td&gt;&lt;img src="{{ post.author.avatar(36) }}"&gt;&lt;/td&gt;<br>
...<br>
{% endif %}</p>
<p>or is better way?</p>
<p>Best regards, Danyel</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#65</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2019-03-05T10:11:24Z" data-function="fromNow" data-refresh="0" style="display: none">2019-03-05T10:11:24Z</span>
  </p>
  <div>
    <p>@Danyel: yes, you can do that, but the problem is really that your database has an inconsistency, you have a post that does not have an author set.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/71eaea51490e137eaa16e5e4a297e36c?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#66</span> <span class="badge text-bg-warning">Doug Leister</span> said
    
    <span class="flask-moment" data-timestamp="2019-04-19T17:33:06Z" data-function="fromNow" data-refresh="0" style="display: none">2019-04-19T17:33:06Z</span>
  </p>
  <div>
    <p>Miguel,</p>
<p>Just wanted to say thank you for putting this together.  Its been a huge help in helping me to learn about web programming, Flask, SqlAlchemy etc.  Even though its a year since its come out, its still getting plenty of use and is a great resource.  Not doing a microblog, but instead am adapting it for a project I'm working on. </p>
<p>Thanks,<br>
Doug</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/18623c9db2de378177dfc2658fbb698b?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#67</span> <span class="badge text-bg-warning">Collins</span> said
    
    <span class="flask-moment" data-timestamp="2019-04-21T14:16:56Z" data-function="fromNow" data-refresh="0" style="display: none">2019-04-21T14:16:56Z</span>
  </p>
  <div>
    <p>This seems awesome, however, I think there is a better way of having a single place eg a function which can do pagination for all views, this is a lot of repetition, in that every time you need to paginate you have to query and call .paginate passing the page, limit, etc. Thanks</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#68</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2019-04-21T20:20:19Z" data-function="fromNow" data-refresh="0" style="display: none">2019-04-21T20:20:19Z</span>
  </p>
  <div>
    <p>@Collins: I agree. In fact I have shown at a PyCon talk a few years back how to implement the entire pagination logic in a decorator that you can add to a view function.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/14d6cadaffe496e3e294ff19e6bbd003?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#69</span> <span class="badge text-bg-warning">Emircan K</span> said
    
    <span class="flask-moment" data-timestamp="2019-05-24T15:53:23Z" data-function="fromNow" data-refresh="0" style="display: none">2019-05-24T15:53:23Z</span>
  </p>
  <div>
    <p>Hello Mr. Miguel.<br>
I would really like to thank you for providing us aspiring developers with such an excellent guide!<br>
I have a minor question. I realized that when I navigate through the site, everything seems to be working fine, except when I navigate to homepage either via the link at the top of the page or by entering the URL by hand, there is a slight delay in the process of page being loaded. And The post requests on index page give a 302 status code. I am not sure if the long loading time is related to the Post requests since simply by trying to navigate to homepage and not post anything, it still takes more than a couple of seconds. I Would really appreciate if you knew what caused the delay in the loading time and shared it with us! Thanks.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#70</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2019-05-24T18:38:35Z" data-function="fromNow" data-refresh="0" style="display: none">2019-05-24T18:38:35Z</span>
  </p>
  <div>
    <p>@Emircan: The post requests returning 302 is on purpose, this is explained earlier in the tutorial, it's the post/redirect/get pattern that prevents double form submissions. The delay is probably external to the application. Are you running the server on a different or same computer? If different, network latencies are going to affect timing, specially if you are on wi-fi.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/14d6cadaffe496e3e294ff19e6bbd003?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#71</span> <span class="badge text-bg-warning">Emircan K</span> said
    
    <span class="flask-moment" data-timestamp="2019-05-27T15:03:02Z" data-function="fromNow" data-refresh="0" style="display: none">2019-05-27T15:03:02Z</span>
  </p>
  <div>
    <p>@Miguel Grinberg, I do run the server on the same computer and also I am connected via a cable, although recently I have realized the delay comes and goes randomly, that makes it certain that it has to do something with my machine. It was just a minor thing that I looked up but could not find any explanation so wanted to ask you. Thanks for taking your time and responding to us people who have questions here so quickly for such a long time! I hope the best for you. Cannot thank you enough for the help you provided!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/cb5efba48841a170878291e04aadf0fd?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#72</span> <span class="badge text-bg-warning">Borja</span> said
    
    <span class="flask-moment" data-timestamp="2019-06-17T06:11:57Z" data-function="fromNow" data-refresh="0" style="display: none">2019-06-17T06:11:57Z</span>
  </p>
  <div>
    <p>Hola Miguel,</p>
<p>Thank you for your help! You are the Flask Master! One question, I have done something similar until this point but now I do not want to paginate. My main route ('/') display a table with columns, so, instead of paginate I would like to load more rows when the user scroll down. Do you have any recommendations? Until now, what I did is using javascript to check the position and then, also with javascript add the new rows but it is a little bit messy. So, I would like to now if there is some plugin or you have some recommendations to do it in a more clean way. Thank you very much. </p>
<p>Borja</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#73</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2019-06-17T18:46:23Z" data-function="fromNow" data-refresh="0" style="display: none">2019-06-17T18:46:23Z</span>
  </p>
  <div>
    <p>@Borja: you can use any of the infinite scroll plugins that are available for the browser. Unfortunately this cannot be done from the Python side.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/2ac0ebf962571ad7f525ec6b008f61b3?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#74</span> <span class="badge text-bg-warning">mc</span> said
    
    <span class="flask-moment" data-timestamp="2019-07-06T20:10:26Z" data-function="fromNow" data-refresh="0" style="display: none">2019-07-06T20:10:26Z</span>
  </p>
  <div>
    <p>Thanks Miguel for this tutorial! Great content and methodology! I'm learning a lot!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/0ef5a8a502573fe9bf5043e24c25f06c?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#75</span> <span class="badge text-bg-warning">Juan Manuel Martin</span> said
    
    <span class="flask-moment" data-timestamp="2019-07-13T16:21:27Z" data-function="fromNow" data-refresh="0" style="display: none">2019-07-13T16:21:27Z</span>
  </p>
  <div>
    <p>Hi Miguel, is there a reason not to instead of doing this:</p>
<p>@app.route('/explore')<br>
@login_required<br>
def explore():<br>
    page = request.args.get('page', 1, type=int)</p>
<p>do this:</p>
<p>@app.route('/explore/&lt;int:page&gt;/')<br>
@login_required<br>
def explore(page):<br>
......</p>
<p>and on explore link:</p>
<p><a href="%7b%7b%20url_for(%27explore%27%2c%20page%3d1)%20%7d%7d.html" rel="nofollow">Explore</a></p>
  </div>
</div>
    </li>
    
  </ul>
</div>

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item"><a class="page-link" href="1.html#comments">&laquo;&laquo;</a></li>
    <li class="page-item"><a class="page-link" href="2.html#comments">&laquo;</a></li>
    <li class="page-item"><a class="page-link" href="4.html#comments">&raquo;</a></li>
    <li class="page-item"><a class="page-link" href="0.html#comments">&raquo;&raquo;</a></li>
  </ul>
</nav>



<div id="comment-form">
  <h3>Leave a Comment</h3>

  
  
  

  
<form action="#comment-form" method="post">
  <input id="url" name="url" type="hidden" value="">
<input id="csrf_token" name="csrf_token" type="hidden" value="IjQyYjY5YzZlNTcyYjFkMTVlZGRkOWJjYjA3ZmFlYWFiNTg3YmU5ODki.Zxdmdw.O2Ntp1wsJu0T9mOMVCW3kKGNcSw">
    
  <div class="mb-3">
    <label class="form-label" for="name">Name</label>
    <div class="input-group has-validation">
      <input class="form-control" id="name" name="name" required type="text" value="">
    </div>
  </div>

    
    
  <div class="mb-3">
    <label class="form-label" for="email">Email</label>
    <div class="input-group has-validation">
      <input class="form-control" id="email" name="email" required type="text" value="">
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="comment">Comment</label>
    <div class="input-group has-validation">
      <textarea class="form-control" id="comment" name="comment" required>
</textarea>
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="captcha">Captcha</label>
    <div class="input-group has-validation">
      
<script src='https://www.google.com/recaptcha/api.js' async defer></script>
<div class="g-recaptcha" data-sitekey="6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S"></div>

    </div>
  </div>

    
  <input class="btn btn-primary mb-3" id="submit" name="submit" type="submit" value="Submit">

      
</form>

</div>


</div>

      </div>
    </div>
    
    <div class="col-md-4">
      <div id="sidebar">
        
          
  



<div class="card">
  
  
  <div class="card-header">Flask Web Development, 2nd Edition</div>
  <a class="card-book-cover" href="https://amzn.to/3lE2mok">
    <img src="../../../static/flask2e-book-cover-small.png" alt="Flask Web Development, 2nd Edition">
  </a>
  <div class="card-body">
    <p class="card-text">If you want to learn modern web development techniques with Python and Flask, you may find the second edition of my <a href="https://amzn.to/3lE2mok">O'Reilly book</a> useful.</p>
  </div>
  <div class="card-body">
    <a class="card-link" href="https://amzn.to/3lE2mok">Click here to get this Book!</a><br />
  </div>

  
</div>
        
        <div class="card">
  <div class="card-header">About Miguel</div>
  <div class="card-body">
    <img style="float: right; margin: 0px 8px 8px 0px; padding: 4px; border: 1px solid #ccc;" src="../../../static/miguel.jpg" />
    <p class="card-text">Welcome to my blog!</p>
    <p class="card-text">I'm a software engineer and technical writer, currently living in Drogheda, Ireland.</p>
    <p class="card-text">You can also find me on <a href="https://twitter.com/miguelgrinberg">Twitter</a>, <a href="https://mstdn.social/@miguelgrinberg">Mastodon</a>, <a href="https://github.com/miguelgrinberg">Github</a>, <a href="http://www.linkedin.com/in/miguelgrinberg">LinkedIn</a>, <a href="https://youtube.com/miguelgrinberg">YouTube</a>, <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a> and <a href="https://patreon.com/miguelgrinberg">Patreon</a>.</p>
    <p class="card-text">Thank you for visiting!</p>
  </div>
</div>
        
        <div class="card" id="categories">
  <div class="card-header">Categories</div>
  <div class="card-body">
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AI/feed"><img src="../../../static/rss-small.png" title="AI RSS Feed" label="AI RSS Feed" alt="AI RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AI" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AI" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AWS/feed"><img src="../../../static/rss-small.png" title="AWS RSS Feed" label="AWS RSS Feed" alt="AWS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AWS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AWS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Arduino/feed"><img src="../../../static/rss-small.png" title="Arduino RSS Feed" label="Arduino RSS Feed" alt="Arduino RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Arduino" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Arduino" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Authentication/feed"><img src="../../../static/rss-small.png" title="Authentication RSS Feed" label="Authentication RSS Feed" alt="Authentication RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Authentication" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Authentication" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Blog/feed"><img src="../../../static/rss-small.png" title="Blog RSS Feed" label="Blog RSS Feed" alt="Blog RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Blog" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Blog" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/C++/feed"><img src="../../../static/rss-small.png" title="C++ RSS Feed" label="C++ RSS Feed" alt="C++ RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/C++" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="C++" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/CSS/feed"><img src="../../../static/rss-small.png" title="CSS RSS Feed" label="CSS RSS Feed" alt="CSS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/CSS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="CSS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Cloud/feed"><img src="../../../static/rss-small.png" title="Cloud RSS Feed" label="Cloud RSS Feed" alt="Cloud RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Cloud" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Cloud" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Database/feed"><img src="../../../static/rss-small.png" title="Database RSS Feed" label="Database RSS Feed" alt="Database RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Database" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Database" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Docker/feed"><img src="../../../static/rss-small.png" title="Docker RSS Feed" label="Docker RSS Feed" alt="Docker RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Docker" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Docker" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Filmmaking/feed"><img src="../../../static/rss-small.png" title="Filmmaking RSS Feed" label="Filmmaking RSS Feed" alt="Filmmaking RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Filmmaking" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Filmmaking" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Flask/feed"><img src="../../../static/rss-small.png" title="Flask RSS Feed" label="Flask RSS Feed" alt="Flask RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" /> <small><em>126</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Games/feed"><img src="../../../static/rss-small.png" title="Games RSS Feed" label="Games RSS Feed" alt="Games RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Games" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Games" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Heroku/feed"><img src="../../../static/rss-small.png" title="Heroku RSS Feed" label="Heroku RSS Feed" alt="Heroku RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Heroku" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Heroku" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/IoT/feed"><img src="../../../static/rss-small.png" title="IoT RSS Feed" label="IoT RSS Feed" alt="IoT RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/IoT" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="IoT" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/JavaScript/feed"><img src="../../../static/rss-small.png" title="JavaScript RSS Feed" label="JavaScript RSS Feed" alt="JavaScript RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/JavaScript" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="JavaScript" /> <small><em>35</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/MicroPython/feed"><img src="../../../static/rss-small.png" title="MicroPython RSS Feed" label="MicroPython RSS Feed" alt="MicroPython RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/MicroPython" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="MicroPython" /> <small><em>9</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microdot/feed"><img src="../../../static/rss-small.png" title="Microdot RSS Feed" label="Microdot RSS Feed" alt="Microdot RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microdot" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microdot" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microservices/feed"><img src="../../../static/rss-small.png" title="Microservices RSS Feed" label="Microservices RSS Feed" alt="Microservices RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microservices" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microservices" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Movie Reviews/feed"><img src="../../../static/rss-small.png" title="Movie Reviews RSS Feed" label="Movie Reviews RSS Feed" alt="Movie Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Movie Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Movie Reviews" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/OpenStack/feed"><img src="../../../static/rss-small.png" title="OpenStack RSS Feed" label="OpenStack RSS Feed" alt="OpenStack RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/OpenStack" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="OpenStack" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Personal/feed"><img src="../../../static/rss-small.png" title="Personal RSS Feed" label="Personal RSS Feed" alt="Personal RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Personal" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Personal" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Photography/feed"><img src="../../../static/rss-small.png" title="Photography RSS Feed" label="Photography RSS Feed" alt="Photography RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Photography" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Photography" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Product Reviews/feed"><img src="../../../static/rss-small.png" title="Product Reviews RSS Feed" label="Product Reviews RSS Feed" alt="Product Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Product Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Product Reviews" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Programming/feed"><img src="../../../static/rss-small.png" title="Programming RSS Feed" label="Programming RSS Feed" alt="Programming RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" /> <small><em>187</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Project Management/feed"><img src="../../../static/rss-small.png" title="Project Management RSS Feed" label="Project Management RSS Feed" alt="Project Management RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Project Management" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Project Management" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Python/feed"><img src="../../../static/rss-small.png" title="Python RSS Feed" label="Python RSS Feed" alt="Python RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" /> <small><em>169</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/REST/feed"><img src="../../../static/rss-small.png" title="REST RSS Feed" label="REST RSS Feed" alt="REST RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/REST" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="REST" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Rackspace/feed"><img src="../../../static/rss-small.png" title="Rackspace RSS Feed" label="Rackspace RSS Feed" alt="Rackspace RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Rackspace" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Rackspace" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Raspberry Pi/feed"><img src="../../../static/rss-small.png" title="Raspberry Pi RSS Feed" label="Raspberry Pi RSS Feed" alt="Raspberry Pi RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Raspberry Pi" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Raspberry Pi" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/React/feed"><img src="../../../static/rss-small.png" title="React RSS Feed" label="React RSS Feed" alt="React RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/React" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="React" /> <small><em>18</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Robotics/feed"><img src="../../../static/rss-small.png" title="Robotics RSS Feed" label="Robotics RSS Feed" alt="Robotics RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Robotics" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Robotics" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Security/feed"><img src="../../../static/rss-small.png" title="Security RSS Feed" label="Security RSS Feed" alt="Security RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Security" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Security" /> <small><em>12</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Video/feed"><img src="../../../static/rss-small.png" title="Video RSS Feed" label="Video RSS Feed" alt="Video RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Video" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Video" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/WebSocket/feed"><img src="../../../static/rss-small.png" title="WebSocket RSS Feed" label="WebSocket RSS Feed" alt="WebSocket RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/WebSocket" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="WebSocket" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Webcast/feed"><img src="../../../static/rss-small.png" title="Webcast RSS Feed" label="Webcast RSS Feed" alt="Webcast RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Webcast" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Webcast" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Windows/feed"><img src="../../../static/rss-small.png" title="Windows RSS Feed" label="Windows RSS Feed" alt="Windows RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Windows" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Windows" /> <small><em>1</em></small>
      </form>
    </div>
    
  </div>
</div>
        
      </div>
    </div>
    
  </div>
  <div id="footer">
    
    <p>&copy; 2012-<script type="text/javascript">document.write(new Date().getFullYear());</script> by Miguel Grinberg. All rights reserved. <a href="mailto:webmaster _at_ miguelgrinberg _dot_ com">Questions?</a></p>
  </div>
</div>

  
    <script src="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../../static/prettify.js"></script>
  <script src="../../../../cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment-with-locales.min.js" integrity="sha512-42PE0rd+wZ2hNXftlM78BSehIGzezNeQuzihiBCvUEB3CVxHvsShF86wBWwQORNxNINlBPuq7rG4WWhNiTVHFg==" crossorigin="anonymous"></script>

<script>
moment.locale("en");
function flask_moment_render(elem) {{
    const timestamp = moment(elem.dataset.timestamp);
    const func = elem.dataset.function;
    const format = elem.dataset.format;
    const timestamp2 = elem.dataset.timestamp2;
    const no_suffix = elem.dataset.nosuffix;
    const units = elem.dataset.units;
    let args = [];
    if (format)
        args.push(format);
    if (timestamp2)
        args.push(moment(timestamp2));
    if (no_suffix)
        args.push(no_suffix);
    if (units)
        args.push(units);
    elem.textContent = timestamp[func].apply(timestamp, args);
    elem.classList.remove('flask-moment');
    elem.style.display = "";
}}
function flask_moment_render_all() {{
    const moments = document.querySelectorAll('.flask-moment');
    moments.forEach(function(moment) {{
        flask_moment_render(moment);
        const refresh = moment.dataset.refresh;
        if (refresh && refresh > 0) {{
            (function(elem, interval) {{
                setInterval(function() {{
                    flask_moment_render(elem);
                }}, interval);
            }})(moment, refresh);
        }}
    }})
}}
document.addEventListener("DOMContentLoaded", flask_moment_render_all);
</script>

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-20EHZP9GRZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-20EHZP9GRZ');
  </script>
  
  <script type="text/javascript">
    function setThemeUI() {
      document.getElementById('select-theme-auto').classList.remove('active');
      document.getElementById('select-theme-light').classList.remove('active');
      document.getElementById('select-theme-dark').classList.remove('active');
      const theme = getPreferredTheme();
      const actualTheme = document.documentElement.getAttribute('data-bs-theme', 'light');
      document.getElementById('select-theme-' + theme).classList.add('active');
      document.getElementById('current-theme').href.baseVal = `#icon-theme-${actualTheme}`;
    };

    function updateTheme(theme) {
      if (theme === 'auto') {
        localStorage.removeItem('theme')
      }
      else {
        localStorage.setItem('theme', theme)
      }
      setTheme(getPreferredTheme());
    }

    setThemeUI();

    const darkModePreference = window.matchMedia("(prefers-color-scheme: dark)");
    darkModePreference.addEventListener("change", e => {
      if (getPreferredTheme() === 'auto') {
        setTheme('auto');
      }
    });

    document.addEventListener("DOMContentLoaded", () => {
      // add prettyprint class to all <pre><code></code></pre> blocks
      let prettify = false;
      document.querySelectorAll('div.post-body pre code').forEach((code) => {
        code.parentNode.classList.add('prettyprint');
        prettify = true;
      });
      prettyPrint();
    });
  </script>

  </body>

<!-- Mirrored from blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination-2018/page/3 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 08:48:13 GMT -->
</html>