<!doctype html>
<html lang="en">
  
<!-- Mirrored from blog.miguelgrinberg.com/post/it-s-time-for-a-change-datetime-utcnow-is-now-deprecated/page/1 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 09:41:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
  <script type="text/javascript">
    function getPreferredTheme() {
      const storedTheme = localStorage.getItem('theme')
      if (storedTheme) {
        return storedTheme
      }
      return 'auto';
    }

    function setTheme(theme) {
      if (theme === 'auto') {
        theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
      }
      document.documentElement.setAttribute('data-bs-theme', theme);
    };

    setTheme(getPreferredTheme());
  </script>
  
    <title>
  
    It&#39;s Time For A Change: datetime.utcnow() Is Now Deprecated - miguelgrinberg.com
  
</title>
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="description" content="miguelgrinberg.com">
  <meta name="copyright" content="Copyright (c) 2012-2024 Miguel Grinberg">
  <meta name="author" content="Miguel Grinberg">
  
  <meta name="keywords" content="python, datetime, deprecation, timezone, utc">
  
  
  <link rel="canonical" href="../../it-s-time-for-a-change-datetime-utcnow-is-now-deprecated.html">
  

  
    <link href="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&amp;display=swap" rel="stylesheet">

  <link href="../../../static/tomorrow.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/tomorrow-night.min.css" type="text/css" rel="stylesheet" />
  <link href="../../../static/social.css" rel="stylesheet" type="text/css" />
  <link href="../../../static/style_20231230.css" rel="stylesheet" type="text/css" />

  <link rel="shortcut icon" href="https://blog.miguelgrinberg.com/static/favicon.ico">
  <link rel="alternate" type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed" title="miguelgrinberg.com RSS feed">

    <meta property="og:title" content="It&#39;s Time For A Change: datetime.utcnow() Is Now Deprecated">
    <meta property="og:description" content="I was going through the release notes of the new Python 3.12 version the other day, and one item caught my attention in the deprecations section:datetime.datetime’s utcnow() and utcfromtimestamp()…">
    <meta property="og:image" content="https://blog.miguelgrinberg.com/static/cards/it-s-time-for-a-change-datetime-utcnow-is-now-deprecated.jpg">
    <meta property="og:url" content="https://blog.miguelgrinberg.com/post/it-s-time-for-a-change-datetime-utcnow-is-now-deprecated">
    <meta name="twitter:title" content="It&#39;s Time For A Change: datetime.utcnow() Is Now Deprecated">
    <meta name="twitter:description" content="I was going through the release notes of the new Python 3.12 version the other day, and one item caught my attention in the deprecations section:datetime.datetime’s utcnow() and utcfromtimestamp()…">
    <meta name="twitter:image" content="https://blog.miguelgrinberg.com/static/cards/it-s-time-for-a-change-datetime-utcnow-is-now-deprecated.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@miguelgrinberg">

  </head>
  <body>
    <svg style="display: none" version="2.0">
      <defs>
        <symbol id="icon-theme-auto" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-circle-half" viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 0 8 1zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16"/>
        </symbol>
        <symbol id="icon-theme-light" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-brightness-high-fill" viewBox="0 0 16 16">
          <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </symbol>
        <symbol id="icon-theme-dark" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-moon-stars-fill" viewBox="0 0 16 16">
          <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278"/>
          <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
        </symbol>
      </defs>
    </svg>
<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="https://blog.miguelgrinberg.com/index">miguelgrinberg.com</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" aria-current="page" href="https://blog.miguelgrinberg.com/index">Home</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../my-courses-and-books.html">My Courses and Books</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../hire-me.html">Consulting</a></li>
        <li class="nav-item"><a class="nav-link" aria-current="page" href="../../about-me.html">About Me</a></li>
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <svg width="20" height="20" version="2.0"><use id="current-theme" href="#icon-theme-light"></svg>
          </a>
          <ul class="dropdown-menu">
            <li>
              <a id="select-theme-light" class="dropdown-item" href="javascript:updateTheme('light')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-light"></svg>&nbsp; Light Mode
              </a>
            </li>
            <li>
              <a id="select-theme-dark" class="dropdown-item" href="javascript:updateTheme('dark')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-dark"></svg>&nbsp; Dark Mode
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a id="select-theme-auto" class="dropdown-item" href="javascript:updateTheme('auto')">
                <svg width="16" height="16" version="2.0"><use href="#icon-theme-auto"></svg>&nbsp; System Default
              </a>
            </li>
          </ul>
        </li>
        
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item social-icons">
          <a type="application/rss+xml" href="https://blog.miguelgrinberg.com/feed"><img src="../../../static/social/rss.png" alt="RSS Feed" title="RSS Feed" /></a>
          <a href="https://twitter.com/miguelgrinberg"><img src="../../../static/social/twitter.png" alt="Twitter" title="Twitter" /></a>
          <a rel="me" href="https://mstdn.social/@miguelgrinberg"><img src="../../../static/social/mastodon.png" alt="Mastodon" title="Mastodon" /></a>
          <a href="http://github.com/miguelgrinberg"><img src="../../../static/social/github.png" alt="GitHub" title="GitHub" /></a>
          <a href="https://youtube.com/miguelgrinberg"><img src="../../../static/social/youtube.png" alt="YouTube" title="YouTube" /></a>
          <a href="http://www.linkedin.com/in/miguelgrinberg"><img src="../../../static/social/linkedin.png" alt="LinkedIn" title="LinkedIn" /></a>
          <a href="https://patreon.com/miguelgrinberg"><img src="../../../static/social/patreon.png" alt="Patreon" title="Patreon" /></a>
          <!--<a href="https://www.facebook.com/miguelgrinbergblog"><img src="/static/social/facebook.png" alt="Facebook" title="Facebook" /></a>-->
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
  <div class="row">
    <div class="col-md-8">
      <div id="main">
        
        
        
        
        

<div class="post">

<div class="post-header">
  <h1><a href="../../it-s-time-for-a-change-datetime-utcnow-is-now-deprecated.html">It&#39;s Time For A Change: datetime.utcnow() Is Now Deprecated</a></h1>
  <h2>
    Posted by
    <form action="https://blog.miguelgrinberg.com/author/Miguel Grinberg" method="POST">
      <input type="submit" class="btn btn-danger btn-sm" value="Miguel Grinberg" />
    </form>
    on
    <button class="btn btn-secondary btn-sm" disabled><span class="flask-moment" data-timestamp="2023-11-18T12:00:19Z" data-function="format" data-format="LL" data-refresh="0" style="display: none">2023-11-18T12:00:19Z</span></button>
    under
    
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" />
      </form>
    
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" />
      </form>
    
    
  </h2>
</div>
<div class="post-body"><p>I was going through the <a href="https://docs.python.org/3/whatsnew/3.12.html">release notes</a> of the new Python 3.12 version the other day, and one item caught my attention in the deprecations section:</p>
<blockquote>
<p><code>datetime.datetime</code>’s <code>utcnow()</code> and <code>utcfromtimestamp()</code> are deprecated and will be removed in a future version.</p>
</blockquote>
<p>If you have followed my web development tutorials you must have seen me use <code>utcnow()</code> a lot, so I will clearly need to re-train myself to use an alternative, in preparation for the eventual removal of this function (likely a few years out, so no need to panic!).</p>
<p>In this short article I'll tell you more about why these functions are getting the axe, and what to replace them with.</p>
<h2>What's Wrong with utcnow() and utcfromtimestamp()?</h2>
<p>The problem that the Python maintainers have found comes from the fact that these functions return <a href="https://docs.python.org/3/library/datetime.html#aware-and-naive-objects">"naive" datetime objects</a>. A naive <code>datetime</code> object is one that does not have a timezone, which means that it can only be used in a context where the timezone does not matter or is already known in advance. This is in contrast to "aware" <code>datetime</code> objects, which do have a timezone attached to them explicitly.</p>
<p>If you ask me, I think the names of these functions are misleading. A function that is called <code>utcnow()</code> should be expected to return UTC datetimes, as implied by the name. I would have made it more clear that these functions work with naive time, maybe by calling them <code>naive_utcnow()</code> and <code>naive_utcfromtimestamp()</code>.</p>
<p>But their names are not the problem here. The specific issue is that some Python date and time functions accept naive timestamps and assume that they represent local time, according to the timezone that is configured on the computer running the code. There is a <a href="https://github.com/python/cpython/issues/81669">GitHub issue from 2019</a> that provides some background into this, with the following example:</p>
<pre><code class="language-python">&gt;&gt;&gt; from datetime import datetime
&gt;&gt;&gt; dt = datetime.utcfromtimestamp(0)
&gt;&gt;&gt; dt
datetime.datetime(1970, 1, 1, 0, 0)
&gt;&gt;&gt; dt.timestamp()
18000
</code></pre>
<p>The example above was executed on a computer that was configured for Eastern Standard Time (EST). First, <code>dt</code> is assigned a naive <code>datetime</code> that is converted from the "zero" time or <a href="https://en.wikipedia.org/wiki/Unix_time">UNIX epoch</a>, which is January 1st, 1970 at midnight.</p>
<p>When this object is converted back to a timestamp, the <code>dt.timestamp()</code> method finds that it does not have a timezone to use in the conversion, so it uses the computer's own timezone, which in this example was EST (note that the EST timezone is 5 hours, or 18,000 seconds behind UTC). So we have a UNIX timestamp that originated as midnight on January 1st, 1970, and after being converted to a <code>datetime</code> and back ends up as 5 am.</p>
<p>If you read the issue linked above, they suggest that this ambiguity did not exist in Python 2 and for that reason this was not a problem for a long time, but it now is and needs to be addressed. This sounded strange, so I had to go and check, and sure enough, the <code>timestamp()</code> method that returns the incorrect UNIX time in the example was introduced in Python 3.3 and nothing similar appears to have existed back in Python 2 times.</p>
<p>So basically, at some point they've added a <code>datetime.timestamp()</code> method (and possibly others as well) that accept both aware and naive datetimes and this was a mistake, because these methods must have a timezone to work.</p>
<p>These methods should have been designed to fail when a naive <code>datetime</code> object is passed to them, but for some strange reason they decided that when a timezone is not provided the timezone from the system should be used. This is really the bug, but instead of fixing the broken implementations of these methods they are now trying to force people to move to aware datetimes by deprecating the two main functions that generate naive ones. They think that because a few functions assume that naive timestamps represent local times, all naive uses that are not in local time should be discouraged.</p>
<p>I may be missing something here, but I don't really follow this logic.</p>
<h2>Do We Need Naive Datetimes Anyway?</h2>
<p>To me it is clear that the Python maintainers behind this deprecation have a problem with naive datetimes and are using this supposed problem as an excuse to cripple them.</p>
<p>So why would you want to work with naive datetimes in the first place?</p>
<p>An application may be designed in such a way that all dates and times are in a single timezone that is known in advance. In this case there is no need for individual <code>datetime</code> instances to carry their own timezones, since this uses more memory and processing power for no benefit, since all these timezones would be the same and it would never be necessary to perform timezone math or conversions.</p>
<p>This is actually very common in web applications or other types of networking servers, which are configured with <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">UTC</a> time and normalize all dates and times to this timezone when they enter the system. It is also a best practice to store naive datetimes representing UTC in databases. The <a href="https://docs.sqlalchemy.org/en/stable/core/type_basics.html#sqlalchemy.types.DateTime">DateTime</a> type in SQLAlchemy represents a naive <code>datetime</code> object by default, for example. This is such a common database pattern that SQLAlchemy provides a <a href="https://docs.sqlalchemy.org/en/20/core/custom_types.html#store-timezone-aware-timestamps-as-timezone-naive-utc">recipe</a> for applications that use aware <code>datetime</code> objects to convert these to and from naive ones on the fly as they are saved to or loaded from the database.</p>
<p>So yes, I expect naive <code>datetime</code> objects will continue to be used, in spite of these deprecations.</p>
<h2>Updating Your Code</h2>
<p>Even though the deprecations are disappointing, it is important to keep in mind that it may take a few years for the functions to actually be removed. The problem is that once you switch to Python 3.12 or newer you will start seeing deprecation messages on your console and your logs, and these can get annoying. Here is an example of what you can expect to see:</p>
<pre><code class="language-python">$ python
Python 3.12.0 (main, Oct  5 2023, 10:46:39) [GCC 11.4.0] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; from datetime import datetime
&gt;&gt;&gt; datetime.utcnow()
&lt;stdin&gt;:1: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
datetime.datetime(2023, 11, 18, 11, 22, 54, 263206)
</code></pre>
<p>I'm only using Python 3.12 in a small number of projects, and I'm already tired of seeing these warnings. So let's go ahead and look at how these two functions can be replaced.</p>
<p>The advice from the Python maintainers is to switch to aware <code>datetime</code> objects. The deprecation warning provides a hint of what they think we should use, and the deprecation notices included in the documentation are even more specific. Here is what the notice for the <code>utcnow()</code> function says:</p>
<blockquote>
<p>Deprecated since version 3.12: Use <code>datetime.now()</code> with <code>UTC</code> instead.</p>
</blockquote>
<p>Below you can see the one for <code>utcfromtimestamp()</code>:</p>
<blockquote>
<p>Deprecated since version 3.12: Use <code>datetime.fromtimestamp()</code> with <code>UTC</code> instead.</p>
</blockquote>
<p>So this gives us an idea of what can be done. Here are my custom versions of the deprecated functions, with the additional option to choose between aware or naive implementations:</p>
<pre><code class="language-python">from datetime import datetime, timezone

def aware_utcnow():
    return datetime.now(timezone.utc)

def aware_utcfromtimestamp(timestamp):
    return datetime.fromtimestamp(timestamp, timezone.utc)

def naive_utcnow():
    return aware_utcnow().replace(tzinfo=None)

def naive_utcfromtimestamp(timestamp):
    return aware_utcfromtimestamp(timestamp).replace(tzinfo=None)

print(aware_utcnow())
print(aware_utcfromtimestamp(0))
print(naive_utcnow())
print(naive_utcfromtimestamp(0))
</code></pre>
<p>Note that if you are using Python 3.11 or newer, you can replace <code>datetime.timezone.utc</code> with a shorter <code>datetime.UTC</code>.</p>
<p>Running this script I get the following results:</p>
<pre><code>2023-11-18 11:36:35.137639+00:00
1970-01-01 00:00:00+00:00
2023-11-18 11:36:35.137672
1970-01-01 00:00:00
</code></pre>
<p>You can tell that the first and second lines show aware <code>datetime</code> instances from the <code>+00:00</code> suffix that indicates that the timezone is 00:00 or UTC. The third and fourth lines show abstract timestamps without a timezone, fully compatible with those returned by the deprecated functions.</p>
<p>What I like about these implementations is that they give you the choice to work with or without timezones, removing any ambiguity. Explicit is better than implicit, as <a href="https://peps.python.org/pep-0020/">the old adage</a> says.</p></div>

<div class="card patreon-bar">
  <div class="card-body">
    <h5>Become a Patron!</h5>
    <p class="card-text">Hello, and thank you for visiting my blog! If you enjoyed this article, please consider supporting my work on this blog on <a href="https://patreon.com/miguelgrinberg">Patreon</a>!</p>
    <a href="https://patreon.com/miguelgrinberg" alt="Become a Patron!" title="Become a Patron!"><img src="../../../static/patreon-button.png"></a>
  </div>
</div>


<div class="card social-bar">
  <div class="card-body">
    <h5>Share this post:</h5>
      <!-- Sharingbutton Hacker News -->
      <a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=https%3A//blog.miguelgrinberg.com/post/it-s-time-for-a-change-datetime-utcnow-is-now-deprecated&amp;t=It%27s%20Time%20For%20A%20Change%3A%20datetime.utcnow%28%29%20Is%20Now%20Deprecated" target="_blank" rel="noopener" aria-label="Hacker News">
        <div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 140"><path fill-rule="evenodd" d="M60.94 82.314L17 0h20.08l25.85 52.093c.397.927.86 1.888 1.39 2.883.53.994.995 2.02 1.393 3.08.265.4.463.764.596 1.095.13.334.262.63.395.898.662 1.325 1.26 2.618 1.79 3.877.53 1.26.993 2.42 1.39 3.48 1.06-2.254 2.22-4.673 3.48-7.258 1.26-2.585 2.552-5.27 3.877-8.052L103.49 0h18.69L77.84 83.308v53.087h-16.9v-54.08z"></path></svg></div>Hacker News</div>
      </a>

      <!-- Sharingbutton Reddit -->
      <a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3A//blog.miguelgrinberg.com/post/it-s-time-for-a-change-datetime-utcnow-is-now-deprecated&amp;resubmit=true&amp;title=It's%20Time%20For%20A%20Change:%20datetime.utcnow()%20Is%20Now%20Deprecated" target="_blank" rel="noopener" aria-label="Reddit">
        <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96 0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65 0 3-1.35 3-3s-1.35-3-3-3c-1.38 0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65 0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66 0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64 0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4 0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6 0 .23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1 0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></div>Reddit</div>
      </a>

      <!-- Sharingbutton Twitter -->
      <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=It%27s%20Time%20For%20A%20Change%3A%20datetime.utcnow%28%29%20Is%20Now%20Deprecated&amp;url=https%3A//blog.miguelgrinberg.com/post/it-s-time-for-a-change-datetime-utcnow-is-now-deprecated" target="_blank" rel="noopener" aria-label="Twitter">
        <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div>Twitter</div>
      </a>

      <!-- Sharingbutton LinkedIn -->
      <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A//blog.miguelgrinberg.com/post/it-s-time-for-a-change-datetime-utcnow-is-now-deprecated&amp;title=It%27s%20Time%20For%20A%20Change%3A%20datetime.utcnow%28%29%20Is%20Now%20Deprecated&amp;summary=It%27s%20Time%20For%20A%20Change%3A%20datetime.utcnow%28%29%20Is%20Now%20Deprecated&amp;source=https%3A//blog.miguelgrinberg.com/post/it-s-time-for-a-change-datetime-utcnow-is-now-deprecated" target="_blank" rel="noopener" aria-label="LinkedIn">
        <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg></div>LinkedIn</div>
      </a>

      <!-- Sharingbutton Facebook -->
      <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3A//blog.miguelgrinberg.com/post/it-s-time-for-a-change-datetime-utcnow-is-now-deprecated" target="_blank" rel="noopener" aria-label="Facebook">
        <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div>Facebook</div>
      </a>

      <!-- Sharingbutton E-Mail -->
      <a class="resp-sharing-button__link" href="mailto:?subject=It%27s%20Time%20For%20A%20Change%3A%20datetime.utcnow%28%29%20Is%20Now%20Deprecated&amp;body=https%3A//blog.miguelgrinberg.com/post/it-s-time-for-a-change-datetime-utcnow-is-now-deprecated" target="_self" rel="noopener" aria-label="E-Mail">
        <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></div>E-Mail</div>
      </a>

  </div>
</div>

<div id="comments" class="post-comment-count">
  
  <a class="btn btn-outline-secondary" href="../../it-s-time-for-a-change-datetime-utcnow-is-now-deprecated.html#comments">28 comments</a>
  
</div>


<div class="comments">
  <ul>
    
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/5fa7995da0a33e2c6286f6fe734f39a5?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#1</span> <span class="badge text-bg-warning">Alex</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-19T13:43:31Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-19T13:43:31Z</span>
  </p>
  <div>
    <blockquote>
<p>This is actually very common in web applications or other types of networking servers, which are configured with UTC time and normalize all dates and times to this timezone when they enter the system. It is also a best practice to store naive datetimes representing UTC in databases.</p>
</blockquote>
<p>If you store "naive datetimes representing UTC" in your DB then doesn't that clash with Python's naive datetimes? Python's naive datetimes are usually assumed to represent local time rather than UTC, unless they come from these two funny functions. If all the times in your DB are in UTC then the right type to use in python is a datetime with datetime.UTC attached, not a naive one. Similarly, if you want to convert all times to UTC on the way into your web application as you say is best practice, then once you've done so the result should be a datetime with datetime.UTC attached not a naive one. (It may be the case that the whole webserver is configured to be in UTC time so these are more or less the same, but it's still better to be explicit just like it's better to encode all your text in UTF-8 instead of using the system locale.)</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#2</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-19T15:07:37Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-19T15:07:37Z</span>
  </p>
  <div>
    <p>@Alex: I get what you are saying, but the idea that naive datetimes represent local time is fairly recent, and only put to practice in a handful of functions. The Python 3.12 documentation has what I consider the correct definition for naive datetime objects:</p>
<blockquote>
<p>A naive object does not contain enough information to unambiguously locate itself relative to other date/time objects. Whether a naive object represents Coordinated Universal Time (UTC), local time, or time in some other timezone is purely up to the program, just like it is up to the program whether a particular number represents metres, miles, or mass. Naive objects are easy to understand and to work with, at the cost of ignoring some aspects of reality.</p>
</blockquote>
<p>So there is really no clash. As long as you know that you are working with naive datetimes and only perform operations that do not require knowing the timezone (which in my opinion is a pre-requisite to working with naive datetimes), there is absolutely no problem.</p>
<p>I can turn the argument around and say that it really makes no sense to use a naive datetime to represent a local time, since you can explicitly state that you want local time by storing the local timezone in the object. The footgun exists from both sides of the argument.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/3fe607771216e4c2ff89956c7271fb6a?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#3</span> <span class="badge text-bg-warning">Jeffry Babb</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-19T15:44:16Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-19T15:44:16Z</span>
  </p>
  <div>
    <p>Hmmm, I don't know, the very purpose of UTC is to create a reference, so a "naive" datetime should have always defaulted to UTC + 0.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#4</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-19T15:49:37Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-19T15:49:37Z</span>
  </p>
  <div>
    <p>@Jeffry: No, that was never the intention. There is already a way to represent UTC timestamps as aware datetimes, and that works well. A naive datetime does not specify a timezone. This works for applications that do not care about timezones, or for applications that know what timezone they want to use already.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/a556fb87f6d5954c976c1765ba25b89d?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#5</span> <span class="badge text-bg-warning">Caroline Smith</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-19T17:21:41Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-19T17:21:41Z</span>
  </p>
  <div>
    <p>You Python programmers don't know how good you've got it!</p>
<p>I'd love to only have to deal with "problems" like the one you're describing.</p>
<p>About six months ago, I was given some Rust software to maintain, and it has been one of the worst experiences of my professional life. Everything is a disaster, especially anything involving crates. So many of them are unmaintained, and so many of them are rubbish and full of bugs to begin with.</p>
<p>Even if Python has some legacy quirks, at least what's there is pretty darn good to begin with, and it's getting better and better with each new release.</p>
<p>Frankly, I'm about to rewrite this damn Rust software in Python, I'm that frustrated with how awful it is.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/6a3e61b699e6d5a8afc91c857dd99c56?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#6</span> <span class="badge text-bg-warning">Bolke</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-19T18:01:18Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-19T18:01:18Z</span>
  </p>
  <div>
    <p>The python datetimes where a mess to begin with and have been the culprit of many many many issues. Pytz made serious errors giving rise to Arrow and Pendulum. Naive objects should have never existed at all. "naive_utcnow" is an oxymoron. There is no such thing.</p>
<p>"An application may be designed in such a way that all dates and times are in a single timezone that is known in advance. In this case there is no need for individual datetime instances to carry their own timezones, since this uses more memory and processing power for no benefit, since all these timezones would be the same and it would never be necessary to perform timezone math or conversions."</p>
<p>I worked in Finance where people assumed this for payment systems. The mess that this has become when trying to reconcile when it became needed to a certain point in the future is incredible. DST settings and time zones change quite regularly. Imagine what this would mean for cutoff times. So if you have a naive 'local' datetime object and you saved that to naive UTC how do you get it back to the local time zone? Indeed you need to re-add timezone information.</p>
<p>"This is actually very common in web applications or other types of networking servers, which are configured with UTC time and normalize all dates and times to this timezone when they enter the system. It is also a best practice to store naive datetimes representing UTC in databases. The DateTime type in SQLAlchemy represents a naive datetime object by default, for example. This is such a common database pattern that SQLAlchemy provides a recipe for applications that use aware datetime objects to convert these to and from naive ones on the fly as they are saved to or loaded from the database."</p>
<p>The pattern is to only provide time zone aware datetimes where the user requires them, everywhere else it should  be in UTC. So if you have an app in front of your database you can store datetimes in a naive format as long you are absolutely certain all your datetimes get transposed to UTC. Guess what: your databases doesn't do the conversion for you if the field is naive so your application needs to do so.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/894592592c92e09dc259e04698c1458e?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#7</span> <span class="badge text-bg-warning">Julien Deniau </span> said
    
    <span class="flask-moment" data-timestamp="2023-11-19T18:19:26Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-19T18:19:26Z</span>
  </p>
  <div>
    <p>The problem with naive timezone (as I understand in Python) is that people might use it not knowing what they are really working with, just because it's easy. <br>
But first of all, the name is misleading (as you do not get UTC). There is a obviously a problem when you change the timezone, and there will probably be a problem with DST too : what is the real time point of a naive date between 2 and 3 the date you go back from summer time to winter time? </p>
<p>As you, and the old adage say:</p>
<blockquote>
<p>Explicit is better than implicit</p>
</blockquote>
<p>I totally agree with you on that one! </p>
<p>The problem is fairly complex, I even made a conference on the timezone subject (and learned a lot preparing it 🤯)</p>
<p>Thank you for your blog post, it does spread the time problem to everyone 👍</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/bbb8f78eaefbd049d7aa72ada5e29aff?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#8</span> <span class="badge text-bg-warning">Anon 1700418279</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-19T18:27:50Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-19T18:27:50Z</span>
  </p>
  <div>
    <p>Hey Miguel 👋, would you mind to point a resource or link, in case you know, where is explained why python took the design decision to implement naive datetime using local timezone instead of UTC, I'm just curious. Thanks for the amazing and useful article.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/7251443a2008c3b3c3b7d55416e54915?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#9</span> <span class="badge text-bg-warning">Jonas L. B.</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-19T20:40:16Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-19T20:40:16Z</span>
  </p>
  <div>
    <p>It's not true that it's a "fairly recent" change to have naive timestamps represent local time. Might be a difference between Python 2 and 3, but that's ancient times, not recent times. </p>
<p>You can also look at the real world - eg. look at your wall clock, your task bar, or the "departures" board of your local train station. You'll see naive times that you can assume to be local time. This isn't some obscene idea that the Python devs came up with - it's literally how the world works.<br>
It's also e.g. specified in ISO8601 that if no timezone it in a timestamp, then it's "local time".</p>
<p>It's ok though, to have an in-database or in-memory representation that works differently. You can make your own rules for internal representation. But it makes good sense for the Python datetime API to work the way it does, considering that e.g. <code>hour</code> and <code>minute</code> are public attributes, and these make absolutely no sense without timezone information.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#10</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-19T23:50:50Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-19T23:50:50Z</span>
  </p>
  <div>
    <p>@Bolke: I'm confused about the point you are trying to make. I'm not against aware datetimes, you do not have to sell them to me. I also have no problem if you think that naive datetimes are problematic.</p>
<blockquote>
<p>I worked in Finance where people assumed this for payment systems.</p>
</blockquote>
<p>Okay. So this isn't one of those applications for which naive datetimes are good. I never said naive datetimes should be used by every application. But you seem to be saying that nobody should use naive datetimes?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#11</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-19T23:54:06Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-19T23:54:06Z</span>
  </p>
  <div>
    <p>@Anon: I have no idea. The documentation disagrees with this. Here is the definition of naive datetimes in Python 3.12's docs:</p>
<blockquote>
<p>A naive object does not contain enough information to unambiguously locate itself relative to other date/time objects. Whether a naive object represents Coordinated Universal Time (UTC), local time, or time in some other timezone is purely up to the program, just like it is up to the program whether a particular number represents metres, miles, or mass. Naive objects are easy to understand and to work with, at the cost of ignoring some aspects of reality.</p>
</blockquote>
<p>The new interpretation of naive datetimes is something that must have grown organically and was never officially documented, at least not yet.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#12</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-20T00:05:19Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-20T00:05:19Z</span>
  </p>
  <div>
    <p>@Jonas:</p>
<blockquote>
<p>It's not true that it's a "fairly recent" change to have naive timestamps represent local time.</p>
</blockquote>
<p>It's recent enough that this interpretation of what a naive datetime represents hasn't been documented yet. I copied it a few times already, but here it is once again, from the 3.12 documentation:</p>
<blockquote>
<p>A naive object does not contain enough information to unambiguously locate itself relative to other date/time objects. Whether a naive object represents Coordinated Universal Time (UTC), local time, or time in some other timezone is purely up to the program, just like it is up to the program whether a particular number represents metres, miles, or mass. Naive objects are easy to understand and to work with, at the cost of ignoring some aspects of reality.</p>
</blockquote>
<p>So you can't really say that naive datetimes are intended to be local time when the docs say otherwise, right?</p>
<blockquote>
<p>But it makes good sense for the Python datetime API to work the way it does</p>
</blockquote>
<p>What do you mean? You do realize that the datetime API does not work in the way you are describing, and not even the documentation agrees with you? The datetime API is a mess with all of its inconsistencies. So I do not really understand why you are putting it as some sort of example. The reality is that we are having these discussions because of how bad the design of this API is.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/fc908a4e72bde059a21e6e7f7b606c8a?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#13</span> <span class="badge text-bg-warning">Gasper</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-20T08:25:14Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-20T08:25:14Z</span>
  </p>
  <div>
    <p>Hey!</p>
<p>The problem with timezones is that they are not related to time, but to jurisdiction, which is most commonly a country.</p>
<p>UTC is a "jurisdictionless" time zone - no country is assigned UTC as its time zone, as it does not have control over it. This also means having timestamps in UTC is usually a sane thing to do, since all the other time zones are referenced to UTC, and converting from UTC to any time zone is only one step.</p>
<p>Unfortunately, at over 200 contries in the world today, this means there is high probability that one jurisdiction will decide to change its time zone. Thus, you need to update tzinfo regularly. </p>
<p>Even when tzinfo is updated, there are caveats with using UTC. Timestamps are only really valid for past time, not future, as if you have a calendar app and take your inputs in local timestamps, store them as UTC, and if you later display them in an updated local time zone, the hours might mismatch.</p>
<p>I think that most of the use cases are probably better served by timestamps in UTC than anything else.</p>
<p>Modelling time is hard. :D</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/0caf2b724dbb4ff0c97cc9e7e3f61a9f?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#14</span> <span class="badge text-bg-warning">Arvid</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-20T13:31:33Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-20T13:31:33Z</span>
  </p>
  <div>
    <p>I have historically used the distinction between naive and aware datetime objects as a means to enforce discipline: with a naive object there is no chance that anyone will forget that you must store/query the location meta-data in order to get/preserve the correct local time. With timezone-aware objects people get sloppy and start assuming that "someone else", "somewhere else" has handled this.</p>
<p>My experience is that if you really care about datetime being both correct and appropriate, just putting timezones on timestamps is not good enough. You need to maintain control and allow overrides at a more detailed level. Countries declare tz-changes with extremely short notice. Important customers (large corporations) decide to simply not accept certain time changes made by foreign governments under certain periods. Airports stay in the same place but change countries/state from one day to another and with that their timezone.</p>
<p>Having spent a lot of time with Python code where we <em>really</em> care about timezones, the only option has always been to use UTC everywhere combined with fine-grained location identifiers. The location identifiers combined with the UTC timestamps are turned into UTC-offsets via lookups at runtime. 99.5% of the time this gives the same result as having just slapped an EST or CET or whatever suffix onto the original datetime object, but those last 0.5% are important to some people, sometimes.</p>
<p>All that said; it will probably be fine with mandatory timezone attribute on datetime objects. One can write linter tools to catch non-UTC timezones being used/imported, if one cares about not having them.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/63661806dd91467312376f188b4d1b2d?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#15</span> <span class="badge text-bg-warning">Nick</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-20T23:43:08Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-20T23:43:08Z</span>
  </p>
  <div>
    <p>Regardless of how <em>you think</em> naive datetimes should work, or whether there is any written rule about how they work, de facto they are treated like local timestamps by several functions in datetime, and so <code>utcnow</code> and <code>fromutctimestamp</code> don't do what they say. This is extremely confusing even when you already know about it. I consult the docs for datetime probably more than any other module.</p>
<p>So, as Python, you can either deprecate the functions that do not do what they say or intruduce a breaking changes across the entire module to change the de facto behaviour of the thing that has been the de-facto behaviour for at least a decade. Remember the last time Python introduced breaking changes?</p>
<p>Arguably this is all moot to me though because the moment you care about the fact that your times are in UTC, you by definition care about timezone information and should be explicit. Sort of as an aside, people care about timezone information more often than they naively (ha) think they do.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#16</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-21T11:04:19Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-21T11:04:19Z</span>
  </p>
  <div>
    <p>@Nick: I can apply the same argument to your side by swapping <code>utcnow()</code> and <code>fromutctimestamp()</code> with <code>timestamp()</code>. All these functions do something that is unexpected, and all these functions explain what they do that is unexpected in the documentation. The same argument that you are making against storing UTC in naive datetimes can be made against storing local time in naive datetimes.</p>
<blockquote>
<p><code>utcnow</code> and <code>fromutctimestamp</code> don't do what they say</p>
</blockquote>
<p>The <code>timestamp</code> method doesn't do what it says either! How can you tell that <code>dt.timestamp()</code> uses local time? That makes no sense either. All these functions do something you don't expect, and they all explain what this is in the documentation.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/afea4b1c1abb6e0892064aa3ab791b66?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#17</span> <span class="badge text-bg-warning">taion</span> said
    
    <span class="flask-moment" data-timestamp="2023-11-26T17:57:59Z" data-function="fromNow" data-refresh="0" style="display: none">2023-11-26T17:57:59Z</span>
  </p>
  <div>
    <p>Naive DTs in non-UTC time zones are a huge footgun, though, due to their interaction with DST and the inability to distinguish timestamps around the jump and the oddness of timedelta math when those show up. I guess they’re fine if you’re in UTC, but you’re vulnerable to really painful edge cases otherwise.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/3ad0291c36cb579b1722a268bd426c17?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#18</span> <span class="badge text-bg-warning">Adam L</span> said
    
    <span class="flask-moment" data-timestamp="2024-01-09T00:24:27Z" data-function="fromNow" data-refresh="0" style="display: none">2024-01-09T00:24:27Z</span>
  </p>
  <div>
    <p>Naive datetimes are important to me, as I have two different applications that need to always reflect the  original input to the in user, regardless of what time they are in.</p>
<p>If an event is taking place at a location at 10pm, I can't have this value being adjusted, just because the user is querying from a different time zone. The naive solution works perfectly and is a lot more sensible than saving and juggling timezones to make sure the right data is being delivered.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/a4bcad8b590073dd8ecdcd2d946bb5d9?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#19</span> <span class="badge text-bg-warning">kion</span> said
    
    <span class="flask-moment" data-timestamp="2024-01-15T11:21:34Z" data-function="fromNow" data-refresh="0" style="display: none">2024-01-15T11:21:34Z</span>
  </p>
  <div>
    <p>In SQLAlchemy, I have a lot of timestamp columns that are defaulting to "datetime.utcnow", should I default to "lambda: datetime.now(UTC)" instead now?</p>
<p>I also wonder if this change has other implications in SQLAlchemy</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#20</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2024-01-15T12:03:34Z" data-function="fromNow" data-refresh="0" style="display: none">2024-01-15T12:03:34Z</span>
  </p>
  <div>
    <p>@kion: If you don't mind the deprecation warning then you don't have to change anything. If you want to stop seeing the warning, then yes, change to the timezone-aware format. The database will still record a native timestamp, as far as I recall most if not all databases store naive timestamps.</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/565aeb8f7f131b9495a7d810040be148?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#21</span> <span class="badge text-bg-warning">Martin</span> said
    
    <span class="flask-moment" data-timestamp="2024-01-27T04:19:22Z" data-function="fromNow" data-refresh="0" style="display: none">2024-01-27T04:19:22Z</span>
  </p>
  <div>
    <p>Clearly it should have been that presenting no timezone defaults to UTC and also having naive timestamps be generated the same in all computers, that is, in UTC. </p>
<p>Maybe the problem with that was simply that "hey let's have another utcnow that actually gives you an utc timestamp" would be too confusing</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/91135125e9459b9fcbec5d1bf034ffe0?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#22</span> <span class="badge text-bg-warning">Andy Pearce</span> said
    
    <span class="flask-moment" data-timestamp="2024-06-08T20:35:32Z" data-function="fromNow" data-refresh="0" style="display: none">2024-06-08T20:35:32Z</span>
  </p>
  <div>
    <p>I'm a little puzzled why you feel that aware datetime objects are an issue in cases where the timezone is known in advance. If the code is aware of the timezone, then it can set it on the object trivially, and the aware datetime then has the same functionality as the naive object, except that you won't suffer the risk of incorrect behaviour apply deltas around DST changes (not applicable for UTC, of course), and you won't run the risk of accidentally merging naive datetimes from external sources. As you mentioned, explicit is better than implicit.</p>
<p>In a case where a datetime is stored in a DB, either the type of the column is timezone aware of it's not. If it is, the aware object is what you want, to make sure the correct timezone is stored—if that's UTC everywhere, no problem, it's UTC that'll be stored. If the column is not timezone aware, then the timezone from the aware datetime will just be dropped anyway.</p>
<p>Personally I think this is very comparable the way Python used to have unicode and string objects, and eventually strings were deprecated because there's really no excuse for code not to handle Unicode properly. Similarly with timezones—if a developer knows about timezones, and knows that they're all UTC in that particular code, they can set the timezone in their aware datetimes with trivial effort and it's all good. If a developer is ignorant of timezones, the fact that the Python APIs will make their like awkward is a good push that they really can't afford to be ignorant of such things (just like they can't afford to be ignorant of unicode encoding/decoding).</p>
<p>In short, I think it's the right step. Python has always been somewhat opinionated on certain things, Unicode support being one of them, and now timezones are as well. But it's just my view, of course!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#23</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2024-06-08T23:22:52Z" data-function="fromNow" data-refresh="0" style="display: none">2024-06-08T23:22:52Z</span>
  </p>
  <div>
    <p>@Andy: I really have no problem if you think that all use cases should use aware datetime objects. I'm not in the business of telling others how they should do their work and if aware everywhere works for you, then great. But here you (and many others) feel they know better and have to tell me how I should do mine.</p>
<blockquote>
<p>If the code is aware of the timezone, then it can set it on the object trivially</p>
</blockquote>
<p>It can set it "trivially" in every single place naive datetime objects enter the system, which can be many. Like every place a datetime is loaded from a database or ORM, which more than likely uses naive time. If I don't need a timezone, then why should I set it everywhere?</p>
<blockquote>
<p>and the aware datetime then has the same functionality as the naive object, except that you won't suffer the risk of incorrect behaviour apply deltas around DST changes (not applicable for UTC, of course),</p>
</blockquote>
<p>I'm confused. What risk of incorrect behavior do you mean here? You have to believe me when I tell you that I know what I'm doing. If I use a naive timestamp it is because that is what I need. If I needed DST logic I wouldn't use a naive object.</p>
<blockquote>
<p>and you won't run the risk of accidentally merging naive datetimes from external sources.</p>
</blockquote>
<p>Clearly you are seeing naive datetimes as bad. As I said above, I know what I'm doing, I don't need to be protected against "risks" as you call them.</p>
<blockquote>
<p>In a case where a datetime is stored in a DB, either the type of the column is timezone aware of it's not. If it is, the aware object is what you want, to make sure the correct timezone is stored</p>
</blockquote>
<p>Aware timezones in a database doesn't make a lot of sense. Happy to be corrected on this, but I don't believe there are databases that support this. Some databases normalize all timestamps to UTC, others just ignore the timezone and assume naive timestamps.</p>
<blockquote>
<p>If the column is not timezone aware, then the timezone from the aware datetime will just be dropped anyway.</p>
</blockquote>
<p>It will be dropped when the data enters the database. You will need to add it back every time one of these is loaded back into the application, which is highly inconvenient.</p>
<blockquote>
<p>Personally I think this is very comparable the way Python used to have unicode and string objects, and eventually strings were deprecated because there's really no excuse for code not to handle Unicode properly.</p>
</blockquote>
<p>Again you are confusing me. Back in 2.7 days there was unicode and non-unicode strings and there was also bytes, which were pretty much the same as the non-unicode strings. Python 3 clarified this, and now strings are unicode, and bytes are non-unicode, so everything is simpler and I can easily choose which type of string I want to use, since both are equally well supported. How is this comparable to your suggesting that people should always use aware datetimes? Or are you suggesting that you also think people should never use bytes?</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/91135125e9459b9fcbec5d1bf034ffe0?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#24</span> <span class="badge text-bg-warning">Andy Pearce</span> said
    
    <span class="flask-moment" data-timestamp="2024-06-10T09:38:21Z" data-function="fromNow" data-refresh="0" style="display: none">2024-06-10T09:38:21Z</span>
  </p>
  <div>
    <p>I appreciate your detailed reply. First and foremost, I don't think it's a <em>major</em> deal either way whether better support for naive datetimes is maintained—it's fairly minor in the scheme of things. But I am a strong believer in not allowing APIs to just accrue endlessly, or you create a maintainability burden, both for language maintainers and developers. Every module, every class and every function carries a cost—not just in maintenance, but in cognitive load on developers. As an aside, John Ousterhout does an excellent job of explaining this in his book <em>A Philosophy of Software Design</em>.</p>
<p>This is why I think it's always reasonable to expect to be able to justify the inclusion of every class and function within the standard library. I'm suggesting that you dispute this, I have no way to tell, I'm just providing context why I think it's right that the language maintainers continually look for opportunities to deprecate under-used code—the question is what's underused.</p>
<blockquote>
<p>It can set it "trivially" in every single place naive datetime objects enter the system, which can be many. Like every place a datetime is loaded from a database or ORM, which more than likely uses naive time. If I don't need a timezone, then why should I set it everywhere?</p>
</blockquote>
<p>When it's just a case of adding <code>from datetime import UTC</code> at the start of your file, and adding <code>tz=UTC</code> or similar to the function calls, then this is essentially zero cost when writing new code. It's just one of those habits you get into, like adding <code>decode('utf-8')</code> when reading bytes from a file (obviously if your code needs to handle more encodings, this is less of a habit and becomes more of a real feature, but a lot of application code can just assume UTF-8).</p>
<blockquote>
<p>You have to believe me when I tell you that I know what I'm doing.</p>
</blockquote>
<p>This is the crux of it, though—a lot of people who use Python don't necessarily fully appreciate the nuances. So language designers have a choice: how easy do they make it to shoot yourself in the foot? Too easy, and the experts will be fine but the beginners will have a heck of a time. Too hard, and the experts will be unable to do what they want. In this case the reason I think the balance is fine is because a naive datetime can trivially be replaced with an aware datetime in UTC with, as far as I can tell, no loss of functionality, so this doesn't seem unreasonable if it helps people who are less expert do the right thing.</p>
<p>This balance is inherently subjective, however, and you may feel differently—I'm just explaining my view.</p>
<blockquote>
<p>Clearly you are seeing naive datetimes as bad.</p>
</blockquote>
<p>Nothing is "bad", but some things are more likely to trip up more developers than other things. I started writing my career writing C and assembler, doing manual memory management and static casts all over the place—this isn't "bad", but a lot of developers these days, used to ref counting and GC, would struggle to avoid bugs whilst using it. Even "goto" isn't "bad", it can be used quite effectively in C where you'd use exceptions in a language which supports them. But it's definitely got its risks.</p>
<p>That said, the fact that Python (rightly) forbids mixing of naive and aware datetimes in an operation does reduce the risks. But I believe for less experienced developers, consistent use of aware datetimes reduces the chances for errors. That's all.</p>
<blockquote>
<p>Aware timezones in a database doesn't make a lot of sense. Happy to be corrected on this, but I don't believe there are databases that support this. Some databases normalize all timestamps to UTC, others just ignore the timezone and assume naive timestamps.</p>
</blockquote>
<p>Depends what you mean. Many databases will store timestamps in UTC, but will support the option of storing a timezone with it, so I'd expect the library to yield timezone-aware types. You can see <a href="https://www.psycopg.org/docs/usage.html#time-zones-handling" rel="nofollow">an example in the Psycopg library</a>.</p>
<p>I'm a firm believer in UTC everywhere if you just want to record the moment something happened—event logs, audit trails, etc. But there are times where you're not in control of the timezone, such as with user input—in these cases losing the timezone can break the functionality. For example, I've worked on code where users can schedule something to happen at a certain time (once or recurring), and they can set the timezone as part of this input. They're free to choose UTC, of course, but if they don't then they do expect it to respect DST changes. If the DB only supported naive timestamps then we could add this ourselves, of course, but why not use the feature that's there?</p>
<blockquote>
<p>Or are you suggesting that you also think people should never use bytes?</p>
</blockquote>
<p>No, I'm suggesting that the difference between them should be clear. In 2.x it was always a bit blurry—people would use str when they wanted to store actual text, and they'd be under the impression this was fine. And it was—until someone from another country tried to use their code.</p>
<p>Now things are clearer, and APIs can require a unicode object, but file APIs can return bytes—this makes it explicit to the developer that they need to consider encodings. It might be an unknown to them, but at least it becomes a known unknown.</p>
<p>I don't think the datetime issue is the same importance as this, but I view it similarly. If you're calling utcnow() then you want a UTC datetime, so really it should return an aware datetime with UTC attached—at least that's what some might expect. It's more harmful to change the long-standing result of the function, however, as that would silently break code, so deprecation is the next best thing—it noisily breaks code.</p>
<p>As you've already mentioned, naive datetimes still exist, and you can still construct them easily enough—it's just that the potentially confusing utc-variant functions are gone, so you need to be more explicit about what you want to do. This is why I used the unicode example—bytes still exists, but the operations which support bytes and unicode are more explicitly divided.</p>
<p>Perhaps it would have been better to avoid all of this problem by having datetime always be naive, and a separate datetimetz time for aware datetimes. But clearly the breakage of that change would be pretty great, so I don't see that happening.</p>
<p>Anyway, that's a long screed so I'll wrap up. But a lot of this is subjective, of course, like many language design choices. I see your points, I think I just take a slightly different view on whether languages should just assume you're always an expert. As I mentioned earlier this is an opinion, and I don't expect everyone to hold the same one, of course!</p>
<p>Either way, it's great that people like you write helpful articles like this to help people work around these issues, whether or not they agree with the reasons for them!</p>
  </div>
</div>
    </li>
    
    <li>
      <div class="comment-thumbnail"><img class="rounded" src="https://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&amp;d=identicon"></div>
<div class="comment-body">
  
  <p>
    
    <span class="badge bg-secondary">#25</span> <span class="badge text-bg-danger">Miguel Grinberg</span> said
    
    <span class="flask-moment" data-timestamp="2024-06-10T23:15:14Z" data-function="fromNow" data-refresh="0" style="display: none">2024-06-10T23:15:14Z</span>
  </p>
  <div>
    <p>@Andy: I don't think it is necessary for me to respond to every comment or idea in your reply. Clearly we have to agree to disagree. But I'll just respond to a couple:</p>
<blockquote>
<p>This is the crux of it, though—a lot of people who use Python don't necessarily fully appreciate the nuances. So language designers have a choice: how easy do they make it to shoot yourself in the foot?</p>
</blockquote>
<p>Okay, so this is really the issue, in your view? What I see is that many years ago the language designers chose the name "utcnow()" for a function that does not return timezone aware datetimes. That is a mistake, this is a really bad name for this function. The correct fix would be to change the name to something more indicative of what the function does, not to tell me I shouldn't use or want to use naive datetimes.</p>
<p>You may not be able to see this, but crippling the library because beginners may have trouble with it is not very inspiring. I would have preferred it if they have reorganized the functionality and made it more clear to use, for both beginners and experienced developers alike.</p>
<blockquote>
<p>Depends what you mean. Many databases will store timestamps in UTC, but will support the option of storing a timezone with it, so I'd expect the library to yield timezone-aware types. You can see an example in the Psycopg library.</p>
</blockquote>
<p>Have you worked with Postgres? The documentation you are reading is confusing, I recommend you review the Postgres official docs if you want to learn how things work. The default datetime type in Postgres is naive (as required by the SQL standard). If you ask Postgres for a datetime with timezone it will accept your aware timestamps, but it will convert them to UTC and then drop the timezone before storing them. When you read one of these supposedly timezone aware columns, Postgres converts them to a timezone you configure for the session.</p>
<p>As I said in my previous response, I don't mind to be corrected on this, but I believe most databases do not store timezones. </p>
<blockquote>
<p>If the DB only supported naive timestamps then we could add this ourselves, of course, but why not use the feature that's there?</p>
</blockquote>
<p>I really do not know how to answer this. As I said above, databases do not support timezones in the way you seem to think they do.</p>
<blockquote>
<p>As you've already mentioned, naive datetimes still exist, and you can still construct them easily enough</p>
</blockquote>
<p>Not really. The only way to get the functionality of <code>utcnow()</code> without using deprecated functions is to construct an aware datetime, then delete the timezone from it. Like yourself, the people who decided to go about this problem in this way have a problem with naive datetimes and are unable or unwilling to accept it. If solving this problem would have fallen on me, I would not have removed any functionality from the library. I would have still deprecated <code>utcnow()</code>, but would have created a replacement with a more accurate name. And I would also have deprecated all the library functions that accept naive timestamps and assume they use the local timezone, which is the largest mistake of all in this situation.</p>
  </div>
</div>
    </li>
    
  </ul>
</div>

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item disabled"><a class="page-link" href="1.html#comments">&laquo;&laquo;</a></li>
    <li class="page-item disabled"><a class="page-link" href="0.html#comments">&laquo;</a></li>
    <li class="page-item"><a class="page-link" href="2.html#comments">&raquo;</a></li>
    <li class="page-item"><a class="page-link" href="0.html#comments">&raquo;&raquo;</a></li>
  </ul>
</nav>



<div id="comment-form">
  <h3>Leave a Comment</h3>

  
  
  

  
<form action="#comment-form" method="post">
  <input id="url" name="url" type="hidden" value="">
<input id="csrf_token" name="csrf_token" type="hidden" value="IjQyYjY5YzZlNTcyYjFkMTVlZGRkOWJjYjA3ZmFlYWFiNTg3YmU5ODki.Zxdy7A.bN1Orf7gzohXMPJKDhOFFmo2XUM">
    
  <div class="mb-3">
    <label class="form-label" for="name">Name</label>
    <div class="input-group has-validation">
      <input class="form-control" id="name" name="name" required type="text" value="">
    </div>
  </div>

    
    
  <div class="mb-3">
    <label class="form-label" for="email">Email</label>
    <div class="input-group has-validation">
      <input class="form-control" id="email" name="email" required type="text" value="">
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="comment">Comment</label>
    <div class="input-group has-validation">
      <textarea class="form-control" id="comment" name="comment" required>
</textarea>
    </div>
  </div>

    
  <div class="mb-3">
    <label class="form-label" for="captcha">Captcha</label>
    <div class="input-group has-validation">
      
<script src='https://www.google.com/recaptcha/api.js' async defer></script>
<div class="g-recaptcha" data-sitekey="6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S"></div>

    </div>
  </div>

    
  <input class="btn btn-primary mb-3" id="submit" name="submit" type="submit" value="Submit">

      
</form>

</div>


</div>

      </div>
    </div>
    
    <div class="col-md-4">
      <div id="sidebar">
        
          
  



<div class="card">
  
  
  <div class="card-header">Flask Web Development, 2nd Edition</div>
  <a class="card-book-cover" href="https://amzn.to/3lE2mok">
    <img src="../../../static/flask2e-book-cover-small.png" alt="Flask Web Development, 2nd Edition">
  </a>
  <div class="card-body">
    <p class="card-text">If you want to learn modern web development techniques with Python and Flask, you may find the second edition of my <a href="https://amzn.to/3lE2mok">O'Reilly book</a> useful.</p>
  </div>
  <div class="card-body">
    <a class="card-link" href="https://amzn.to/3lE2mok">Click here to get this Book!</a><br />
  </div>

  
</div>
        
        <div class="card">
  <div class="card-header">About Miguel</div>
  <div class="card-body">
    <img style="float: right; margin: 0px 8px 8px 0px; padding: 4px; border: 1px solid #ccc;" src="../../../static/miguel.jpg" />
    <p class="card-text">Welcome to my blog!</p>
    <p class="card-text">I'm a software engineer and technical writer, currently living in Drogheda, Ireland.</p>
    <p class="card-text">You can also find me on <a href="https://twitter.com/miguelgrinberg">Twitter</a>, <a href="https://mstdn.social/@miguelgrinberg">Mastodon</a>, <a href="https://github.com/miguelgrinberg">Github</a>, <a href="http://www.linkedin.com/in/miguelgrinberg">LinkedIn</a>, <a href="https://youtube.com/miguelgrinberg">YouTube</a>, <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a> and <a href="https://patreon.com/miguelgrinberg">Patreon</a>.</p>
    <p class="card-text">Thank you for visiting!</p>
  </div>
</div>
        
        <div class="card" id="categories">
  <div class="card-header">Categories</div>
  <div class="card-body">
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AI/feed"><img src="../../../static/rss-small.png" title="AI RSS Feed" label="AI RSS Feed" alt="AI RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AI" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AI" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/AWS/feed"><img src="../../../static/rss-small.png" title="AWS RSS Feed" label="AWS RSS Feed" alt="AWS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/AWS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="AWS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Arduino/feed"><img src="../../../static/rss-small.png" title="Arduino RSS Feed" label="Arduino RSS Feed" alt="Arduino RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Arduino" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Arduino" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Authentication/feed"><img src="../../../static/rss-small.png" title="Authentication RSS Feed" label="Authentication RSS Feed" alt="Authentication RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Authentication" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Authentication" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Blog/feed"><img src="../../../static/rss-small.png" title="Blog RSS Feed" label="Blog RSS Feed" alt="Blog RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Blog" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Blog" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/C++/feed"><img src="../../../static/rss-small.png" title="C++ RSS Feed" label="C++ RSS Feed" alt="C++ RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/C++" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="C++" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/CSS/feed"><img src="../../../static/rss-small.png" title="CSS RSS Feed" label="CSS RSS Feed" alt="CSS RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/CSS" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="CSS" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Cloud/feed"><img src="../../../static/rss-small.png" title="Cloud RSS Feed" label="Cloud RSS Feed" alt="Cloud RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Cloud" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Cloud" /> <small><em>10</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Database/feed"><img src="../../../static/rss-small.png" title="Database RSS Feed" label="Database RSS Feed" alt="Database RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Database" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Database" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Docker/feed"><img src="../../../static/rss-small.png" title="Docker RSS Feed" label="Docker RSS Feed" alt="Docker RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Docker" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Docker" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Filmmaking/feed"><img src="../../../static/rss-small.png" title="Filmmaking RSS Feed" label="Filmmaking RSS Feed" alt="Filmmaking RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Filmmaking" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Filmmaking" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Flask/feed"><img src="../../../static/rss-small.png" title="Flask RSS Feed" label="Flask RSS Feed" alt="Flask RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Flask" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Flask" /> <small><em>126</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Games/feed"><img src="../../../static/rss-small.png" title="Games RSS Feed" label="Games RSS Feed" alt="Games RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Games" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Games" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Heroku/feed"><img src="../../../static/rss-small.png" title="Heroku RSS Feed" label="Heroku RSS Feed" alt="Heroku RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Heroku" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Heroku" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/IoT/feed"><img src="../../../static/rss-small.png" title="IoT RSS Feed" label="IoT RSS Feed" alt="IoT RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/IoT" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="IoT" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/JavaScript/feed"><img src="../../../static/rss-small.png" title="JavaScript RSS Feed" label="JavaScript RSS Feed" alt="JavaScript RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/JavaScript" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="JavaScript" /> <small><em>35</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/MicroPython/feed"><img src="../../../static/rss-small.png" title="MicroPython RSS Feed" label="MicroPython RSS Feed" alt="MicroPython RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/MicroPython" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="MicroPython" /> <small><em>9</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microdot/feed"><img src="../../../static/rss-small.png" title="Microdot RSS Feed" label="Microdot RSS Feed" alt="Microdot RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microdot" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microdot" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Microservices/feed"><img src="../../../static/rss-small.png" title="Microservices RSS Feed" label="Microservices RSS Feed" alt="Microservices RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Microservices" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Microservices" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Movie Reviews/feed"><img src="../../../static/rss-small.png" title="Movie Reviews RSS Feed" label="Movie Reviews RSS Feed" alt="Movie Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Movie Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Movie Reviews" /> <small><em>5</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/OpenStack/feed"><img src="../../../static/rss-small.png" title="OpenStack RSS Feed" label="OpenStack RSS Feed" alt="OpenStack RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/OpenStack" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="OpenStack" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Personal/feed"><img src="../../../static/rss-small.png" title="Personal RSS Feed" label="Personal RSS Feed" alt="Personal RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Personal" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Personal" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Photography/feed"><img src="../../../static/rss-small.png" title="Photography RSS Feed" label="Photography RSS Feed" alt="Photography RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Photography" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Photography" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Product Reviews/feed"><img src="../../../static/rss-small.png" title="Product Reviews RSS Feed" label="Product Reviews RSS Feed" alt="Product Reviews RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Product Reviews" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Product Reviews" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Programming/feed"><img src="../../../static/rss-small.png" title="Programming RSS Feed" label="Programming RSS Feed" alt="Programming RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Programming" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Programming" /> <small><em>187</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Project Management/feed"><img src="../../../static/rss-small.png" title="Project Management RSS Feed" label="Project Management RSS Feed" alt="Project Management RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Project Management" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Project Management" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Python/feed"><img src="../../../static/rss-small.png" title="Python RSS Feed" label="Python RSS Feed" alt="Python RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Python" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Python" /> <small><em>169</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/REST/feed"><img src="../../../static/rss-small.png" title="REST RSS Feed" label="REST RSS Feed" alt="REST RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/REST" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="REST" /> <small><em>7</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Rackspace/feed"><img src="../../../static/rss-small.png" title="Rackspace RSS Feed" label="Rackspace RSS Feed" alt="Rackspace RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Rackspace" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Rackspace" /> <small><em>1</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Raspberry Pi/feed"><img src="../../../static/rss-small.png" title="Raspberry Pi RSS Feed" label="Raspberry Pi RSS Feed" alt="Raspberry Pi RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Raspberry Pi" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Raspberry Pi" /> <small><em>8</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/React/feed"><img src="../../../static/rss-small.png" title="React RSS Feed" label="React RSS Feed" alt="React RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/React" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="React" /> <small><em>18</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Robotics/feed"><img src="../../../static/rss-small.png" title="Robotics RSS Feed" label="Robotics RSS Feed" alt="Robotics RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Robotics" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Robotics" /> <small><em>6</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Security/feed"><img src="../../../static/rss-small.png" title="Security RSS Feed" label="Security RSS Feed" alt="Security RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Security" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Security" /> <small><em>12</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Video/feed"><img src="../../../static/rss-small.png" title="Video RSS Feed" label="Video RSS Feed" alt="Video RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Video" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Video" /> <small><em>22</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/WebSocket/feed"><img src="../../../static/rss-small.png" title="WebSocket RSS Feed" label="WebSocket RSS Feed" alt="WebSocket RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/WebSocket" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="WebSocket" /> <small><em>2</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Webcast/feed"><img src="../../../static/rss-small.png" title="Webcast RSS Feed" label="Webcast RSS Feed" alt="Webcast RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Webcast" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Webcast" /> <small><em>3</em></small>
      </form>
    </div>
    
    <div class="category">
      <a href="https://blog.miguelgrinberg.com/category/Windows/feed"><img src="../../../static/rss-small.png" title="Windows RSS Feed" label="Windows RSS Feed" alt="Windows RSS Feed" /></a>
      <form action="https://blog.miguelgrinberg.com/category/Windows" method="POST">
        <input type="submit" class="btn btn-primary btn-sm" value="Windows" /> <small><em>1</em></small>
      </form>
    </div>
    
  </div>
</div>
        
      </div>
    </div>
    
  </div>
  <div id="footer">
    
    <p>&copy; 2012-<script type="text/javascript">document.write(new Date().getFullYear());</script> by Miguel Grinberg. All rights reserved. <a href="mailto:webmaster _at_ miguelgrinberg _dot_ com">Questions?</a></p>
  </div>
</div>

  
    <script src="../../../../cdn.jsdelivr.net/npm/bootstrap%405.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../../static/prettify.js"></script>
  <script src="../../../../cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment-with-locales.min.js" integrity="sha512-42PE0rd+wZ2hNXftlM78BSehIGzezNeQuzihiBCvUEB3CVxHvsShF86wBWwQORNxNINlBPuq7rG4WWhNiTVHFg==" crossorigin="anonymous"></script>

<script>
moment.locale("en");
function flask_moment_render(elem) {{
    const timestamp = moment(elem.dataset.timestamp);
    const func = elem.dataset.function;
    const format = elem.dataset.format;
    const timestamp2 = elem.dataset.timestamp2;
    const no_suffix = elem.dataset.nosuffix;
    const units = elem.dataset.units;
    let args = [];
    if (format)
        args.push(format);
    if (timestamp2)
        args.push(moment(timestamp2));
    if (no_suffix)
        args.push(no_suffix);
    if (units)
        args.push(units);
    elem.textContent = timestamp[func].apply(timestamp, args);
    elem.classList.remove('flask-moment');
    elem.style.display = "";
}}
function flask_moment_render_all() {{
    const moments = document.querySelectorAll('.flask-moment');
    moments.forEach(function(moment) {{
        flask_moment_render(moment);
        const refresh = moment.dataset.refresh;
        if (refresh && refresh > 0) {{
            (function(elem, interval) {{
                setInterval(function() {{
                    flask_moment_render(elem);
                }}, interval);
            }})(moment, refresh);
        }}
    }})
}}
document.addEventListener("DOMContentLoaded", flask_moment_render_all);
</script>

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-20EHZP9GRZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-20EHZP9GRZ');
  </script>
  
  <script type="text/javascript">
    function setThemeUI() {
      document.getElementById('select-theme-auto').classList.remove('active');
      document.getElementById('select-theme-light').classList.remove('active');
      document.getElementById('select-theme-dark').classList.remove('active');
      const theme = getPreferredTheme();
      const actualTheme = document.documentElement.getAttribute('data-bs-theme', 'light');
      document.getElementById('select-theme-' + theme).classList.add('active');
      document.getElementById('current-theme').href.baseVal = `#icon-theme-${actualTheme}`;
    };

    function updateTheme(theme) {
      if (theme === 'auto') {
        localStorage.removeItem('theme')
      }
      else {
        localStorage.setItem('theme', theme)
      }
      setTheme(getPreferredTheme());
    }

    setThemeUI();

    const darkModePreference = window.matchMedia("(prefers-color-scheme: dark)");
    darkModePreference.addEventListener("change", e => {
      if (getPreferredTheme() === 'auto') {
        setTheme('auto');
      }
    });

    document.addEventListener("DOMContentLoaded", () => {
      // add prettyprint class to all <pre><code></code></pre> blocks
      let prettify = false;
      document.querySelectorAll('div.post-body pre code').forEach((code) => {
        code.parentNode.classList.add('prettyprint');
        prettify = true;
      });
      prettyPrint();
    });
  </script>

  </body>

<!-- Mirrored from blog.miguelgrinberg.com/post/it-s-time-for-a-change-datetime-utcnow-is-now-deprecated/page/1 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Oct 2024 09:41:31 GMT -->
</html>